(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6f59"],{"/qLN":function(e,t,a){"use strict";var i=a("HRE2");a.n(i).a},"1EZu":function(e,t,a){"use strict";var i=a("p5Dp");a.n(i).a},"5ya0":function(e,t,a){},"9GgJ":function(e,t,a){"use strict";var i={name:"XrHeader",components:{},props:{iconClass:[String,Array],iconColor:String,label:String,showSearch:{type:Boolean,default:!1},searchIconType:{type:String,default:"text"},placeholder:{type:String,default:"请输入内容"},ftTop:{type:String,default:"15px"},content:[String,Number],inputAttr:{type:Object,default:function(){}}},data:function(){return{search:""}},computed:{},watch:{content:{handler:function(){this.search!=this.content&&(this.search=this.content)},immediate:!0}},mounted:function(){},beforeDestroy:function(){},methods:{inputChange:function(){this.$emit("update:content",this.search)},searchClick:function(){this.$emit("search",this.search)}}},l=(a("zIzm"),a("KHd+")),n=Object(l.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("flexbox",{staticClass:"xr-header"},[e.iconClass?a("div",{staticClass:"xr-header__icon",style:{backgroundColor:e.iconColor}},[a("i",{class:e.iconClass})]):e._e(),e._v(" "),a("div",{staticClass:"xr-header__label"},[e.$slots.label?e._t("label"):[e._v(e._s(e.label))]],2),e._v(" "),e.showSearch?a("el-input",e._b({staticClass:"xr-header__search",class:{"is-text":"text"===e.searchIconType},style:{"margin-top":e.ftTop},attrs:{placeholder:e.placeholder},on:{input:e.inputChange},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchClick(t):null}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},"el-input",e.inputAttr,!1),["text"===e.searchIconType?a("el-button",{attrs:{slot:"append",type:"primary"},nativeOn:{click:function(t){return e.searchClick(t)}},slot:"append"},[e._v("搜索")]):a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},nativeOn:{click:function(t){return e.searchClick(t)}},slot:"append"})],1):e._e(),e._v(" "),a("div",{staticClass:"xr-header__ft",style:{top:e.ftTop}},[e._t("ft")],2)],1)},[],!1,null,"7bba770c",null);n.options.__file="index.vue";t.a=n.exports},Ex8i:function(e,t,a){},HRE2:function(e,t,a){},KT9v:function(e,t,a){},NEL7:function(e,t,a){"use strict";var i=a("uh96");a.n(i).a},NG4t:function(e,t,a){"use strict";var i=a("wEds");a.n(i).a},OViU:function(e,t,a){"use strict";var i=a("cjXl");a.n(i).a},R1cw:function(e,t,a){"use strict";var i=a("KT9v");a.n(i).a},TU8R:function(e,t,a){},UzdC:function(e,t,a){"use strict";var i={name:"WkDetailHeader",components:{},props:{iconClass:[String,Array],iconBgColor:{type:String,default:"#ECEEF2"},iconColor:{type:String,default:"#42526E"},detailName:String,detailValue:String,defaultBodyShow:{type:Boolean,default:!0},dropdownItems:Array,showEdit:{type:Boolean,default:!1},editButtonClass:{type:String,default:"xr-btn--primary"}},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{handleTypeClick:function(e){this.$emit("command-select",e)},editClick:function(){this.$emit("edit")}}},l=(a("nEBa"),a("KHd+")),n=Object(l.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("flexbox",{staticClass:"xr-detail-header"},[e.iconClass?a("div",{staticClass:"xr-detail-header__icon",style:{backgroundColor:e.iconBgColor}},[a("i",{class:e.iconClass,style:{color:e.iconColor}})]):e._e(),e._v(" "),a("div",{staticClass:"xr-detail-header__body"},[e._t("body"),e._v(" "),e.defaultBodyShow?[a("div",{staticClass:"detail-name"},[e._v(e._s(e.detailName))]),e._v(" "),a("div",{staticClass:"detail-value"},[e._v(e._s(e.detailValue))])]:e._e()],2),e._v(" "),a("div",{staticClass:"xr-detail-header__ft"},[e._t("ft"),e._v(" "),e.showEdit?a("el-button",{staticClass:"xr-detail-header--button",class:e.editButtonClass,staticStyle:{"margin-right":"10px"},attrs:{icon:"wk wk-circle-edit",type:"primary"},nativeOn:{click:function(t){return e.editClick(t)}}},[e._v("编辑")]):e._e(),e._v(" "),e.dropdownItems&&e.dropdownItems.length>0?a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleTypeClick}},[a("el-button",{staticClass:"xr-detail-header--more",attrs:{icon:"el-icon-more"}}),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.dropdownItems,function(t,i){return a("el-dropdown-item",{key:i,attrs:{icon:t.icon,command:t.command}},[e._v(e._s(t.label))])}))],1):e._e()],2)])},[],!1,null,"e893dc20",null);n.options.__file="index.vue";t.a=n.exports},W7L6:function(e,t,a){},cjXl:function(e,t,a){},ihDC:function(e,t,a){},"ixM/":function(e,t,a){"use strict";a.d(t,"c",function(){return d}),a.d(t,"g",function(){return c}),a.d(t,"a",function(){return u}),a.d(t,"f",function(){return p}),a.d(t,"d",function(){return m}),a.d(t,"e",function(){return f}),a.d(t,"b",function(){return h});var i=a("GQeE"),l=a.n(i),n=a("7Qib"),r=a("a/5N"),s=a("cHj4"),o=a("D0zU");var d={fields:[{name:"学历",field:"education",formType:"select",setting:[{label:"小学",value:1},{label:"初中",value:2},{label:"中专",value:3},{label:"中职",value:4},{label:"中技",value:5},{label:"高中",value:6},{label:"大专",value:7},{label:"本科",value:8},{label:"硕士",value:9},{label:"博士",value:10},{label:"博士后",value:11},{label:"其他",value:12}]},{name:"毕业院校",field:"graduateSchool",formType:"text",setting:[]},{name:"专业",field:"major",formType:"text",setting:[]},{name:"入学时间",field:"admissionTime",formType:"date",setting:[]},{name:"毕业时间",field:"graduationTime",formType:"date",setting:[]},{name:"教学方式",field:"teachingMethods",formType:"select",setting:[{label:"全日制",value:1},{label:"成人教育",value:2},{label:"远程教育",value:3},{label:"自学考试",value:4},{label:"其他",value:5}]},{name:"是否第一学历",field:"isFirstDegree",formType:"radio",setting:[{label:"否",value:0},{label:"是",value:1}]}],rules:{education:[{required:!0,message:"请选择",trigger:["blur","change"]}],graduateSchool:[{required:!0,message:"请输入",trigger:["blur","change"]}],major:[{required:!0,message:"请输入",trigger:["blur","change"]}],isFirstDegree:[{required:!0,message:"请选择",trigger:["blur","change"]}]},educationValue:{1:"小学",2:"初中",3:"中专",4:"中职",5:"中技",6:"高中",7:"大专",8:"本科",9:"硕士",10:"博士",11:"博士后",12:"其他"},teachingMethodsValue:{1:"全日制",2:"成人教育",3:"远程教育",4:"自学考试",5:"其他"},isFirstDegreeValue:{1:"是",0:"否"}},c={fields:[{name:"工作单位",field:"workUnit",formType:"text",setting:[]},{name:"职务",field:"post",formType:"text",setting:[]},{name:"工作开始时间",field:"workStartTime",formType:"date",setting:[]},{name:"工作结束时间",field:"workEndTime",formType:"date",setting:[]},{name:"离职原因",field:"leavingReason",formType:"text",setting:[]},{name:"证明人",field:"witness",formType:"text",setting:[]},{name:"证明人电话",field:"witnessPhone",formType:"mobile",setting:[]},{name:"工作备注",field:"workRemarks",formType:"text",setting:[]}],rules:{workUnit:[{required:!0,message:"请输入",trigger:["blur","change"]}],post:[{required:!0,message:"请输入",trigger:["blur","change"]}],witnessPhone:[{validator:function(e,t,a){Object(r.b)(t)||Object(n.y)(t)?a():a(new Error("手机格式有误"))},trigger:["blur","change"]}]}},u={fields:[{name:"证书名称",field:"certificateName",formType:"text",setting:[]},{name:"证书级别",field:"certificateLevel",formType:"text",setting:[]},{name:"证书/证件编号",field:"certificateNum",formType:"text",setting:[]},{name:"有效期起始日期",field:"startTime",formType:"date",setting:[]},{name:"有效期到期日",field:"endTime",formType:"date",setting:[]},{name:"发证机构",field:"issuingAuthority",formType:"text",setting:[]},{name:"发证日期",field:"issuingTime",formType:"date",setting:[]},{name:"证件备注",field:"remarks",formType:"text",setting:[]}],rules:{certificateName:[{required:!0,message:"请输入",trigger:["blur","change"]}]}},p={fields:[{name:"培训课程",field:"trainingCourse",formType:"text",setting:[]},{name:"培训机构名称",field:"trainingOrganName",formType:"text",setting:[]},{name:"培训开始时间",field:"startTime",formType:"date",setting:[]},{name:"培训结束时间",field:"endTime",formType:"date",setting:[]},{name:"培训时长",field:"trainingDuration",formType:"number",setting:[]},{name:"培训成绩",field:"trainingResults",formType:"text",setting:[]},{name:"培训证书名称",field:"trainingCertificateName",formType:"text",setting:[]},{name:"培训备注",field:"remarks",formType:"textarea",setting:[]}],rules:{trainingCourse:[{required:!0,message:"请输入",trigger:["blur","change"]}]}},m={sexValue:{1:"男",2:"女"},birthdayTypeValue:{1:"阳历",2:"农历"},idTypeValue:{1:"身份证",2:"港澳通行证",3:"台湾通行证",4:"护照",5:"其他"},employmentFormsValue:{1:"正式",2:"非正式"},probationValue:{0:"无试用期",1:"1个月",2:"2个月",3:"3个月",4:"4个月",5:"5个月",6:"6个月"},statusValue:{1:"正式",2:"试用",3:"实习",4:"兼职",5:"劳务",6:"顾问",7:"返聘",8:"外包",11:"在职",12:"全职",13:"待入职",14:"待离职",15:"已离职"},validStatusValue:{1:"正式",2:"试用",3:"实习",4:"兼职",5:"劳务",6:"顾问",7:"返聘",8:"外包"},getValueList:function(e){return l()(e).map(function(t){return{label:e[t],value:parseInt(t)}})},sexSetting:[{label:"男",value:1},{label:"女",value:2}],idTypeSetting:[{label:"身份证",value:1},{label:"港澳通行证",value:2},{label:"台湾通行证",value:3},{label:"护照",value:4},{label:"其他",value:5}],employmentFormsSetting:[{label:"正式",value:1},{label:"非正式",value:2}],probationSetting:[{label:"无试用期",value:0},{label:"1个月",value:1},{label:"2个月",value:2},{label:"3个月",value:3},{label:"4个月",value:4},{label:"5个月",value:5},{label:"6个月",value:6}],statusSetting:[{label:"实习",value:3},{label:"兼职",value:4},{label:"劳务",value:5},{label:"顾问",value:6},{label:"返聘",value:7},{label:"外包",value:8}]},f={fields:[{name:"部门",field:"newDept",formType:"structure",props:{dataType:"hrm"},request:o.e,setting:[]},{name:"岗位",field:"newPost",formType:"text",setting:[]},{name:"直属上级",field:"newParentId",formType:"user",props:{label:"employeeName",value:"employeeId"},request:s.i,setting:[]},{name:"计划转正日期",field:"becomeTime",formType:"text",disabled:!0,setting:[]},{name:"实际转正日期",field:"effectTime",formType:"date",setting:[]},{name:"备注",field:"remarks",formType:"textarea",setting:[]}],rules:{effectTime:[{required:!0,message:"请选择",trigger:["blur","change"]}]}};var h={fieldsFunc:function(e,t){var a=[{label:"调岗",value:5},{label:"晋升",value:6},{label:"降级",value:7}];3!=t&&4!=t||a.push({label:"转为全职员工",value:8});var i=[{name:"异动类型",field:"changeType",formType:"select",setting:a},{name:"异动原因",field:"changeReason",formType:"select",setting:7==e?[{label:"违规违纪",value:4},{label:"绩效不达标",value:5},{label:"个人身体原因",value:6},{label:"不适应当前岗位",value:7}]:[{label:"组织架构调整",value:1},{label:"个人申请",value:2},{label:"工作安排",value:3}]}];return 8==e&&(i=i.concat([{name:"入职日期",field:"entryTime",formType:"date",disabled:!0,setting:[]},{name:"试用期",field:"probation",formType:"select",setting:[{label:"无试用期",value:0},{label:"1个月",value:1},{label:"2个月",value:2},{label:"3个月",value:3},{label:"4个月",value:4},{label:"5个月",value:5},{label:"6个月",value:6}]}])),i.concat([{name:"原部门",field:"oldDept",formType:"structure",disabled:!0,props:{dataType:"hrm"},request:o.e,setting:[]},{name:"变更为",field:"newDept",formType:"structure",props:{dataType:"hrm"},request:o.e,setting:[]},{name:"原岗位",field:"oldPost",formType:"text",disabled:!0,setting:[]},{name:"变更为",field:"newPost",formType:"text",setting:[]},{name:"原岗位职级",field:"oldPostLevel",disabled:!0,formType:"text",setting:[]},{name:"变更为",field:"newPostLevel",formType:"text",setting:[]},{name:"原工作地点",field:"oldWorkAddress",formType:"text",disabled:!0,setting:[]},{name:"变更为",field:"newWorkAddress",formType:"text",setting:[]},{name:"生效日期",field:"effectTime",formType:"date",setting:[]},{name:"备注",field:"remarks",formType:"textarea",setting:[]}])},rules:{effectTime:[{required:!0,message:"请选择",trigger:["blur","change"]}]}}},"j3/X":function(e,t,a){"use strict";var i=a("EP+0"),l=a("lMh0"),n={name:"WkBaseDetail",components:{CreateSections:i.a,WkBaseDetailSection:l.a},props:{list:Array,dropdownItems:Array},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{sectionCommandSelect:function(e){this.$emit("top-command-select",e)}}},r=(a("ukGi"),a("KHd+")),s=Object(r.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wk-base-detail"},e._l(e.list,function(t,i){return a("create-sections",{key:i,staticClass:"wk-base-detail__section",attrs:{title:t.name,"dropdown-items":e.dropdownItems,"content-height":"auto"},on:{"command-select":e.sectionCommandSelect}},[a("wk-base-detail-section",{attrs:{list:t.list}}),e._v(" "),a("div",{staticClass:"wk-base-detail__more",attrs:{slot:"header"},slot:"header"},[e._t("more")],2),e._v(" "),e._t("default")],2)}))},[],!1,null,"77fb34d6",null);s.options.__file="index.vue";t.a=s.exports},jr1U:function(e,t,a){e.exports={default:a("wObO"),__esModule:!0}},lMh0:function(e,t,a){"use strict";var i={name:"WkBaseDetailSection",components:{},props:{list:Array,gutter:{type:Number,default:0},dropdownItems:Array},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{handleTypeClick:function(e){this.$emit("command-select",e)}}},l=(a("NEL7"),a("KHd+")),n=Object(l.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("flexbox",{staticClass:"wk-base-detail-section",attrs:{gutter:e.gutter,align:"stretch",wrap:"wrap"}},[e._l(e.list,function(t,i){return a("flexbox-item",{key:i,attrs:{span:t.span?t.span:.5}},[a("flexbox",{staticClass:"wk-base-detail-section__item",attrs:{align:"stretch"}},[a("div",{staticClass:"item-name"},[e._v(e._s(t.label))]),e._v(" "),a("div",{staticClass:"item-value"},[e._v(e._s(t.value))])])],1)}),e._v(" "),e.dropdownItems&&e.dropdownItems.length>0?a("el-dropdown",{staticClass:"wk-base-detail-section__more",attrs:{trigger:"hover"},on:{command:e.handleTypeClick}},[a("i",{staticClass:"el-icon-more",staticStyle:{cursor:"pointer"}}),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.dropdownItems,function(t,i){return a("el-dropdown-item",{key:i,attrs:{icon:t.icon,command:t.command}},[e._v(e._s(t.label))])}))],1):e._e(),e._v(" "),e._t("default")],2)},[],!1,null,"d0780fa2",null);n.options.__file="WkBaseDetailSection.vue";t.a=n.exports},nEBa:function(e,t,a){"use strict";var i=a("W7L6");a.n(i).a},nboU:function(e,t,a){"use strict";t.a={watch:{loading:function(e){if(e){var t=this.$refs.wkDialog.$refs.dialog;this.loadingInstance=this.$loading({target:t})}else this.loadingInstance&&this.loadingInstance.close()}}}},o7sS:function(e,t,a){"use strict";var i=a("Ex8i");a.n(i).a},p5Dp:function(e,t,a){},uh96:function(e,t,a){},ukGi:function(e,t,a){"use strict";var i=a("5ya0");a.n(i).a},wEds:function(e,t,a){e.exports={xrColorPrimary:"#2362FB"}},wObO:function(e,t){e.exports=function(){return Function.call.apply(Array.prototype.concat,arguments)}},yLOl:function(e,t,a){"use strict";a.r(t);var i=a("QbLZ"),l=a.n(i),n=a("D0zU"),r=a("jr1U"),s=a.n(r),o=a("rfXi"),d=a.n(o),c=a("Kw5r");function u(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments[4],n=[];return d()(e).forEach(function(e){void 0===e._expanded&&c.default.set(e,"_expanded",t);var r=1;if(void 0!==i&&null!==i&&(r=i+1),l&&l(e),c.default.set(e,"_level",r),a&&c.default.set(e,"parent",a),n.push(e),e.children&&e.children.length>0){var s=u(e.children,t,e,r,l);n=n.concat(s)}}),n}var p={name:"TreeTable",inheritAttrs:!1,props:{data:{type:[Array,Object],required:!0},columns:{type:Array,default:function(){return[]}},evalFunc:Function,evalArgs:Array,expandAll:{type:Boolean,default:!1}},computed:{formatData:function(){var e=void 0;e=Array.isArray(this.data)?this.data:[this.data];var t=this.evalFunc||u,a=this.evalArgs?s()([e,this.expandAll],this.evalArgs):[e,this.expandAll];return t.apply(null,a)}},methods:{showRow:function(e){var t=!e.row.parent||e.row.parent._expanded&&e.row.parent._show;return e.row._show=t,t?{animation:"treeTableShow 1s","-webkit-animation":"treeTableShow 1s"}:{display:"none"}},toggleExpanded:function(e){var t=this.formatData[e];t._expanded=!t._expanded},iconShow:function(e,t){return 0===e&&t.children&&t.children.length>0}}},m=(a("/qLN"),a("1EZu"),a("NG4t"),a("KHd+")),f=Object(m.a)(p,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",e._g(e._b({staticClass:"tree-table",attrs:{data:e.formatData,"row-style":e.showRow}},"el-table",e.$attrs,!1),e.$listeners),[0===e.columns.length?a("el-table-column",{attrs:{"show-overflow-tooltip":"",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row._level,function(e){return a("span",{key:e,staticClass:"ms-tree-space"})}),e._v(" "),e.iconShow(0,t.row)?a("span",{staticClass:"tree-ctrl",on:{click:function(a){e.toggleExpanded(t.$index)}}},[t.row._expanded?a("i",{staticClass:"el-icon-caret-bottom"}):a("i",{staticClass:"el-icon-caret-right"})]):e._e(),e._v("\n      "+e._s(t.$index)+"\n    ")]}}])}):e._l(e.columns,function(t,i){return a("el-table-column",{key:t.value,attrs:{label:t.text,width:t.width,"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(l){return[e._l(l.row._level,function(e){return a("span",{directives:[{name:"show",rawName:"v-show",value:0===i,expression:"index === 0"}],key:e,staticClass:"ms-tree-space"})}),e._v(" "),e.iconShow(i,l.row)?a("span",{staticClass:"tree-ctrl",on:{click:function(t){t.stopPropagation(),e.toggleExpanded(l.$index)}}},[l.row._expanded?a("i",{staticClass:"el-icon-caret-bottom"}):a("i",{staticClass:"el-icon-caret-right"})]):e._e(),e._v("\n      "+e._s(l.row[t.value])),0===i?[1==l.row.deptType?a("i",{staticClass:"wk wk-subordinate tree-icon"}):e._e(),e._v(" "),2==l.row.deptType?a("i",{staticClass:"wk wk-customer-solid tree-icon"}):e._e()]:e._e()]}},{key:"header",fn:function(t){var i=t.column,l=t.$index;return[e._v("\n      "+e._s(i.label)+"\n      "),l>1?[a("el-tooltip",{attrs:{content:"当前部门人数（包含下级部门总人数）",effect:"dark",placement:"top"}},[a("i",{staticClass:"wk wk-help wk-help-tips"})])]:e._e()]}}])})}),e._v(" "),e._t("default")],2)},[],!1,null,"42f8aa30",null);f.options.__file="index.vue";var h=f.exports,g=a("9GgJ"),v=a("cHj4"),b=a("XAon"),y=a("3pgX"),w=a("nboU"),_={name:"DeptAddDialog",components:{WkUserSelect:b.a,WkDepSelect:y.a},mixins:[w.a],props:{data:Object,visible:{type:Boolean,required:!0,default:!1}},data:function(){return{loading:!1,deptAddForm:{deptType:1}}},computed:{title:function(){return this.data?"编辑组织部门":"新建组织部门"},addFields:function(){var e=[{name:"组织部门名称",field:"name",formType:"text",setting:[]},{name:"组织编码",field:"code",formType:"text",setting:[]},{name:"组织类型",field:"deptType",formType:"radio",setting:[{label:"公司",value:1},{label:"部门",value:2}]}];return this.data&&0===this.data.pid||e.push({name:"上级组织",field:"pid",formType:"structure",setting:[]}),e.concat([{name:"组织负责人",field:"mainEmployeeId",formType:"user",request:v.C,setting:[]},{name:"分管领导",field:"leaderEmployeeId",formType:"user",request:v.C,setting:[]}])},rules:function(){var e={name:{required:!0,message:"请输入",trigger:["blur","change"]},code:{required:!0,message:"请输入",trigger:["blur","change"]},deptType:{required:!0,message:"请选择",trigger:["blur","change"]}};return this.data&&0===this.data.pid||(e.pid={required:!0,message:"请选择",trigger:["blur","change"]}),e},structureParams:function(){return this.data?{type:"update",id:this.data.deptId}:{type:"tree"}}},watch:{visible:{handler:function(e){var t=this;e&&(this.data?this.deptAddForm={deptType:this.data.deptType,code:this.data.code,name:this.data.name,mainEmployeeId:this.data.mainEmployeeId,leaderEmployeeId:this.data.leaderEmployeeId,pid:this.data.pid}:this.deptAddForm={deptType:1},this.$nextTick(function(){t.$refs.deptAddForm&&t.$refs.deptAddForm.clearValidate()}))},immediate:!0}},mounted:function(){},methods:{handleCancel:function(){this.$emit("update:visible",!1)},handleConfirm:function(){var e=this;this.$refs.deptAddForm.validate(function(t){if(t){var a={};a.name=e.deptAddForm.name,a.code=e.deptAddForm.code,a.deptType=e.deptAddForm.deptType,a.pid=e.deptAddForm.pid,a.mainEmployeeId=e.deptAddForm.mainEmployeeId,a.leaderEmployeeId=e.deptAddForm.leaderEmployeeId,e.loading=!0,e.data&&(a.deptId=e.data.deptId),(e.data?n.f:n.a)(a).then(function(t){e.loading=!1,e.$message.success(e.title+"成功"),e.$store.dispatch("GetHrmDeptList"),e.$emit("success"),e.handleCancel()}).catch(function(){e.loading=!1})}})}}},T=(a("o7sS"),Object(m.a)(_,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{ref:"wkDialog",attrs:{visible:e.visible,"append-to-body":!0,"close-on-click-modal":!1,title:e.title,width:"700px"},on:{close:e.handleCancel}},[a("el-form",{ref:"deptAddForm",attrs:{model:e.deptAddForm,rules:e.rules,"validate-on-rule-change":!1,"label-position":"top"}},e._l(e.addFields,function(t,i){return a("el-form-item",{key:i,attrs:{prop:t.field}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n        "+e._s(t.name)+"\n      ")]),e._v(" "),"text"==t.formType?a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.deptAddForm[t.field],callback:function(a){e.$set(e.deptAddForm,t.field,a)},expression:"deptAddForm[item.field]"}}):"radio"==t.formType?a("el-radio-group",{model:{value:e.deptAddForm[t.field],callback:function(a){e.$set(e.deptAddForm,t.field,a)},expression:"deptAddForm[item.field]"}},e._l(t.setting,function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})):"structure"==t.formType?a("wk-dep-select",{staticStyle:{width:"100%"},attrs:{props:{dataType:"hrm"},params:e.structureParams,radio:""},model:{value:e.deptAddForm[t.field],callback:function(a){e.$set(e.deptAddForm,t.field,a)},expression:"deptAddForm[item.field]"}}):"user"==t.formType?a("wk-user-select",{staticStyle:{width:"100%"},attrs:{request:t.request,props:{label:"employeeName",value:"employeeId"},radio:""},model:{value:e.deptAddForm[t.field],callback:function(a){e.$set(e.deptAddForm,t.field,a)},expression:"deptAddForm[item.field]"}}):e._e()],1)})),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v("取消")]),e._v(" "),a("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:e.handleConfirm,expression:"handleConfirm"}],attrs:{type:"primary"}},[e._v("保存")])],1)],1)},[],!1,null,"b17e6f1e",null));T.options.__file="DeptAddDialog.vue";var x=T.exports,C=a("Ew9n"),k=a("UzdC"),D=a("j3/X"),A=a("FdMb"),S=a("ixM/"),N={name:"RelativeEmployee",components:{},props:{id:[String,Number]},data:function(){return{list:[],search:"",currentPage:1,pageSize:15,pageTotal:0,fieldList:[{prop:"employeeName",width:"200",label:"姓名"},{prop:"jobNumber",width:"200",label:"工号"},{prop:"deptName",width:"200",label:"部门"},{prop:"post",width:"200",label:"岗位"},{prop:"employmentForms",width:"200",label:"聘用形式"},{prop:"entryTime",width:"200",label:"入职时间"}],tableHeight:"400px"}},computed:{},watch:{id:function(e){this.list=[],this.getList()}},created:function(){this.debouncedGetList=Object(A.a)(300,this.refreshList),this.refreshList()},activated:function(){},deactivated:function(){},methods:{refreshList:function(){this.handleCurrentChange(1)},handleCurrentChange:function(e){this.currentPage=e,this.getList()},getList:function(){var e=this;this.loading=!0,Object(n.d)({deptId:this.id,search:this.search,page:this.currentPage,limit:this.pageSize}).then(function(t){e.loading=!1,e.list=t.data.list||[],e.pageTotal=t.data.totalRow}).catch(function(t){e.loading=!1})},fieldFormatter:function(e,t){var a=S.d[t.property+"Value"];return a?a[e[t.property]]||"--":e[t.property]||"--"},handleRowClick:function(e,t,a){},cellClassName:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;return"name"===t.property?"can-visit--underline":""}}},E=(a("R1cw"),Object(m.a)(N,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"relative-employee"},[a("div",{staticClass:"relative-employee__header"},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入员工姓名"},on:{input:e.debouncedGetList},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("i",{staticClass:"el-icon-search",attrs:{slot:"prepend"},slot:"prepend"})])],1),e._v(" "),a("el-table",{staticClass:"el-table-header--white",attrs:{data:e.list,height:e.tableHeight,"cell-class-name":e.cellClassName,stripe:""},on:{"row-click":e.handleRowClick}},e._l(e.fieldList,function(t,i){return a("el-table-column",{key:i,attrs:{prop:t.prop,label:t.label,formatter:e.fieldFormatter,"show-overflow-tooltip":""}})})),e._v(" "),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"page-size":e.pageSize,"current-page":e.currentPage,total:e.pageTotal,layout:"prev, pager, next"},on:{"current-change":e.handleCurrentChange}})],1)},[],!1,null,"710e69a2",null));E.options.__file="RelativeEmployee.vue";var F=E.exports,I=a("L2JU"),$={name:"DeptDetail",components:{SlideView:C.a,WkDetailHeader:k.a,WkBaseDetail:D.a,RelativeEmployee:F,DeptAddDialog:x},props:{id:[String,Number],listenerIDs:{type:Array,default:function(){return["crm-main-container"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return["el-table__body","org-tree-node-label"]}}},data:function(){return{loading:!1,detailData:null,tabCurrentName:"baseInfo",deptAddDialogShow:!1}},computed:l()({},Object(I.b)(["hrm"]),{deptAuth:function(){return this.hrm.dept},editAuth:function(){return this.deptAuth.update},deleteAuth:function(){return this.deptAuth.delete&&this.detailData&&0!==this.detailData.pid},dropdownItems:function(){return this.deleteAuth?[{icon:"wk wk-delete",label:"删除",command:"delete"}]:[]},baseList:function(){return this.detailData?[{name:"",list:[{label:"组织部门名称",value:this.detailData.name},{label:"组织编码",value:this.detailData.code},{label:"组织类型",value:{1:"公司",2:"部门"}[this.detailData.deptType]},{label:"在职员工",value:this.detailData.allNum},{label:"全职员工",value:this.detailData.fullTimeNum},{label:"非全职人数",value:this.detailData.nuFullTimeNum},{label:"上级组织",value:this.detailData.pname},{label:"组织负责人",value:this.detailData.mainEmployeeName},{label:"分管领导",value:this.detailData.leadEmployeeName}]}]:[]},iconClass:function(){return this.detailData?{1:"wk wk-subordinate",2:"wk wk-customer-solid"}[this.detailData.deptType]:""}}),watch:{id:function(){this.detailData=null,this.getDetial()}},mounted:function(){},beforeDestroy:function(){},methods:{viewAfterEnter:function(){this.getDetial()},getDetial:function(){var e=this;this.loading=!0,Object(n.c)(this.id).then(function(t){e.detailData=t.data||{},e.loading=!1}).catch(function(){e.loading=!1,e.hideView()})},editClick:function(){this.deptAddDialogShow=!0},editSuccess:function(){this.getDetial(),this.$emit("edit-success")},commandSelect:function(e){var t=this;"delete"===e&&this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.b)(t.id).then(function(e){t.$message.success("删除成功"),t.$emit("delete-success"),t.hideView()})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},hideView:function(){this.$emit("close")}}},L=(a("yZ+X"),Object(m.a)($,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("slide-view",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"d-view",attrs:{"listener-ids":e.listenerIDs,"no-listener-ids":e.noListenerIDs,"no-listener-class":e.noListenerClass,"body-style":{padding:0,height:"100%",background:"white"}},on:{afterEnter:e.viewAfterEnter,close:e.hideView}},[e.detailData?a("flexbox",{staticClass:"side-detail-main",staticStyle:{padding:"0 15px"},attrs:{direction:"column",align:"stretch"}},[a("wk-detail-header",{attrs:{"detail-value":e.detailData.name,"dropdown-items":e.dropdownItems,"show-edit":e.editAuth,"icon-class":e.iconClass,"detail-name":"组织部门","icon-bg-color":"#ECEEF2","icon-color":"#42526E"},on:{edit:e.editClick,"command-select":e.commandSelect}}),e._v(" "),a("el-tabs",{staticClass:"side-detail__tabs--default",staticStyle:{flex:"1"},model:{value:e.tabCurrentName,callback:function(t){e.tabCurrentName=t},expression:"tabCurrentName"}},[a("el-tab-pane",{attrs:{label:"详细资料",name:"baseInfo",lazy:""}},[a("wk-base-detail",{attrs:{list:e.baseList}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"员工列表",name:"employee",lazy:""}},[a("relative-employee",{attrs:{id:e.id}})],1)],1)],1):e._e(),e._v(" "),a("dept-add-dialog",{attrs:{data:e.detailData,visible:e.deptAddDialogShow},on:{"update:visible":function(t){e.deptAddDialogShow=t},success:e.editSuccess}})],1)},[],!1,null,"991c500c",null));L.options.__file="DeptDetail.vue";var O=L.exports,j={name:"Index",components:{TreeTable:h,XrHeader:g.a,DeptAddDialog:x,DeptDetail:O},data:function(){return{loading:!1,tableHeight:document.documentElement.clientHeight-140,search:"",showType:"table",list:[],deptAddDialogShow:!1,columns:[{text:"组织部门名称",value:"name",width:400},{text:"组织类型",value:"deptTypeName"},{text:"在职员工",value:"allNumName"},{text:"全职员工",value:"fullTimeNumName"},{text:"非全职人数",value:"nuFullTimeNumName"}],detailShow:!1,detailId:null}},computed:l()({},Object(I.b)(["hrm","hrmUserType"]),{deptAuth:function(){return this.hrm&&this.hrm.dept},createAuth:function(){return this.deptAuth.save},detailAuth:function(){return this.deptAuth.read},orgTreeData:function(){return this.list.length>0?this.list[0]:{}}}),watch:{},created:function(){var e=this;window.onresize=function(){e.tableHeight=document.documentElement.clientHeight-140},this.getDeptList()},mounted:function(){},methods:{getDeptList:function(){var e=this;this.loading=!0,Object(n.e)({type:"tree",name:this.search}).then(function(t){e.list=t.data||[],e.loading=!1}).catch(function(){e.loading=!1})},fieldFormatter:function(e){e.deptTypeName={1:"公司",2:"部门"}[e.deptType],e.allNumName=e.myAllNum+"（"+(e.allNum||0)+"）",e.fullTimeNumName=e.myFullTimeNum+"（"+(e.fullTimeNum||0)+"）",e.nuFullTimeNumName=e.myNuFullTimeNum+"（"+(e.nuFullTimeNum||0)+"）"},cellClassName:function(e){e.row,e.column,e.rowIndex;return 0==e.columnIndex&&this.detailAuth?"can-visit-default":""},searchClick:function(e){this.search=e,this.getDeptList()},createClick:function(){this.deptAddDialogShow=!0},handleRowClick:function(e,t,a){this.detailAuth&&(this.detailId=e.deptId,this.detailShow=!0)},renderContent:function(e,t){return t.name+"（"+t.allNum+"）"},orgTreeClass:function(e){return{1:"org-tree-company",2:"org-tree-department"}[e.deptType]},orgTreeClick:function(e,t){this.handleRowClick(t)}}},q=(a("OViU"),Object(m.a)(j,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("xr-header",{staticStyle:{padding:"0px 15px 15px 0"},attrs:{"icon-class":"wk wk-subordinate","icon-color":"#2362FB","ft-top":"0",placeholder:"请输入组织部门名称","show-search":"","search-icon-type":"icon"},on:{search:e.searchClick}},[a("template",{slot:"label"},[e._v("\n      组织管理"),2===e.hrmUserType?a("el-tooltip",{staticStyle:{"margin-left":"8px"},attrs:{effect:"dark",placement:"top",content:"仅展示您管理范围内的员工"}},[a("i",{staticClass:"wk wk-help wk-help-tips"})]):e._e()],1),e._v(" "),a("template",{slot:"ft"},[e.createAuth?a("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.createClick}},[e._v("新建组织")]):e._e(),e._v(" "),a("el-radio-group",{attrs:{size:"small"},model:{value:e.showType,callback:function(t){e.showType=t},expression:"showType"}},[a("el-radio-button",{attrs:{label:"table"}},[a("i",{staticClass:"wk wk-table"})]),e._v(" "),a("el-radio-button",{attrs:{label:"tree"}},[a("i",{staticClass:"wk wk-org"})])],1)],1)],2),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"wrapper-main",class:{"is-org":"tree"===e.showType}},["table"==e.showType?a("tree-table",{staticClass:"el-table-header--white",attrs:{data:e.list,height:e.tableHeight,columns:e.columns,"eval-args":[null,null,e.fieldFormatter],"cell-class-name":e.cellClassName,stripe:"","expand-all":""},on:{"row-click":e.handleRowClick}}):a("div",{staticClass:"wk-org-tree",style:{height:e.tableHeight+"px"}},[a("vue2-org-tree",{attrs:{data:e.orgTreeData,"label-class-name":e.orgTreeClass,props:{label:"name",children:"children",expand:"expand"},"render-content":e.renderContent},on:{"on-node-click":e.orgTreeClick}})],1)],1),e._v(" "),e.deptAddDialogShow?a("dept-add-dialog",{attrs:{visible:e.deptAddDialogShow},on:{"update:visible":function(t){e.deptAddDialogShow=t},success:e.getDeptList}}):e._e(),e._v(" "),e.detailShow?a("dept-detail",{attrs:{id:e.detailId},on:{close:function(t){e.detailShow=!1},"edit-success":e.getDeptList,"delete-success":e.getDeptList}}):e._e()],1)},[],!1,null,"0cf2bdfa",null));q.options.__file="index.vue";t.default=q.exports},"yZ+X":function(e,t,a){"use strict";var i=a("TU8R");a.n(i).a},zIzm:function(e,t,a){"use strict";var i=a("ihDC");a.n(i).a}}]);