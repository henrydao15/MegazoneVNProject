(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4e69"],{"+Dty":function(e,t,a){"use strict";var n=a("rhOq");a.n(n).a},"+hK9":function(e,t,a){"use strict";a.d(t,"A",function(){return l}),a.d(t,"C",function(){return o}),a.d(t,"G",function(){return s}),a.d(t,"H",function(){return c}),a.d(t,"B",function(){return u}),a.d(t,"E",function(){return d}),a.d(t,"F",function(){return m}),a.d(t,"z",function(){return p}),a.d(t,"J",function(){return h}),a.d(t,"y",function(){return f}),a.d(t,"x",function(){return g}),a.d(t,"K",function(){return v}),a.d(t,"w",function(){return b}),a.d(t,"v",function(){return y}),a.d(t,"u",function(){return w}),a.d(t,"I",function(){return _}),a.d(t,"D",function(){return C}),a.d(t,"V",function(){return S}),a.d(t,"U",function(){return k}),a.d(t,"T",function(){return T}),a.d(t,"S",function(){return x}),a.d(t,"N",function(){return D}),a.d(t,"O",function(){return F}),a.d(t,"Q",function(){return O}),a.d(t,"P",function(){return j}),a.d(t,"R",function(){return I}),a.d(t,"M",function(){return L}),a.d(t,"L",function(){return N}),a.d(t,"m",function(){return E}),a.d(t,"r",function(){return R}),a.d(t,"t",function(){return A}),a.d(t,"s",function(){return V}),a.d(t,"o",function(){return $}),a.d(t,"q",function(){return q}),a.d(t,"p",function(){return B}),a.d(t,"j",function(){return M}),a.d(t,"h",function(){return U}),a.d(t,"a",function(){return H}),a.d(t,"i",function(){return z}),a.d(t,"n",function(){return P}),a.d(t,"l",function(){return W}),a.d(t,"k",function(){return Y}),a.d(t,"b",function(){return G}),a.d(t,"d",function(){return K}),a.d(t,"e",function(){return Q}),a.d(t,"f",function(){return Z}),a.d(t,"c",function(){return J}),a.d(t,"g",function(){return X});var n=a("GQeE"),r=a.n(n),i=a("t3Un");function l(){return Object(i.a)({url:"hrmSalaryMonthRecord/addNextMonthSalary",method:"post"})}function o(e){var t=new FormData;return r()(e).forEach(function(a){t.append(a,e[a])}),Object(i.a)({url:"hrmSalaryMonthRecord/computeSalaryData",method:"post",data:t,headers:{"Content-Type":"multipart/form-data"}})}function s(e){return Object(i.a)({url:"hrmSalaryMonthRecord/queryPaySalaryNumByType/"+e,method:"post"})}function c(){return Object(i.a)({url:"hrmSalaryMonthRecord/queryNoPaySalaryEmployee",method:"post"})}function u(){return Object(i.a)({url:"hrmSalaryMonthRecord/queryEmployeeChangeNum",method:"post"})}function d(){return Object(i.a)({url:"hrmSalaryMonthRecord/querySalaryOptionHead",method:"post"})}function m(e){return Object(i.a)({url:"hrmSalaryMonthRecord/querySalaryPageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function p(){return Object(i.a)({url:"hrmSalaryMonthRecord/queryLastSalaryMonthRecord",method:"post"})}function h(e){return Object(i.a)({url:"hrmSalaryMonthRecord/querySalaryOptionCount/"+e,method:"post"})}function f(e){return Object(i.a)({url:"hrmSalaryHistoryRecord/queryHistorySalaryList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function g(e){return Object(i.a)({url:"hrmSalaryHistoryRecord/queryHistorySalaryDetail",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function v(e){return Object(i.a)({url:"hrmSalaryMonthRecord/updateSalary",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function b(){return Object(i.a)({url:"hrmSalaryMonthRecord/downloadAttendanceTemp",method:"post",responseType:"blob",headers:{"Content-Type":"application/json;charset=UTF-8"}})}function y(){return Object(i.a)({url:"hrmSalaryMonthRecord/downCumulativeTaxOfLastMonthTemp",method:"post",responseType:"blob",headers:{"Content-Type":"application/json;charset=UTF-8"}})}function w(){return Object(i.a)({url:"hrmSalaryMonthRecord/downloadAdditionalDeductionTemp",method:"post",responseType:"blob",headers:{"Content-Type":"application/json;charset=UTF-8"}})}function _(e){return Object(i.a)({url:"hrmSalaryMonthRecord/submitExamine",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function C(e){return Object(i.a)({url:"hrmSalaryMonthRecord/deleteSalary/"+e,method:"post"})}function S(){return Object(i.a)({url:"hrmSalarySlipTemplate/querySlipTemplateList",method:"post"})}function k(e){return Object(i.a)({url:"hrmSalarySlipTemplateOption/queryTemplateOptionByTemplateId/"+e,method:"post"})}function T(e){return Object(i.a)({url:"hrmSalarySlipTemplate/deleteSlipTemplate/"+e,method:"post"})}function x(e){return Object(i.a)({url:"hrmSalarySlipTemplate/addSlipTemplate",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function D(e){return Object(i.a)({url:"hrmSalarySlipRecord/querySlipEmployeePageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function F(e){return Object(i.a)({url:"hrmSalarySlipRecord/sendSalarySlip",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function O(e){return Object(i.a)({url:"hrmSalarySlipRecord/querySendRecordList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function j(e){return Object(i.a)({url:"hrmSalarySlipRecord/querySendDetailList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function I(e){return Object(i.a)({url:"hrmSalarySlipRecord/setSlipRemarks",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function L(e){return Object(i.a)({url:"hrmSalarySlipRecord/querySlipDetail/"+e,method:"post"})}function N(e){return Object(i.a)({url:"hrmSalarySlipRecord/deleteSendRecord/"+e,method:"post"})}function E(e){return Object(i.a)({url:"hrmSalaryArchives/querySalaryArchivesList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function R(e){return Object(i.a)({url:"hrmSalaryChangeTemplate/deleteChangeTemplate/"+e,method:"post"})}function A(){return Object(i.a)({url:"hrmSalaryChangeTemplate/queryChangeSalaryOption",method:"post"})}function V(){return Object(i.a)({url:"hrmSalaryChangeTemplate/queryChangeTemplateList",method:"post"})}function $(e){return Object(i.a)({url:"hrmSalaryChangeTemplate/setChangeTemplate",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function q(e){return Object(i.a)({url:"hrmSalaryArchives/setFixSalaryRecord",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function B(e){return Object(i.a)({url:"hrmSalaryArchives/setChangeSalaryRecord",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function M(e){return Object(i.a)({url:"hrmSalaryArchives/queryChangeOptionByTemplateId",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function U(){return Object(i.a)({url:"hrmSalaryArchives/queryBatchChangeOption",method:"post"})}function H(e){return Object(i.a)({url:"hrmSalaryArchives/batchChangeSalaryRecord",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function z(e){return Object(i.a)({url:"hrmSalaryArchives/querySalaryArchivesById/"+e,method:"post"})}function P(e){return Object(i.a)({url:"hrmSalaryArchives/queryChangeRecordList/"+e,method:"post"})}function W(e){return Object(i.a)({url:"hrmSalaryArchives/queryFixSalaryRecordById/"+e,method:"post"})}function Y(e){return Object(i.a)({url:"hrmSalaryArchives/queryChangeSalaryRecordById/"+e,method:"post"})}function G(e){return Object(i.a)({url:"hrmSalaryArchives/cancelChangeSalary/"+e,method:"post"})}function K(e){return Object(i.a)({url:"hrmSalaryArchives/deleteChangeSalary/"+e,method:"post"})}function Q(){return Object(i.a)({url:"hrmSalaryArchives/downLoadChangeTemplate",method:"post",responseType:"blob",headers:{"Content-Type":"application/json;charset=UTF-8"}})}function Z(){return Object(i.a)({url:"hrmSalaryArchives/downLoadFixTemplate",method:"post",responseType:"blob",headers:{"Content-Type":"application/json;charset=UTF-8"}})}function J(e){var t=new FormData;return r()(e).forEach(function(a){t.append(a,e[a])}),Object(i.a)({url:"hrmSalaryArchives/exportChangeSalaryRecord",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function X(e){var t=new FormData;return r()(e).forEach(function(a){t.append(a,e[a])}),Object(i.a)({url:"hrmSalaryArchives/exportFixSalaryRecord",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},"7ZQD":function(e,t,a){},Ak8d:function(e,t,a){"use strict";var n=a("KGik");a.n(n).a},DFpZ:function(e,t,a){},EewR:function(e,t,a){},ErUj:function(e,t,a){"use strict";var n=a("sLCo");a.n(n).a},GOs7:function(e,t,a){"use strict";var n=a("EewR");a.n(n).a},IzaY:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"c",function(){return i}),a.d(t,"e",function(){return l}),a.d(t,"a",function(){return o}),a.d(t,"d",function(){return s});var n=a("t3Un");function r(){return Object(n.a)({url:"hrmSalaryConfig/queryInItConfig",method:"post"})}function i(e){return Object(n.a)({url:"hrmSalaryConfig/saveInitConfig",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(n.a)({url:"/hrmSalaryConfig/updateInitStatus/"+e,method:"post"})}function o(){return Object(n.a)({url:"/hrmSalaryConfig/querySalaryConfig",method:"post"})}function s(e){return Object(n.a)({url:"hrmSalaryConfig/updateSalaryConfig",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},JKkP:function(e,t,a){"use strict";var n=a("NPZe");a.n(n).a},Jbo4:function(e,t,a){"use strict";var n={name:"WkBorderMenu",components:{},props:{list:Array,value:[String,Number],isSelect:{type:Boolean,default:!1}},data:function(){return{tabType:""}},computed:{},watch:{value:{handler:function(e){this.tabType=e},immediate:!0}},mounted:function(){},beforeDestroy:function(){},methods:{tabClick:function(e,t){this.$emit("input",e.name),this.$emit("select",e,t)}}},r=(a("fUY0"),a("KHd+")),i=Object(r.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("flexbox",{staticClass:"wk-border-menu",class:{"is-select":e.isSelect}},e._l(e.list,function(t,n){return a("div",{key:n,staticClass:"wk-border-menu__item",class:{"is-select":e.tabType==t.name},on:{click:function(a){e.tabClick(t,n)}}},[a("div",{staticClass:"label"},[e._v(e._s(t.label))]),e._v(" "),a("div",{staticClass:"num"},[e._v(e._s(t.num))])])}))},[],!1,null,"8dc40426",null);i.options.__file="index.vue";t.a=i.exports},KGik:function(e,t,a){},KY3v:function(e,t,a){},NEL7:function(e,t,a){"use strict";var n=a("uh96");a.n(n).a},NPZe:function(e,t,a){},PbZQ:function(e,t,a){"use strict";var n=a("KY3v");a.n(n).a},URGv:function(e,t,a){"use strict";var n=a("7Qib"),r=a("t2rG"),i={name:"WkFieldSet",components:{Draggable:a.n(r).a},props:{loading:Boolean,fields:Array},data:function(){return{show:!1,copyfields:[],search:""}},computed:{},watch:{fields:{handler:function(){this.copyfields=Object(n.w)(this.fields)},immediate:!0}},mounted:function(){},beforeDestroy:function(){},methods:{searchClick:function(){var e=this;this.fields=this.fields.map(function(t){var a=t.name.indexOf(e.search);if(-1!=a){t.left=t.name.substr(0,a),t.center=t.name.substr(a,e.search.length);var n=a+e.search.length;t.right=t.name.substr(n,t.name.length-n)}else t.left="",t.center="",t.right="";return t})},save:function(){this.copyfields.filter(function(e){return e.check}).length<2?this.$message.error("至少要显示两列"):this.$emit("save",this.copyfields)},reSet:function(){this.copyfields=Object(n.w)(this.fields)}}},l=(a("JKkP"),a("KHd+")),o=Object(l.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-popover",{attrs:{"popper-class":"no-padding-popover",placement:"bottom",width:"240",trigger:"click"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"wk-field-set"},[a("el-input",{staticClass:"wk-field-set__search",attrs:{placeholder:"搜索字段"},on:{input:e.searchClick},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),a("div",{staticClass:"wk-field-set__content"},[a("draggable",{attrs:{options:{dragClass:"sortable-drag",forceFallback:!1}},model:{value:e.copyfields,callback:function(t){e.copyfields=t},expression:"copyfields"}},e._l(e.copyfields,function(t,n){return a("div",{key:n,staticClass:"wk-field-set__content--item text-one-line"},[a("el-switch",{model:{value:t.check,callback:function(a){e.$set(t,"check",a)},expression:"item.check"}}),e._v(" "),t.center?a("span",[e._v(e._s(t.left)),a("span",{staticClass:"input-word"},[e._v(e._s(t.center))]),e._v(e._s(t.right))]):a("span",[e._v(e._s(t.name))])],1)}))],1),e._v(" "),a("div",{staticClass:"wk-field-set__ft"},[a("el-button",{attrs:{type:"text"},on:{click:e.reSet}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1),e._v(" "),e.$slots.reference?e._t("default",null,{slot:"reference"}):a("i",{staticClass:"wk wk-config table-set",attrs:{slot:"reference"},on:{click:function(t){e.show=!e.show}},slot:"reference"})],2)},[],!1,null,"36e82ac0",null);o.options.__file="index.vue";t.a=o.exports},UzdC:function(e,t,a){"use strict";var n={name:"WkDetailHeader",components:{},props:{iconClass:[String,Array],iconBgColor:{type:String,default:"#ECEEF2"},iconColor:{type:String,default:"#42526E"},detailName:String,detailValue:String,defaultBodyShow:{type:Boolean,default:!0},dropdownItems:Array,showEdit:{type:Boolean,default:!1},editButtonClass:{type:String,default:"xr-btn--primary"}},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{handleTypeClick:function(e){this.$emit("command-select",e)},editClick:function(){this.$emit("edit")}}},r=(a("nEBa"),a("KHd+")),i=Object(r.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("flexbox",{staticClass:"xr-detail-header"},[e.iconClass?a("div",{staticClass:"xr-detail-header__icon",style:{backgroundColor:e.iconBgColor}},[a("i",{class:e.iconClass,style:{color:e.iconColor}})]):e._e(),e._v(" "),a("div",{staticClass:"xr-detail-header__body"},[e._t("body"),e._v(" "),e.defaultBodyShow?[a("div",{staticClass:"detail-name"},[e._v(e._s(e.detailName))]),e._v(" "),a("div",{staticClass:"detail-value"},[e._v(e._s(e.detailValue))])]:e._e()],2),e._v(" "),a("div",{staticClass:"xr-detail-header__ft"},[e._t("ft"),e._v(" "),e.showEdit?a("el-button",{staticClass:"xr-detail-header--button",class:e.editButtonClass,staticStyle:{"margin-right":"10px"},attrs:{icon:"wk wk-circle-edit",type:"primary"},nativeOn:{click:function(t){return e.editClick(t)}}},[e._v("编辑")]):e._e(),e._v(" "),e.dropdownItems&&e.dropdownItems.length>0?a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleTypeClick}},[a("el-button",{staticClass:"xr-detail-header--more",attrs:{icon:"el-icon-more"}}),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.dropdownItems,function(t,n){return a("el-dropdown-item",{key:n,attrs:{icon:t.icon,command:t.command}},[e._v(e._s(t.label))])}))],1):e._e()],2)])},[],!1,null,"e893dc20",null);i.options.__file="index.vue";t.a=i.exports},W7L6:function(e,t,a){},bOsD:function(e,t,a){},eBbD:function(e,t,a){},fUY0:function(e,t,a){"use strict";var n=a("7ZQD");a.n(n).a},"ixM/":function(e,t,a){"use strict";a.d(t,"c",function(){return c}),a.d(t,"g",function(){return u}),a.d(t,"a",function(){return d}),a.d(t,"f",function(){return m}),a.d(t,"d",function(){return p}),a.d(t,"e",function(){return h}),a.d(t,"b",function(){return f});var n=a("GQeE"),r=a.n(n),i=a("7Qib"),l=a("a/5N"),o=a("cHj4"),s=a("D0zU");var c={fields:[{name:"学历",field:"education",formType:"select",setting:[{label:"小学",value:1},{label:"初中",value:2},{label:"中专",value:3},{label:"中职",value:4},{label:"中技",value:5},{label:"高中",value:6},{label:"大专",value:7},{label:"本科",value:8},{label:"硕士",value:9},{label:"博士",value:10},{label:"博士后",value:11},{label:"其他",value:12}]},{name:"毕业院校",field:"graduateSchool",formType:"text",setting:[]},{name:"专业",field:"major",formType:"text",setting:[]},{name:"入学时间",field:"admissionTime",formType:"date",setting:[]},{name:"毕业时间",field:"graduationTime",formType:"date",setting:[]},{name:"教学方式",field:"teachingMethods",formType:"select",setting:[{label:"全日制",value:1},{label:"成人教育",value:2},{label:"远程教育",value:3},{label:"自学考试",value:4},{label:"其他",value:5}]},{name:"是否第一学历",field:"isFirstDegree",formType:"radio",setting:[{label:"否",value:0},{label:"是",value:1}]}],rules:{education:[{required:!0,message:"请选择",trigger:["blur","change"]}],graduateSchool:[{required:!0,message:"请输入",trigger:["blur","change"]}],major:[{required:!0,message:"请输入",trigger:["blur","change"]}],isFirstDegree:[{required:!0,message:"请选择",trigger:["blur","change"]}]},educationValue:{1:"小学",2:"初中",3:"中专",4:"中职",5:"中技",6:"高中",7:"大专",8:"本科",9:"硕士",10:"博士",11:"博士后",12:"其他"},teachingMethodsValue:{1:"全日制",2:"成人教育",3:"远程教育",4:"自学考试",5:"其他"},isFirstDegreeValue:{1:"是",0:"否"}},u={fields:[{name:"工作单位",field:"workUnit",formType:"text",setting:[]},{name:"职务",field:"post",formType:"text",setting:[]},{name:"工作开始时间",field:"workStartTime",formType:"date",setting:[]},{name:"工作结束时间",field:"workEndTime",formType:"date",setting:[]},{name:"离职原因",field:"leavingReason",formType:"text",setting:[]},{name:"证明人",field:"witness",formType:"text",setting:[]},{name:"证明人电话",field:"witnessPhone",formType:"mobile",setting:[]},{name:"工作备注",field:"workRemarks",formType:"text",setting:[]}],rules:{workUnit:[{required:!0,message:"请输入",trigger:["blur","change"]}],post:[{required:!0,message:"请输入",trigger:["blur","change"]}],witnessPhone:[{validator:function(e,t,a){Object(l.b)(t)||Object(i.y)(t)?a():a(new Error("手机格式有误"))},trigger:["blur","change"]}]}},d={fields:[{name:"证书名称",field:"certificateName",formType:"text",setting:[]},{name:"证书级别",field:"certificateLevel",formType:"text",setting:[]},{name:"证书/证件编号",field:"certificateNum",formType:"text",setting:[]},{name:"有效期起始日期",field:"startTime",formType:"date",setting:[]},{name:"有效期到期日",field:"endTime",formType:"date",setting:[]},{name:"发证机构",field:"issuingAuthority",formType:"text",setting:[]},{name:"发证日期",field:"issuingTime",formType:"date",setting:[]},{name:"证件备注",field:"remarks",formType:"text",setting:[]}],rules:{certificateName:[{required:!0,message:"请输入",trigger:["blur","change"]}]}},m={fields:[{name:"培训课程",field:"trainingCourse",formType:"text",setting:[]},{name:"培训机构名称",field:"trainingOrganName",formType:"text",setting:[]},{name:"培训开始时间",field:"startTime",formType:"date",setting:[]},{name:"培训结束时间",field:"endTime",formType:"date",setting:[]},{name:"培训时长",field:"trainingDuration",formType:"number",setting:[]},{name:"培训成绩",field:"trainingResults",formType:"text",setting:[]},{name:"培训证书名称",field:"trainingCertificateName",formType:"text",setting:[]},{name:"培训备注",field:"remarks",formType:"textarea",setting:[]}],rules:{trainingCourse:[{required:!0,message:"请输入",trigger:["blur","change"]}]}},p={sexValue:{1:"男",2:"女"},birthdayTypeValue:{1:"阳历",2:"农历"},idTypeValue:{1:"身份证",2:"港澳通行证",3:"台湾通行证",4:"护照",5:"其他"},employmentFormsValue:{1:"正式",2:"非正式"},probationValue:{0:"无试用期",1:"1个月",2:"2个月",3:"3个月",4:"4个月",5:"5个月",6:"6个月"},statusValue:{1:"正式",2:"试用",3:"实习",4:"兼职",5:"劳务",6:"顾问",7:"返聘",8:"外包",11:"在职",12:"全职",13:"待入职",14:"待离职",15:"已离职"},validStatusValue:{1:"正式",2:"试用",3:"实习",4:"兼职",5:"劳务",6:"顾问",7:"返聘",8:"外包"},getValueList:function(e){return r()(e).map(function(t){return{label:e[t],value:parseInt(t)}})},sexSetting:[{label:"男",value:1},{label:"女",value:2}],idTypeSetting:[{label:"身份证",value:1},{label:"港澳通行证",value:2},{label:"台湾通行证",value:3},{label:"护照",value:4},{label:"其他",value:5}],employmentFormsSetting:[{label:"正式",value:1},{label:"非正式",value:2}],probationSetting:[{label:"无试用期",value:0},{label:"1个月",value:1},{label:"2个月",value:2},{label:"3个月",value:3},{label:"4个月",value:4},{label:"5个月",value:5},{label:"6个月",value:6}],statusSetting:[{label:"实习",value:3},{label:"兼职",value:4},{label:"劳务",value:5},{label:"顾问",value:6},{label:"返聘",value:7},{label:"外包",value:8}]},h={fields:[{name:"部门",field:"newDept",formType:"structure",props:{dataType:"hrm"},request:s.e,setting:[]},{name:"岗位",field:"newPost",formType:"text",setting:[]},{name:"直属上级",field:"newParentId",formType:"user",props:{label:"employeeName",value:"employeeId"},request:o.i,setting:[]},{name:"计划转正日期",field:"becomeTime",formType:"text",disabled:!0,setting:[]},{name:"实际转正日期",field:"effectTime",formType:"date",setting:[]},{name:"备注",field:"remarks",formType:"textarea",setting:[]}],rules:{effectTime:[{required:!0,message:"请选择",trigger:["blur","change"]}]}};var f={fieldsFunc:function(e,t){var a=[{label:"调岗",value:5},{label:"晋升",value:6},{label:"降级",value:7}];3!=t&&4!=t||a.push({label:"转为全职员工",value:8});var n=[{name:"异动类型",field:"changeType",formType:"select",setting:a},{name:"异动原因",field:"changeReason",formType:"select",setting:7==e?[{label:"违规违纪",value:4},{label:"绩效不达标",value:5},{label:"个人身体原因",value:6},{label:"不适应当前岗位",value:7}]:[{label:"组织架构调整",value:1},{label:"个人申请",value:2},{label:"工作安排",value:3}]}];return 8==e&&(n=n.concat([{name:"入职日期",field:"entryTime",formType:"date",disabled:!0,setting:[]},{name:"试用期",field:"probation",formType:"select",setting:[{label:"无试用期",value:0},{label:"1个月",value:1},{label:"2个月",value:2},{label:"3个月",value:3},{label:"4个月",value:4},{label:"5个月",value:5},{label:"6个月",value:6}]}])),n.concat([{name:"原部门",field:"oldDept",formType:"structure",disabled:!0,props:{dataType:"hrm"},request:s.e,setting:[]},{name:"变更为",field:"newDept",formType:"structure",props:{dataType:"hrm"},request:s.e,setting:[]},{name:"原岗位",field:"oldPost",formType:"text",disabled:!0,setting:[]},{name:"变更为",field:"newPost",formType:"text",setting:[]},{name:"原岗位职级",field:"oldPostLevel",disabled:!0,formType:"text",setting:[]},{name:"变更为",field:"newPostLevel",formType:"text",setting:[]},{name:"原工作地点",field:"oldWorkAddress",formType:"text",disabled:!0,setting:[]},{name:"变更为",field:"newWorkAddress",formType:"text",setting:[]},{name:"生效日期",field:"effectTime",formType:"date",setting:[]},{name:"备注",field:"remarks",formType:"textarea",setting:[]}])},rules:{effectTime:[{required:!0,message:"请选择",trigger:["blur","change"]}]}}},lMh0:function(e,t,a){"use strict";var n={name:"WkBaseDetailSection",components:{},props:{list:Array,gutter:{type:Number,default:0},dropdownItems:Array},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{handleTypeClick:function(e){this.$emit("command-select",e)}}},r=(a("NEL7"),a("KHd+")),i=Object(r.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("flexbox",{staticClass:"wk-base-detail-section",attrs:{gutter:e.gutter,align:"stretch",wrap:"wrap"}},[e._l(e.list,function(t,n){return a("flexbox-item",{key:n,attrs:{span:t.span?t.span:.5}},[a("flexbox",{staticClass:"wk-base-detail-section__item",attrs:{align:"stretch"}},[a("div",{staticClass:"item-name"},[e._v(e._s(t.label))]),e._v(" "),a("div",{staticClass:"item-value"},[e._v(e._s(t.value))])])],1)}),e._v(" "),e.dropdownItems&&e.dropdownItems.length>0?a("el-dropdown",{staticClass:"wk-base-detail-section__more",attrs:{trigger:"hover"},on:{command:e.handleTypeClick}},[a("i",{staticClass:"el-icon-more",staticStyle:{cursor:"pointer"}}),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.dropdownItems,function(t,n){return a("el-dropdown-item",{key:n,attrs:{icon:t.icon,command:t.command}},[e._v(e._s(t.label))])}))],1):e._e(),e._v(" "),e._t("default")],2)},[],!1,null,"d0780fa2",null);i.options.__file="WkBaseDetailSection.vue";t.a=i.exports},nEBa:function(e,t,a){"use strict";var n=a("W7L6");a.n(n).a},oNq2:function(e,t,a){"use strict";var n=a("bOsD");a.n(n).a},qGFA:function(e,t,a){"use strict";var n=a("DFpZ");a.n(n).a},rhOq:function(e,t,a){},sLCo:function(e,t,a){},uZHG:function(e,t,a){"use strict";a.r(t);var n=a("GQeE"),r=a.n(n),i=a("QbLZ"),l=a.n(i),o=a("cHj4"),s=a("+hK9"),c=a("D0zU"),u=a("9GgJ"),d=a("jpO5"),m=a("kBEL"),p=a("URGv"),h=a("Ew9n"),f=a("UzdC"),g=a("EP+0"),v=a("lMh0"),b={name:"SalaryArchivesInfo",components:{CreateSections:g.a,WkBaseDetailSection:v.a},props:{id:[String,Number]},data:function(){return{loading:!1,total:0,list:[]}},computed:{},watch:{id:{handler:function(){this.getDetail()},immediate:!0}},mounted:function(){},activated:function(){},deactivated:function(){},methods:{getDetail:function(){var e=this;this.loading=!0,Object(s.i)(this.id).then(function(t){var a=t.data||{},n=a.salaryOptions||[];n.forEach(function(e){e.label=e.name}),e.list=n,e.total=a.total||0,e.loading=!1}).catch(function(){e.loading=!1})}}},y=(a("wey+"),a("KHd+")),w=Object(y.a)(b,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("create-sections",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"salary-archives-info",attrs:{title:"薪资信息"}},[a("el-tooltip",{attrs:{slot:"header",content:"薪资包含此员工所关联工资表的可定薪项，数据以定薪、调薪的最新数据为准",effect:"dark",placement:"top"},slot:"header"},[a("i",{staticClass:"wk wk-help wk-help-tips"})]),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"content__header"},[e._v("\n      合计："),a("span",[e._v(e._s(e.total))])]),e._v(" "),a("wk-base-detail-section",{attrs:{list:e.list}})],1)],1)},[],!1,null,"3b5e6676",null);w.options.__file="Info.vue";var _=w.exports,C=a("4d7F"),S=a.n(C),k=a("IzaY"),T=a("gVZb"),x=a("ixM/"),D=a("7Qib");var F={changeReasonValue:{0:"入职定薪",1:"入职核定",2:"转正",3:"晋升",4:"调动",5:"年中调薪",6:"年度调薪",7:"特别调薪",8:"其他"},statusValue:{0:"未生效",1:"已生效",2:"已取消"},typeValue:{1:"定薪",2:"调薪"},getValueList:function(e){return r()(e).map(function(t){return{label:e[t],value:parseInt(t)}})}},O=a("a/5N"),j={name:"ChangeSalaryAdd",components:{XrCreate:T.a},filters:{getReasonName:function(e){return F.changeReasonValue[e]}},mixins:[],props:{recordId:[String,Number],id:[String,Number]},data:function(){var e=this;return{loading:!1,initDataConfig:null,pickerOptions:{disabledDate:function(t){return!(!e.initDataConfig||!e.initDataConfig.lastSalaryYear)&&(t.getFullYear()==e.initDataConfig.lastSalaryYear?t.getMonth()+1<e.initDataConfig.lastSalaryMonth:t.getFullYear()<e.initDataConfig.lastSalaryYear)}},statusObj:{0:"未生效",1:"已生效",2:"已取消"},statusClass:{0:"is-cancel",1:"is-success",2:"is-cancel"},templateList:[],userInfo:{},changeReasonList:[],ruleForm:{templateId:"",remarks:"",value:[],proValue:[],changeReason:""},openEdit:!1,detail:{}}},computed:{title:function(){return this.showDetail?"调薪记录":"单个调薪"},showDetail:function(){return!!this.recordId&&!this.openEdit},rules:function(){return this.showDetail?{}:{templateId:[{required:!0,message:"调薪模板不能为空",trigger:"blur"}],value:[{required:!0,message:"调薪细则不能为空",trigger:"blur"}],changeReason:[{required:!0,message:"调薪原因不能为空",trigger:"blur"}],enableDate:[{required:!0,message:"调薪生效日期不能为空",trigger:"blur"}]}},moreTypes:function(){var e=[];return this.detail.isDelete&&e.push({name:"删除",icon:"wk wk-delete",command:"delete"}),this.detail.isCancel&&e.push({name:"取消",icon:"wk wk-icon-reply",command:"cancel"}),e},statusName:function(){return x.d.statusValue[this.userInfo.status]||"--"}},watch:{},created:function(){this.changeReasonList=F.getValueList(F.changeReasonValue),this.ruleForm.changeReason=this.changeReasonList[0].value,this.getEmployeeDetail(),this.showDetail?this.getDetail():(this.getTemplateList(),this.getConfigList())},mounted:function(){},beforeDestroy:function(){},methods:{getDetail:function(){var e=this;this.loading=!0,Object(s.k)(this.recordId).then(function(t){e.loading=!1;var a=t.data||{};e.detail=a,e.detail=Object(D.w)(a),e.ruleForm=e.getEditData(a)}).catch(function(){e.loading=!1})},getEditData:function(e){var t={changeReason:e.changeReason,enableDate:e.enableDate,remarks:e.remarks},a=[],n=e.proSalary||{},r=n.newSalary||[];(n.oldSalary||[]).forEach(function(e,t){a.push({code:e.code,name:e.name,beforeValue:e.value,afterValue:r[t].value})}),t.proValue=a;var i=[],l=e.salary||{},o=l.newSalary||[];return(l.oldSalary||[]).forEach(function(e,t){i.push({code:e.code,name:e.name,beforeValue:e.value,afterValue:o[t].value})}),t.value=i,t},getConfigList:function(){var e=this;this.loading=!0,Object(k.b)().then(function(t){e.initDataConfig=t.data.otherInitConfig,e.loading=!1}).catch(function(){e.loading=!1})},getEmployeeDetail:function(){var e=this;this.loading=!0,Object(o.D)(this.id).then(function(t){e.loading=!1,e.userInfo=t.data||{}}).catch(function(){e.loading=!1})},getTemplateList:function(){var e=this;this.loading=!0,Object(s.s)().then(function(t){if(e.templateList=t.data||[],e.templateList.length>0){var a=e.templateList[0];e.ruleForm.templateId=a.id,e.getChangeOptionValue(a.id)}e.loading=!1}).catch(function(){e.loading=!1})},getChangeOptionValue:function(e){var t=this;this.loading=!0,Object(s.j)({employeeId:this.id,templateId:e}).then(function(e){var a=e.data||{};t.ruleForm.proValue=t.getShowOption(a.proSalary||[]),t.ruleForm.value=t.getShowOption(a.salary||[]),t.loading=!1}).catch(function(){t.loading=!1})},getShowOption:function(e){var t=[];return e.forEach(function(e){t.push({code:e.code,name:e.name,beforeValue:Object(O.b)(e.value)?0:e.value,afterValue:Object(O.b)(e.value)?0:e.value})}),t},templateChange:function(){var e=this,t=this.templateList.find(function(t){return t.id===e.ruleForm.templateId});this.getChangeOptionValue(t.id)},saveClick:function(){var e=this;this.$refs.changeAddForm.validate(function(t){if(!t)return!1;e.loading=!0;var a=e.getOptionParams(e.ruleForm.proValue),n={newSalary:a.newSalary,oldSalary:a.oldSalary},r=a.beforeSum,i=a.afterSum,l=e.getOptionParams(e.ruleForm.value),o={newSalary:l.newSalary,oldSalary:l.oldSalary},c=l.beforeSum,u=l.afterSum,d={employeeId:e.id,remarks:e.ruleForm.remarks,changeReason:e.ruleForm.changeReason,enableDate:e.ruleForm.enableDate,proSalary:n,proBeforeSum:r,proAfterSum:i,salary:o,beforeSum:c,afterSum:u};e.recordId&&(d.id=e.recordId),Object(s.p)(d).then(function(t){e.$message.success("操作成功"),e.$emit("change"),e.loading=!1,e.$emit("close")}).catch(function(){e.loading=!1})})},getOptionParams:function(e){var t=[],a=[],n=0,r=0;return e.forEach(function(e){a.push({code:e.code,name:e.name,value:e.beforeValue}),n=Object(D.i)(n,e.beforeValue),t.push({code:e.code,name:e.name,value:e.afterValue}),r=Object(D.i)(r,e.afterValue)}),{newSalary:t,oldSalary:a,beforeSum:n,afterSum:r}},close:function(){var e=this;this.showDetail?this.$emit("close"):this.dialogVerify().then(function(){e.$emit("close")})},dialogVerify:function(){var e=this;return new S.a(function(t){e.$confirm("确定离开？正在编辑的内容将会丢失","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t()}).catch(function(){})})},closeClick:function(){var e=this;this.openEdit?this.dialogVerify().then(function(){e.ruleForm=e.getEditData(Object(D.w)(e.detail)),e.openEdit=!1}):this.close()},handleClick:function(e){var t=this;"edit"===e?this.openEdit=!0:"delete"===e?this.$confirm("确定删除此次调薪？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.loading=!0,Object(s.d)(t.recordId).then(function(e){t.loading=!1,t.$message.success("操作成功"),t.$emit("change"),t.loading=!1,t.$emit("close")}).catch(function(){t.loading=!1})}).catch(function(){t.$message({type:"info",message:"已取消操作"})}):"cancel"===e&&this.$confirm("确定取消此次调薪？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.loading=!0,Object(s.b)(t.recordId).then(function(e){t.loading=!1,t.$message.success("操作成功"),t.$emit("change"),t.loading=!1,t.$emit("close")}).catch(function(){t.loading=!1})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})}}},I=(a("+Dty"),Object(y.a)(j,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("xr-create",{attrs:{loading:e.loading,title:e.title,"show-cancel":!e.showDetail,"show-confirm":!e.showDetail},on:{close:e.closeClick,save:e.saveClick}},[a("div",{staticClass:"create-title",attrs:{slot:"title"},slot:"title"},[a("span",[e._v(e._s(e.title))]),e._v(" "),a("span",{staticClass:"mark",class:e.statusClass[e.detail.status]},[e._v(e._s(e.statusObj[e.detail.status]))])]),e._v(" "),a("div",{staticClass:"content"},[a("flexbox",{staticClass:"content__header"},[a("div",{staticClass:"mark"}),e._v(" "),a("span",{staticClass:"title"},[e._v(e._s(e.userInfo.employeeName||"--"))]),e._v(" "),a("span",{staticClass:"des"},[e._v(e._s(e.userInfo.deptName||"--"))]),e._v(" "),a("span",{staticClass:"des"},[e._v(e._s(e.userInfo.post||"--"))]),e._v(" "),a("span",{staticClass:"des"},[e._v(e._s(e.statusName))]),e._v(" "),e.showDetail&&!e.openEdit?a("div",{staticClass:"handle"},[e.detail.isUpdate?a("el-button",{staticClass:"head-handle-button xr-btn--green",attrs:{icon:"wk wk-circle-edit",type:"primary"},nativeOn:{click:function(t){e.handleClick("edit")}}},[e._v("编辑")]):e._e(),e._v(" "),e.moreTypes.length>0?a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleClick}},[a("el-button",{attrs:{icon:"el-icon-more"}}),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.moreTypes,function(t,n){return a("el-dropdown-item",{key:n,attrs:{icon:t.icon,command:t.command}},[e._v(e._s(t.name))])}))],1):e._e()],1):e._e()]),e._v(" "),a("el-form",{ref:"changeAddForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px","label-position":"top"}},[e.showDetail||e.openEdit?e._e():a("el-form-item",{attrs:{label:"调薪模板",prop:"templateId"}},[a("el-select",{staticClass:"item-width",on:{change:e.templateChange},model:{value:e.ruleForm.templateId,callback:function(t){e.$set(e.ruleForm,"templateId",t)},expression:"ruleForm.templateId"}},e._l(e.templateList,function(e){return a("el-option",{key:e.id,attrs:{label:e.templateName,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"调薪细则",prop:"value"}},[e.userInfo&&2==e.userInfo.status?[a("div",[e._v("试用期工资")]),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-bottom":"40px"},attrs:{data:e.ruleForm.proValue,height:"300","show-summary":""}},[a("el-table-column",{attrs:{prop:"name",label:"调薪项",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"beforeValue",label:"调薪前"}}),e._v(" "),a("el-table-column",{attrs:{prop:"afterValue",label:"调薪后"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.showDetail?[e._v("\n                  "+e._s(t.row.afterValue)+"\n                ")]:a("el-input-number",{attrs:{precision:2,min:0,max:9999999.99,controls:!1},model:{value:t.row.afterValue,callback:function(a){e.$set(t.row,"afterValue",a)},expression:"scope.row.afterValue"}})]}}])})],1)]:e._e(),e._v(" "),a("div",[e._v("转正后工资")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.ruleForm.value,height:"300","show-summary":""}},[a("el-table-column",{attrs:{prop:"name",label:"调薪项",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"beforeValue",label:"调薪前"}}),e._v(" "),a("el-table-column",{attrs:{prop:"afterValue",label:"调薪后"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.showDetail?[e._v("\n                "+e._s(t.row.afterValue)+"\n              ")]:a("el-input-number",{attrs:{precision:2,min:0,max:9999999.99,controls:!1},model:{value:t.row.afterValue,callback:function(a){e.$set(t.row,"afterValue",a)},expression:"scope.row.afterValue"}})]}}])})],1)],2),e._v(" "),a("flexbox",{attrs:{align:"stretch"}},[a("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"调薪原因",prop:"changeReason"}},[e.showDetail?[e._v("\n            "+e._s(e._f("getReasonName")(e.ruleForm.changeReason))+"\n          ")]:a("el-select",{staticStyle:{width:"100%"},model:{value:e.ruleForm.changeReason,callback:function(t){e.$set(e.ruleForm,"changeReason",t)},expression:"ruleForm.changeReason"}},e._l(e.changeReasonList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],2),e._v(" "),a("el-form-item",{staticStyle:{flex:"1","margin-left":"80px"},attrs:{label:"调薪生效日期",prop:"enableDate"}},[e.showDetail?[e._v("\n            "+e._s(e.ruleForm.enableDate)+"\n          ")]:a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"picker-options":e.pickerOptions,type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.ruleForm.enableDate,callback:function(t){e.$set(e.ruleForm,"enableDate",t)},expression:"ruleForm.enableDate"}})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[e.showDetail?[e._v("\n          "+e._s(e.ruleForm.remarks)+"\n        ")]:a("el-input",{attrs:{rows:3,autosize:{minRows:3},maxlength:800,type:"textarea",resize:"none"},model:{value:e.ruleForm.remarks,callback:function(t){e.$set(e.ruleForm,"remarks",t)},expression:"ruleForm.remarks"}})],2)],1)],1)])},[],!1,null,"21e85db7",null));I.options.__file="ChangeAdd.vue";var L=I.exports,N={name:"FixSalaryAdd",components:{XrCreate:T.a},mixins:[],props:{recordId:[String,Number],id:[String,Number]},data:function(){return{loading:!1,templateList:[],userInfo:{},ruleForm:{templateId:"",remarks:"",value:[]},openEdit:!1,detail:{}}},computed:{title:function(){return this.showDetail?"定薪记录":"单个定薪"},showDetail:function(){return!!this.recordId&&!this.openEdit},rules:function(){return this.showDetail?{}:{templateId:[{required:!0,message:"定薪模板不能为空",trigger:"blur"}],value:[{required:!0,message:"定薪细则不能为空",trigger:"blur"}]}},statusName:function(){return x.d.statusValue[this.userInfo.status]||"--"}},watch:{},created:function(){this.getEmployeeDetail(),this.showDetail?this.getDetail():this.getTemplateList()},mounted:function(){},beforeDestroy:function(){},methods:{getDetail:function(){var e=this;this.loading=!0,Object(s.l)(this.recordId).then(function(t){e.loading=!1;var a=t.data||{};e.detail=Object(D.w)(a),e.ruleForm=e.getEditData(a)}).catch(function(){e.loading=!1})},getEditData:function(e){var t={};(e.proSalary||[]).forEach(function(e){t[e.code]=e.value});var a=[];return(e.salary||[]).forEach(function(e){a.push({code:e.code,name:e.name,probationValue:t[e.code]||0,permanentValue:e.value})}),{remarks:e.remarks,value:a}},getEmployeeDetail:function(){var e=this;this.loading=!0,Object(o.D)(this.id).then(function(t){e.loading=!1,e.userInfo=t.data||{}}).catch(function(){e.loading=!1})},getTemplateList:function(){var e=this;this.loading=!0,Object(s.s)().then(function(t){if(e.templateList=t.data||[],e.templateList.length>0){var a=e.templateList[0];e.ruleForm.templateId=a.id,e.getTemplateOption(a.value)}e.loading=!1}).catch(function(){e.loading=!1})},getTemplateOption:function(e){var t=[];e.forEach(function(e){t.push(l()({},e,{probationValue:0,permanentValue:0}))}),this.ruleForm.value=t},templateChange:function(){var e=this,t=this.templateList.find(function(t){return t.id===e.ruleForm.templateId});this.getTemplateOption(t.value)},saveClick:function(){var e=this;this.$refs.addForm.validate(function(t){if(!t)return!1;e.loading=!0;var a=[],n=0,r=[],i=0;e.ruleForm.value.forEach(function(e){a.push({code:e.code,name:e.name,value:e.probationValue}),n=Object(D.i)(n,e.probationValue),r.push({code:e.code,name:e.name,value:e.permanentValue}),i=Object(D.i)(i,e.permanentValue)});var l={employeeId:e.id,remarks:e.ruleForm.remarks,proSalary:a,proSum:n,salary:r,sum:i};e.recordId&&(l.id=e.recordId),Object(s.q)(l).then(function(t){e.$message.success("操作成功"),e.$emit("change"),e.loading=!1,e.$emit("close")}).catch(function(){e.loading=!1})})},close:function(){var e=this;this.showDetail?this.$emit("close"):this.dialogVerify().then(function(){e.$emit("close")})},dialogVerify:function(){var e=this;return new S.a(function(t){e.$confirm("确定离开？正在编辑的内容将会丢失","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t()}).catch(function(){})})},closeClick:function(){var e=this;this.openEdit?this.dialogVerify().then(function(){e.ruleForm=e.getEditData(Object(D.w)(e.detail)),e.openEdit=!1}):this.close()},handleClick:function(e){"edit"===e&&(this.openEdit=!0)}}},E=(a("PbZQ"),Object(y.a)(N,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("xr-create",{attrs:{loading:e.loading,title:e.title,"show-cancel":!e.showDetail,"show-confirm":!e.showDetail},on:{close:e.closeClick,save:e.saveClick}},[a("div",{staticClass:"content"},[a("flexbox",{staticClass:"content__header"},[a("div",{staticClass:"mark"}),e._v(" "),a("span",{staticClass:"title"},[e._v(e._s(e.userInfo.employeeName||"--"))]),e._v(" "),a("span",{staticClass:"des"},[e._v(e._s(e.userInfo.deptName||"--"))]),e._v(" "),a("span",{staticClass:"des"},[e._v(e._s(e.userInfo.post||"--"))]),e._v(" "),a("span",{staticClass:"des"},[e._v(e._s(e.statusName))]),e._v(" "),e.showDetail&&!e.openEdit?a("div",{staticClass:"handle"},[e.detail.isUpdate?a("el-button",{staticClass:"head-handle-button xr-btn--green",attrs:{icon:"wk wk-circle-edit",type:"primary"},nativeOn:{click:function(t){e.handleClick("edit")}}},[e._v("编辑")]):e._e()],1):e._e()]),e._v(" "),a("el-form",{ref:"addForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px","label-position":"top"}},[e.showDetail||e.openEdit?e._e():a("el-form-item",{attrs:{label:"定薪模板",prop:"templateId"}},[a("el-select",{on:{change:e.templateChange},model:{value:e.ruleForm.templateId,callback:function(t){e.$set(e.ruleForm,"templateId",t)},expression:"ruleForm.templateId"}},e._l(e.templateList,function(e){return a("el-option",{key:e.id,attrs:{label:e.templateName,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"定薪细则",prop:"value"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.ruleForm.value,height:"300","show-summary":""}},[a("el-table-column",{attrs:{prop:"name",label:"定薪项",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"probationValue",label:"试用期工资"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.showDetail?[e._v("\n                "+e._s(t.row.probationValue)+"\n              ")]:[e.userInfo&&2==e.userInfo.status?a("el-input-number",{attrs:{precision:2,min:0,max:9999999.99,controls:!1},model:{value:t.row.probationValue,callback:function(a){e.$set(t.row,"probationValue",a)},expression:"scope.row.probationValue"}}):[e._v(e._s(t.row.probationValue))]]]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"permanentValue",label:"转正后工资"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.showDetail?[e._v("\n                "+e._s(t.row.permanentValue)+"\n              ")]:a("el-input-number",{attrs:{precision:2,min:0,max:9999999.99,controls:!1},model:{value:t.row.permanentValue,callback:function(a){e.$set(t.row,"permanentValue",a)},expression:"scope.row.permanentValue"}})]}}])})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[e.showDetail?[e._v("\n          "+e._s(e.ruleForm.remarks)+"\n        ")]:a("el-input",{attrs:{rows:3,autosize:{minRows:3},maxlength:800,type:"textarea",resize:"none"},model:{value:e.ruleForm.remarks,callback:function(t){e.$set(e.ruleForm,"remarks",t)},expression:"ruleForm.remarks"}})],2)],1)],1)])},[],!1,null,"3ae35ab4",null));E.options.__file="FixAdd.vue";var R=E.exports,A={name:"SalaryArchivesRecords",components:{CreateSections:g.a,ChangeSalaryAdd:L,FixSalaryAdd:R},props:{id:[String,Number]},data:function(){return{loading:!1,total:0,recordId:0,list:[],fieldList:[{field:"recordTypeName",name:"调整记录",width:80},{field:"changeReasonName",name:"调整原因",width:80},{field:"enableDate",name:"生效日期",width:80},{field:"statusName",name:"生效状态",width:80},{field:"beforeTotal",name:"调整前工资",width:80},{field:"afterTotal",name:"调整后工资",width:80}],fixAddShow:!1,changeAddShow:!1}},computed:{},watch:{id:{handler:function(){this.getDetail()},immediate:!0}},mounted:function(){},activated:function(){},deactivated:function(){},methods:{getDetail:function(){var e=this;this.loading=!0,Object(s.n)(this.id).then(function(t){var a=t.data||[];a.forEach(function(e){e.recordTypeName=F.typeValue[e.recordType]+"记录",e.statusName=F.statusValue[e.status],e.changeReasonName=F.changeReasonValue[e.changeReason]}),e.list=a,e.loading=!1}).catch(function(){e.loading=!1})},cellClassName:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;return"recordTypeName"==t.property?"can-visit--underline":""},handleRowClick:function(e,t,a){"recordTypeName"==t.property&&(this.recordId=e.id,2==e.recordType?this.changeAddShow=!0:this.fixAddShow=!0)}}},V=(a("oNq2"),Object(y.a)(A,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("create-sections",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"salary-archives-records",attrs:{title:"调薪记录"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,"cell-class-name":e.cellClassName,height:"400"},on:{"row-click":e.handleRowClick}},[e._l(e.fieldList,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.field,label:e.name,"show-overflow-tooltip":""}})}),e._v(" "),a("el-table-column")],2),e._v(" "),e.changeAddShow?a("change-salary-add",{attrs:{id:e.id,"record-id":e.recordId},on:{change:e.getDetail,close:function(t){e.changeAddShow=!1}}}):e._e(),e._v(" "),e.fixAddShow?a("fix-salary-add",{attrs:{id:e.id,"record-id":e.recordId},on:{change:e.getDetail,close:function(t){e.fixAddShow=!1}}}):e._e()],1)},[],!1,null,"16dce292",null));V.options.__file="Records.vue";var $=V.exports,q=a("L2JU"),B={name:"SalaryArchivesDetail",components:{WkDetailHeader:f.a,SlideView:h.a,SalaryArchivesInfo:_,SalaryArchivesRecords:$},mixins:[],props:{id:[String,Number],listenerIDs:{type:Array,default:function(){return["crm-main-container"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return["el-table__body"]}}},data:function(){return{loading:!1,detailData:null,tabNames:[{label:"薪资信息",name:"SalaryArchivesInfo"},{label:"调薪记录",name:"SalaryArchivesRecords"}],tabCurrentName:"SalaryArchivesInfo"}},provide:function(){return{editAuth:this.editAuth}},computed:l()({},Object(q.b)(["hrm"])),watch:{id:function(e){this.getDetail()}},mounted:function(){},methods:{getDetail:function(){var e=this;this.loading=!0,Object(o.D)(this.id).then(function(t){e.loading=!1;var a=t.data||{};a.entryTime=Object(D.C)(a.entryTime),e.detailData=a}).catch(function(){e.loading=!1})},getEmployeeStatusName:function(e){return e?x.d.statusValue[parseInt(e)]:""},hideView:function(){this.$emit("close")},relativeHandle:function(e){this.$emit("handle",e)}}},M=(a("qGFA"),Object(y.a)(B,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("slide-view",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"d-view",attrs:{"listener-ids":e.listenerIDs,"no-listener-ids":e.noListenerIDs,"no-listener-class":e.noListenerClass,"body-style":{padding:0,height:"100%",background:"white"}},on:{afterEnter:e.getDetail,close:e.hideView}},[e.detailData?a("flexbox",{staticClass:"side-detail-main",staticStyle:{padding:"0 15px"},attrs:{direction:"column",align:"stretch"}},[a("wk-detail-header",[a("div",{staticClass:"employee-header",attrs:{slot:"body"},slot:"body"},[a("div",{staticClass:"employee-header__top"},[a("span",{staticClass:"name"},[e._v(e._s(e.detailData.employeeName))]),e._v(" "),a("span",{staticClass:"post"},[e._v(e._s(e.detailData.post))])]),e._v(" "),a("div",{staticClass:"employee-header__bottom"},[1===e.detailData.sex||2===e.detailData.sex?a("el-tag",{staticClass:"xr-sex-tag",class:{1:"is-man",2:"is-woman"}[e.detailData.sex],attrs:{"disable-transitions":"",size:"mini"}},[a("i",{class:{1:"wk wk-man",2:"wk wk-woman"}[e.detailData.sex]})]):e._e(),e._v(" "),a("el-tooltip",{attrs:{content:"工号："+(e.detailData.jobNumber||"--"),effect:"dark",placement:"top"}},[a("el-tag",{staticClass:"xr-tag",attrs:{"disable-transitions":"",color:"#ECEEF2",size:"mini"}},[a("i",{staticClass:"wk wk-icon-work-card"}),e._v(e._s(e.detailData.jobNumber||"--")+"\n            ")])],1),e._v(" "),a("el-tooltip",{attrs:{content:"部门："+(e.detailData.deptName||"--"),effect:"dark",placement:"top"}},[a("el-tag",{staticClass:"xr-tag",attrs:{"disable-transitions":"",color:"#ECEEF2",size:"mini"}},[a("i",{staticClass:"wk wk-icon-layer"}),e._v(e._s(e.detailData.deptName||"--")+"\n            ")])],1),e._v(" "),a("el-tooltip",{attrs:{content:"员工状态："+(e.getEmployeeStatusName(e.detailData.status)||"--"),effect:"dark",placement:"top"}},[a("el-tag",{staticClass:"xr-tag",attrs:{"disable-transitions":"",color:"#ECEEF2",size:"mini"}},[a("i",{staticClass:"wk wk-icon-time"}),e._v(e._s(e.getEmployeeStatusName(e.detailData.status)||"--")+"\n            ")])],1),e._v(" "),a("el-tooltip",{attrs:{content:"入职日期："+(e.detailData.entryTime||"--"),effect:"dark",placement:"top"}},[a("el-tag",{staticClass:"xr-tag",attrs:{"disable-transitions":"",color:"#ECEEF2",size:"mini"}},[a("i",{staticClass:"wk wk-icon-status"}),e._v(e._s(e.detailData.entryTime||"--")+"\n            ")])],1),e._v(" "),a("el-tooltip",{attrs:{content:"年龄："+(e.detailData.age||"--"),effect:"dark",placement:"top"}},[a("el-tag",{staticClass:"xr-tag",attrs:{"disable-transitions":"",color:"#ECEEF2",size:"mini"}},[a("i",{staticClass:"wk wk-icon-cake"}),e._v(e._s(e.detailData.age||"--")+"\n            ")])],1)],1)])]),e._v(" "),a("el-tabs",{staticClass:"side-detail__tabs--default",model:{value:e.tabCurrentName,callback:function(t){e.tabCurrentName=t},expression:"tabCurrentName"}},e._l(e.tabNames,function(t,n){return a("el-tab-pane",{key:n,attrs:{label:t.label,name:t.name,lazy:""}},[a(t.name,{tag:"component",staticClass:"side-detail-tabs-content",staticStyle:{padding:"15px 10px"},attrs:{id:e.id},on:{handle:e.relativeHandle}})],1)}))],1):e._e()],1)},[],!1,null,"732f953e",null));M.options.__file="Detail.vue";var U=M.exports,H=a("Jbo4"),z={name:"TemplateManageDialog",components:{},mixins:[a("nboU").a],props:{id:[String,Number],visible:{type:Boolean,required:!0,default:!1}},data:function(){return{loading:!1,list:[],isNew:!1,ruleForm:{templateName:"",value:[]},rules:{templateName:[{required:!0,message:"模板名称不能为空",trigger:"blur"}],value:[{validator:function(e,t,a){0===t.filter(function(e){return e.isSelect}).length?a(new Error("调薪项不能为空")):a()}}]},editData:null,templateOption:[]}},computed:{title:function(){return this.isNew?this.editData?"编辑模板":"新建模板":"管理定薪模板"}},watch:{visible:{handler:function(e){e&&(this.isNew=!1,this.getList())},immediate:!0}},mounted:function(){},methods:{handleCancel:function(){this.close()},close:function(){this.$emit("update:visible",!1)},getList:function(){var e=this;this.loading=!0,Object(s.s)().then(function(t){e.list=t.data||[],e.loading=!1}).catch(function(){e.loading=!1})},itemHandleClick:function(e,t){var a=this;"edit"===e?this.createClick(t):this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.r)(t.id).then(function(e){a.$message({type:"success",message:"删除成功!"}),a.getList()})}).catch(function(){})},createClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.editData=e,this.ruleForm={templateName:e?e.templateName:"",value:[]},this.templateOption=[],this.getTemplateOption(),this.isNew=!0},getTemplateOption:function(){var e=this;this.loading=!0,Object(s.t)().then(function(t){var a=t.data||[],n=[];e.editData&&(n=e.editData.value.map(function(e){return e.code})),a.forEach(function(e){n.length>0?e.isSelect=n.includes(e.code):e.isSelect=e.code<2e4}),e.templateOption=a,e.ruleForm={templateName:e.editData?e.editData.templateName:"",value:a},e.loading=!1}).catch(function(){e.loading=!1})},newHandleClick:function(e){var t=this;"cancel"===e?this.isNew=!1:"save"===e&&this.$refs.ruleForm.validate(function(e){if(!e)return!1;for(var a=[],n=0;n<t.ruleForm.value.length;n++){var r=t.ruleForm.value[n];r.isSelect&&a.push({name:r.name,code:r.code})}t.loading=!0;var i={templateName:t.ruleForm.templateName,value:a};t.editData&&(i.id=t.editData.id),Object(s.o)(i).then(function(e){t.$message.success(t.editData?"编辑成功":"新建成功"),t.isNew=!1,t.getList(),t.loading=!1}).catch(function(){t.loading=!1})})},spanSelectClick:function(e){e.isSelect=!e.isSelect}}},P=(a("GOs7"),Object(y.a)(z,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{ref:"wkDialog",attrs:{visible:e.visible,"append-to-body":!0,"close-on-click-modal":!1,title:e.title,width:"500px"},on:{close:e.handleCancel}},[a("div",{staticClass:"template-dialog-body"},[e.isNew?[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"templateName"}},[a("el-input",{attrs:{maxlength:20},model:{value:e.ruleForm.templateName,callback:function(t){e.$set(e.ruleForm,"templateName",t)},expression:"ruleForm.templateName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"调薪项",prop:"value"}},e._l(e.templateOption,function(t,n){return a("span",{key:"span"+n,staticClass:"span-label is-big",class:{"is-select":t.isSelect},on:{click:function(a){e.spanSelectClick(t)}}},[e._v(e._s(t.name))])}))],1)]:[a("div",{staticClass:"template__header"},[a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.createClick(null)}}},[e._v("新建模板")])],1),e._v(" "),a("div",{staticClass:"template__body"},e._l(e.list,function(t,n){return a("el-card",{key:"card"+n,staticClass:"template-item"},[a("div",{staticClass:"template-item__header"},[e._v(e._s(t.templateName)),a("span",{staticClass:"item-handle"},[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.itemHandleClick("edit",t)}}},[e._v("编辑")]),e._v(" "),1!==t.isDefault?a("el-button",{staticClass:"is-delete",attrs:{type:"text"},on:{click:function(a){e.itemHandleClick("delete",t)}}},[e._v("删除")]):e._e()],1)]),e._v(" "),a("div",{staticClass:"template-item__body"},e._l(t.value,function(t,n){return a("span",{key:"span"+n,staticClass:"span-label"},[e._v(e._s(t.name))])}))])}))]],2),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.isNew?[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.newHandleClick("save")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.newHandleClick("cancel")}}},[e._v("取消")])]:[a("el-button",{on:{click:e.handleCancel}},[e._v("关闭")])]],2)])},[],!1,null,"f49bee3e",null));P.options.__file="TemplateManageDialog.vue";var W=P.exports,Y=a("jPAu"),G={name:"BatchChangeSalaryAdd",components:{XrCreate:T.a,WkUserDepSelect:Y.a},mixins:[],props:{userList:Array},data:function(){var e=this;return{loading:!1,initDataConfig:null,pickerOptions:{disabledDate:function(t){return!(!e.initDataConfig||!e.initDataConfig.lastSalaryYear)&&(t.getFullYear()==e.initDataConfig.lastSalaryYear?t.getMonth()+1<e.initDataConfig.lastSalaryMonth:t.getFullYear()<e.initDataConfig.lastSalaryYear)}},changeReasonList:[],ruleForm:{range:{employeeIds:[],deptIds:[]},remarks:"",value:[],type:1,changeReason:""},rules:{range:[{required:!0,message:"调薪员工不能为空",trigger:"blur"},{validator:function(e,t,a){0===t.employeeIds.length&&0===t.deptIds.length?a(new Error("调薪员工不能为空")):a()},trigger:"change"}],value:[{required:!0,message:"调薪细则不能为空",trigger:"blur"}],changeReason:[{required:!0,message:"调薪原因不能为空",trigger:"blur"}],enableDate:[{required:!0,message:"调薪生效日期不能为空",trigger:"blur"}]}}},computed:{title:function(){return"批量调薪"}},watch:{},created:function(){this.changeReasonList=F.getValueList(F.changeReasonValue),this.ruleForm.changeReason=this.changeReasonList[0].value,this.userList&&(this.ruleForm.range.employeeIds=this.userList.map(function(e){return e.employeeId})),this.getConfigList(),this.getChangeOptionValue()},mounted:function(){},beforeDestroy:function(){},methods:{getConfigList:function(){var e=this;this.loading=!0,Object(k.b)().then(function(t){e.initDataConfig=t.data.otherInitConfig,e.loading=!1}).catch(function(){e.loading=!1})},getChangeOptionValue:function(){var e=this;this.loading=!0,Object(s.h)().then(function(t){e.ruleForm.value=e.getShowOption(t.data||[]),e.loading=!1}).catch(function(){e.loading=!1})},getShowOption:function(e){var t=[];return e.forEach(function(e){t.push({code:e.code,name:e.name,value:0,percent:0})}),t},saveClick:function(){var e=this;this.$refs.changeAddForm.validate(function(t){if(!t)return!1;e.loading=!0;var a=[];(e.ruleForm.value||[]).forEach(function(t){a.push({code:t.code,name:t.name,value:1===e.ruleForm.type?t.percent:t.value})}),Object(s.a)({deptIds:e.ruleForm.range.deptIds,employeeIds:e.ruleForm.range.employeeIds,remarks:e.ruleForm.remarks,changeReason:e.ruleForm.changeReason,enableDate:e.ruleForm.enableDate,type:e.ruleForm.type,salaryOptions:a}).then(function(t){e.loading=!1;var a=t.data,n=a.errorNum>0,r='<span style="color:#2362FB">'+a.successNum+"</span>个员工调薪成功";n&&(r=r+'<br /><span style="color:red">'+a.errorNum+"</span>个员工存在未生效的调薪或未定薪，无法调薪"),e.$confirm(r,"提示",{confirmButtonText:"关闭",dangerouslyUseHTMLString:!0,showCancelButton:!1,type:n?"warning":"success"}).then(function(){e.$emit("change"),e.$emit("close")}).catch(function(){})}).catch(function(){e.loading=!1})})},close:function(){var e=this;this.$confirm("确定离开？正在编辑的内容将会丢失","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$emit("close")}).catch(function(){})}}},K=(a("ErUj"),Object(y.a)(G,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("xr-create",{attrs:{loading:e.loading,title:e.title},on:{close:e.close,save:e.saveClick}},[a("div",{staticClass:"content"},[a("el-form",{ref:"changeAddForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{prop:"range"}},[a("template",{slot:"label"},[e._v("调薪员工"),a("span",{staticStyle:{color:"#999"}},[e._v("（所选对象调薪细则、原因、生效日期将相同）")])]),e._v(" "),a("wk-user-dep-select",{attrs:{"user-value":e.ruleForm.range.employeeIds,"dep-value":e.ruleForm.range.deptIds,props:{dataType:"hrm"}},on:{"update:userValue":function(t){e.$set(e.ruleForm.range,"employeeIds",t)},"update:depValue":function(t){e.$set(e.ruleForm.range,"deptIds",t)}}})],2),e._v(" "),a("el-form-item",{attrs:{prop:"value"}},[a("template",{slot:"label"},[e._v("\n          调薪细则"),a("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("1、工资表中只有基本工资类下的薪资项可以批量调薪，如需批量调整其他薪资项，请在后台工资表设置-基本工资类下添加自定义项"),a("br"),e._v("\n              2、试用员工只对试用期工资进行调薪"),a("br"),e._v("\n              3、调薪计算示例："),a("br"),e._v("\n                   按比例调薪：基本工资=2000，调薪比例=10%，调薪后=2000+2000X10%=2200"),a("br"),e._v("\n                   按金额调薪：基本工资=2000，调薪金额=100，调薪后=2000+100=2100")]),e._v(" "),a("i",{staticClass:"wk wk-help wk-help-tips",staticStyle:{"margin-left":"3px"}})])],1),e._v(" "),a("el-radio-group",{model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[a("el-radio",{attrs:{label:1}},[e._v("按比例调薪")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("按金额调薪")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.ruleForm.value,height:"300"}},[a("el-table-column",{attrs:{prop:"name",label:"调薪项"}}),e._v(" "),a("el-table-column",{attrs:{label:1===e.ruleForm.type?"调薪比例":"调薪金额",prop:"value"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===e.ruleForm.type?a("el-input-number",{attrs:{precision:2,max:9999.99,controls:!1},model:{value:t.row.percent,callback:function(a){e.$set(t.row,"percent",a)},expression:"scope.row.percent"}}):a("el-input-number",{attrs:{precision:2,max:9999999.99,controls:!1},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}),e._v("\n              "+e._s(1===e.ruleForm.type?"%":"元")+"\n            ")]}}])})],1)],2),e._v(" "),a("flexbox",{attrs:{align:"stretch"}},[a("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"调薪原因",prop:"changeReason"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.ruleForm.changeReason,callback:function(t){e.$set(e.ruleForm,"changeReason",t)},expression:"ruleForm.changeReason"}},e._l(e.changeReasonList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{staticStyle:{flex:"1","margin-left":"80px"},attrs:{label:"调薪生效日期",prop:"enableDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"picker-options":e.pickerOptions,type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.ruleForm.enableDate,callback:function(t){e.$set(e.ruleForm,"enableDate",t)},expression:"ruleForm.enableDate"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[a("el-input",{attrs:{rows:3,autosize:{minRows:3},maxlength:800,type:"textarea",resize:"none"},model:{value:e.ruleForm.remarks,callback:function(t){e.$set(e.ruleForm,"remarks",t)},expression:"ruleForm.remarks"}})],1)],1)],1)])},[],!1,null,"1713a607",null));K.options.__file="BatchChangeAdd.vue";var Q=K.exports,Z={name:"SalaryArchives",components:{XrHeader:u.a,XrTableHeader:d.a,SalaryArchivesDetail:U,WkPopoverFilter:m.a,WkFieldSet:p.a,WkBorderMenu:H.a,TemplateManageDialog:W,FixSalaryAdd:R,ChangeSalaryAdd:L,BatchChangeSalaryAdd:Q},data:function(){return{loading:!1,tableHeight:document.documentElement.clientHeight-275,list:[],fieldList:[{field:"employeeName",name:"姓名"},{field:"jobNumber",name:"工号"},{field:"deptName",name:"部门"},{field:"post",name:"岗位"},{field:"status",name:"员工状态"},{field:"entryTime",name:"入职日期"},{field:"becomeTime",name:"转正日期"},{field:"changeData",name:"最近调整日期"},{field:"changeReason",name:"调薪原因"},{field:"total",name:"工资合计"}],currentPage:1,pageSize:15,pageSizes:[15,30,60,100],total:0,search:"",popoverFilterWidth:150,tabType:"12",tabLeftList:[{label:"在职",name:"11",num:0},{label:"全职",name:"12",num:0},{label:"实习",name:"3",num:0},{label:"劳务",name:"5",num:0},{label:"顾问",name:"6",num:0},{label:"返聘",name:"7",num:0},{label:"外包",name:"8",num:0},{label:"兼职",name:"4",num:0}],tabCenterList:[{label:"试用",name:"2",num:0},{label:"正式",name:"1",num:0}],rowID:"",showDview:!1,filterObj:{},filterList:[{name:"部门",field:"deptId",formType:"structure",props:{dataType:"hrm"},request:c.e,setting:[]},{name:"岗位",field:"post",formType:"text",setting:[]},{name:"调薪状态",field:"changeType",formType:"select",setting:[{label:"未定薪",value:0},{label:"已定薪",value:1},{label:"已调薪",value:2}]}],selectionList:[],rowData:null,fixAddShow:!1,changeAddShow:!1,isBatchChange:!1,batchChangeAddShow:!1,templateManageDialogShow:!1}},computed:l()({},Object(q.b)(["collapse","hrm","hrmUserType","userInfo"]),{salaryAuth:function(){return this.hrm.salary},updateAuth:function(){return this.salaryAuth&&this.salaryAuth.updateArchives},headerMoreHandle:function(){var e=[];return this.updateAuth&&(e.push({type:"importFix",name:"导入定薪",icon:"wk wk-import"}),e.push({type:"importChange",name:"导入调薪",icon:"wk wk-import"})),e},tabelHandles:function(){var e=[];return e.push({label:"批量调薪",command:"edit",icon:"wk wk-edit"}),e},hasFilterContent:function(){if(this.filterObj){for(var e=!1,t=r()(this.filterObj),a=0;a<t.length;a++){var n=t[a];""!=this.filterObj[n]&&this.filterObj[n]!=[]&&null!=this.filterObj[n]&&void 0!=this.filterObj[n]&&(e=!0)}return e}return!1}}),watch:{collapse:{handler:function(e){this.popoverFilterWidth=document.documentElement.clientWidth-(e?89:225)},immediate:!0}},created:function(){var e=this;window.onresize=function(){e.tableHeight=document.documentElement.clientHeight-(e.selectionList.length>0?325:275)},this.$bus.on("import-crm-done-bus",function(){e.refreshPageData()}),this.refreshList(),this.getTabsNum()},beforeDestroy:function(){this.$bus.off("import-crm-done-bus")},methods:{refreshPageData:function(){this.getList(),this.getTabsNum()},getTabsNum:function(){var e=this;Object(o.J)().then(function(t){var a=t.data||{};e.tabLeftList.forEach(function(e){e.num=a[parseInt(e.name)]||0}),e.tabCenterList.forEach(function(e){e.num=a[parseInt(e.name)]||0}),e.tabRightList.forEach(function(e){e.num=a[parseInt(e.name)]||0})}).catch(function(){})},tabClick:function(e){this.refreshList()},resetFilter:function(){this.filterObj={},this.refreshList()},createSaveSuccess:function(){this.getTabsNum(),this.refreshList()},searchClick:function(e){this.search=e,this.refreshList()},detailHandle:function(e){this.getTabsNum(),this.getList()},refreshList:function(){this.handleCurrentChange(1)},handleSizeChange:function(e){this.pageSize=e,this.getList()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},getList:function(){var e=this;this.loading=!0;var t={page:this.currentPage,limit:this.pageSize,search:this.search,status:this.tabType};for(var a in this.filterObj)t[a]=this.filterObj[a];Object(s.m)(t).then(function(t){e.list=t.data.list,e.total=t.data.totalRow,t.data.totalRow&&Math.ceil(t.data.totalRow/e.pageSize)<e.currentPage&&e.currentPage>1?(e.currentPage=e.currentPage-1,e.getList()):(e.total=t.data.totalRow,e.loading=!1),e.$nextTick(function(){var e=document.querySelector(".el-table__body-wrapper");e.scrollTop=1,0!=e.scrollLeft&&(e.scrollLeft=e.scrollLeft-1)}),e.loading=!1}).catch(function(){e.loading=!1})},fieldFormatter:function(e,t){var a=e[t.property];return"status"==t.property?x.d.statusValue[a]||"--":"changeReason"==t.property?F.changeReasonValue[a]||"--":Object(O.b)(a)?"--":a},cellClassName:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;return"employeeName"==t.property?"can-visit--underline":""},handleCommand:function(e){"edit"===e&&(this.isBatchChange=!1,this.batchChangeAddShow=!0)},headerMoreHandleClick:function(e){"importFix"==e?this.$wkImport.import("hrmSalaryFix",{typeName:"定薪",ownerSelectShow:!1,repeatHandleShow:!1,moduleType:81,importRequest:s.g,templateRequest:s.f,userInfo:this.userInfo}):"importChange"==e?this.$wkImport.import("hrmSalaryChange",{typeName:"调薪",ownerSelectShow:!1,repeatHandleShow:!1,moduleType:82,importRequest:s.c,templateRequest:s.e,userInfo:this.userInfo}):"batchEdit"==e&&(this.isBatchChange=!0,this.batchChangeAddShow=!0)},handleRowClick:function(e,t,a){"employeeName"==t.property&&(this.rowID=e.employeeId,this.showDview=!0)},handleSelectionChange:function(e){this.selectionList=e,this.tableHeight=document.documentElement.clientHeight-(this.selectionList.length>0?325:275)},templateManage:function(){this.templateManageDialogShow=!0},rowHandleClick:function(e,t){this.rowData=t,"fix"===e?this.fixAddShow=!0:this.changeAddShow=!0}}},J=(a("Ak8d"),Object(y.a)(Z,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"salary-archives"},[a("xr-header",{staticStyle:{padding:"0px 15px 15px 0"},attrs:{"ft-top":"0","icon-class":"wk wk-payment","icon-color":"#2362FB",placeholder:"请输入员工姓名/工号","show-search":"","search-icon-type":"icon"},on:{search:e.searchClick}},[a("template",{slot:"label"},[e._v("\n      薪资档案"),2===e.hrmUserType?a("el-tooltip",{staticStyle:{"margin-left":"8px"},attrs:{effect:"dark",placement:"top",content:"仅展示您管理范围内的员工"}},[a("i",{staticClass:"wk wk-help wk-help-tips"})]):e._e()],1),e._v(" "),a("template",{slot:"ft"},[e.hasFilterContent?a("el-button",{attrs:{type:"text"},on:{click:e.resetFilter}},[e._v("清除筛选")]):e._e(),e._v(" "),a("wk-popover-filter",{staticStyle:{"margin-right":"5px"},attrs:{width:e.popoverFilterWidth,"field-from":e.filterObj,"field-list":e.filterList,"has-content":e.hasFilterContent,placement:"bottom"},on:{"update:fieldFrom":function(t){e.filterObj=t},sure:e.refreshList,reset:e.resetFilter}}),e._v(" "),1===e.hrmUserType?a("el-button",{on:{click:e.templateManage}},[e._v("管理定薪模板")]):e._e(),e._v(" "),e.updateAuth?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.headerMoreHandleClick("batchEdit")}}},[e._v("批量调薪")]):e._e(),e._v(" "),e.headerMoreHandle.length>0?a("el-dropdown",{staticStyle:{"margin-left":"10px"},attrs:{trigger:"click"},on:{command:e.headerMoreHandleClick}},[a("el-button",{attrs:{icon:"el-icon-more"}}),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.headerMoreHandle,function(t,n){return a("el-dropdown-item",{key:n,attrs:{icon:t.icon,command:t.type}},[e._v(e._s(t.name))])}))],1):e._e()],1)],2),e._v(" "),a("div",{staticClass:"crm-container"},[a("flexbox",{staticClass:"filter"},[a("wk-border-menu",{staticStyle:{flex:"6"},attrs:{list:e.tabLeftList,"is-select":!!e.tabLeftList.find(function(t){return t.name==e.tabType})},on:{select:e.tabClick},model:{value:e.tabType,callback:function(t){e.tabType=t},expression:"tabType"}}),e._v(" "),a("wk-border-menu",{staticStyle:{flex:"2"},attrs:{list:e.tabCenterList,"is-select":!!e.tabCenterList.find(function(t){return t.name==e.tabType})},on:{select:e.tabClick},model:{value:e.tabType,callback:function(t){e.tabType=t},expression:"tabType"}}),e._v(" "),a("div",{staticStyle:{flex:"3"}})],1),e._v(" "),e.selectionList.length>0?a("xr-table-header",{attrs:{handles:e.tabelHandles,selects:e.selectionList},on:{command:e.handleCommand}}):e._e(),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"n-table--border el-table-header--white",staticStyle:{width:"100%"},attrs:{id:"crm-table","row-height":40,data:e.list,height:e.tableHeight,"cell-class-name":e.cellClassName,"use-virtual":"",stripe:"",border:"","highlight-current-row":""},on:{"row-click":e.handleRowClick,"selection-change":e.handleSelectionChange}},[e.updateAuth?a("el-table-column",{attrs:{"show-overflow-tooltip":"",fixed:"",type:"selection",align:"center",width:"55"}}):e._e(),e._v(" "),e._l(e.fieldList,function(t,n){return a("el-table-column",{key:n,attrs:{fixed:0==n,prop:t.field,label:t.name,"min-width":t.width,formatter:e.fieldFormatter,"show-overflow-tooltip":""}})}),e._v(" "),a("el-table-column"),e._v(" "),e.updateAuth?a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.changeType?a("el-button",{attrs:{type:"text"},on:{click:function(a){e.rowHandleClick("fix",t.row)}}},[e._v("定薪")]):a("el-button",{attrs:{type:"text"},on:{click:function(a){e.rowHandleClick("change",t.row)}}},[e._v("调薪")])]}}])}):e._e()],2),e._v(" "),a("div",{staticClass:"p-contianer"},[a("el-pagination",{staticClass:"p-bar",attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:pageSize":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),e.showDview?a("salary-archives-detail",{attrs:{id:e.rowID},on:{handle:e.detailHandle,close:function(t){e.showDview=!1}}}):e._e(),e._v(" "),a("template-manage-dialog",{attrs:{visible:e.templateManageDialogShow},on:{"update:visible":function(t){e.templateManageDialogShow=t}}}),e._v(" "),e.fixAddShow?a("fix-salary-add",{attrs:{id:e.rowData.employeeId},on:{change:e.getList,close:function(t){e.fixAddShow=!1}}}):e._e(),e._v(" "),e.changeAddShow?a("change-salary-add",{attrs:{id:e.rowData.employeeId},on:{change:e.getList,close:function(t){e.changeAddShow=!1}}}):e._e(),e._v(" "),e.batchChangeAddShow?a("batch-change-salary-add",{attrs:{"user-list":e.isBatchChange?[]:e.selectionList},on:{close:function(t){e.batchChangeAddShow=!1}}}):e._e()],1)},[],!1,null,"77aba045",null));J.options.__file="index.vue";t.default=J.exports},uh96:function(e,t,a){},"wey+":function(e,t,a){"use strict";var n=a("eBbD");a.n(n).a}}]);