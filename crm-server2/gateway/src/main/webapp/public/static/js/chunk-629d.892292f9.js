(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-629d"],{"9GgJ":function(e,t,o){"use strict";var n={name:"XrHeader",components:{},props:{iconClass:[String,Array],iconColor:String,label:String,showSearch:{type:Boolean,default:!1},searchIconType:{type:String,default:"text"},placeholder:{type:String,default:"请输入内容"},ftTop:{type:String,default:"15px"},content:[String,Number],inputAttr:{type:Object,default:function(){}}},data:function(){return{search:""}},computed:{},watch:{content:{handler:function(){this.search!=this.content&&(this.search=this.content)},immediate:!0}},mounted:function(){},beforeDestroy:function(){},methods:{inputChange:function(){this.$emit("update:content",this.search)},searchClick:function(){this.$emit("search",this.search)}}},r=(o("zIzm"),o("KHd+")),a=Object(r.a)(n,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("flexbox",{staticClass:"xr-header"},[e.iconClass?o("div",{staticClass:"xr-header__icon",style:{backgroundColor:e.iconColor}},[o("i",{class:e.iconClass})]):e._e(),e._v(" "),o("div",{staticClass:"xr-header__label"},[e.$slots.label?e._t("label"):[e._v(e._s(e.label))]],2),e._v(" "),e.showSearch?o("el-input",e._b({staticClass:"xr-header__search",class:{"is-text":"text"===e.searchIconType},style:{"margin-top":e.ftTop},attrs:{placeholder:e.placeholder},on:{input:e.inputChange},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchClick(t):null}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},"el-input",e.inputAttr,!1),["text"===e.searchIconType?o("el-button",{attrs:{slot:"append",type:"primary"},nativeOn:{click:function(t){return e.searchClick(t)}},slot:"append"},[e._v("搜索")]):o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},nativeOn:{click:function(t){return e.searchClick(t)}},slot:"append"})],1):e._e(),e._v(" "),o("div",{staticClass:"xr-header__ft",style:{top:e.ftTop}},[e._t("ft")],2)],1)},[],!1,null,"7bba770c",null);a.options.__file="index.vue";t.a=a.exports},Ed9r:function(e,t,o){},Er1V:function(e,t,o){},IdJD:function(e,t,o){"use strict";var n=o("GQeE"),r=o.n(n);t.a={providentFundTypeValue:{1:"养老保险",2:"医疗保险",3:"失业保险",4:"工伤保险",5:"生育保险",6:"补充大病医疗保险",7:"补充养老保险",8:"残保险"},socialSecurityTypeValue:{10:"公积金"},getValueList:function(e){return r()(e).map(function(t){return{label:e[t],value:parseInt(t)}})}}},Pqxw:function(e,t,o){e.exports={xrColorPrimary:"#2362FB"}},TqqB:function(e,t,o){"use strict";o.d(t,"k",function(){return r}),o.d(t,"m",function(){return a}),o.d(t,"i",function(){return i}),o.d(t,"l",function(){return l}),o.d(t,"g",function(){return s}),o.d(t,"e",function(){return c}),o.d(t,"h",function(){return u}),o.d(t,"a",function(){return d}),o.d(t,"b",function(){return p}),o.d(t,"f",function(){return m}),o.d(t,"j",function(){return h}),o.d(t,"n",function(){return f}),o.d(t,"o",function(){return y}),o.d(t,"d",function(){return b}),o.d(t,"c",function(){return g});var n=o("t3Un");function r(e){return Object(n.a)({url:"hrmInsuranceMonthRecord/queryInsuranceRecordList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function a(e){return Object(n.a)({url:"hrmInsuranceMonthRecord/queryInsurancePageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function i(){return Object(n.a)({url:"hrmInsuranceMonthRecord/computeInsuranceData",method:"post"})}function l(e){return Object(n.a)({url:"hrmInsuranceMonthRecord/queryInsuranceRecordList/"+e,method:"post"})}function s(e){return Object(n.a)({url:"hrmInsuranceMonthEmpRecord/stop",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(n.a)({url:"hrmInsuranceMonthEmpRecord/queryById/"+e,method:"post"})}function u(e){return Object(n.a)({url:"hrmInsuranceMonthEmpRecord/updateInsuranceProject",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(n.a)({url:"hrmInsuranceMonthEmpRecord/addInsuranceEmp",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function p(e){return Object(n.a)({url:"hrmInsuranceMonthEmpRecord/batchUpdateInsuranceProject",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function m(e){return Object(n.a)({url:"hrmInsuranceMonthEmpRecord/queryNoInsuranceEmp/"+e.irecordId,method:"post"})}function h(e){return Object(n.a)({url:"hrmInsuranceMonthRecord/deleteInsurance/"+e,method:"post"})}function f(e){return Object(n.a)({url:"hrmInsuranceScheme/queryInsuranceScale",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function y(e){return Object(n.a)({url:"hrmInsuranceScheme/queryInsuranceType",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function b(e){return Object(n.a)({url:"hrmInsuranceMonthEmpRecord/myInsuranceDetail/"+e,method:"post"})}function g(e){return Object(n.a)({url:"hrmInsuranceMonthEmpRecord/myInsurance",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},UGe0:function(e,t,o){"use strict";var n=o("XAon"),r=o("3pgX"),a=o("Woz+"),i=o("8GhS"),l=o("DMJz"),s=o("tG22"),c=o("bWDp"),u={name:"WkForm",components:{WkUserSelect:n.a,WkDepSelect:r.a,VDistpicker:a.a,XhFiles:i.d,WkSelect:l.a,WkCheckbox:s.a},mixins:[c.a],inheritAttrs:!1,props:{fieldFrom:{type:Object,default:function(){return{}}},fieldList:{type:Array,default:function(){return[]}},customClass:{type:String,default:"is-two-columns"}},data:function(){return{instance:null}},computed:{},watch:{},mounted:function(){var e=this;this.$nextTick(function(){e.instance=e.$refs.form})},beforeDestroy:function(){},methods:{}},d=(o("mYM5"),o("X+Pv"),o("KHd+")),p=Object(d.a)(u,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",e._g(e._b({ref:"form",staticClass:"wk-form",class:e.customClass},"el-form",e.$attrs,!1),e.$listeners),[e._l(e.fieldList,function(t,n){return o("el-form-item",{key:n,class:[t.className||"","is-"+t.formType],attrs:{prop:t.field}},[o("template",{slot:"label"},[e._v("\n      "+e._s(t.name)+"\n      "),"tooltip"==t.tipType?o("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[o("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.getTips(t))},slot:"content"}),e._v(" "),o("i",{staticClass:"wk wk-help wk-help-tips"})]):o("span",{staticStyle:{color:"#999"}},[e._v("\n        "+e._s(e.getTips(t))+"\n      ")])],1),e._v(" "),"text"==t.formType?o("el-input",{attrs:{disabled:t.disabled,maxlength:100,placeholder:t.placeholder,type:t.formType},on:{input:function(o){e.commonChange(t,n,o)}},model:{value:e.fieldFrom[t.field],callback:function(o){e.$set(e.fieldFrom,t.field,o)},expression:"fieldFrom[item.field]"}}):e.isTrimInput(t.formType)?o("el-input",{attrs:{disabled:t.disabled,"prefix-icon":e.getInputIcon(t.formType),maxlength:e.getInputMaxlength(t.formType),placeholder:t.placeholder,type:"text"},on:{input:function(o){e.commonChange(t,n,o)}},model:{value:e.fieldFrom[t.field],callback:function(o){e.$set(e.fieldFrom,t.field,"string"==typeof o?o.trim():o)},expression:"fieldFrom[item.field]"}}):"number"==t.formType?o("el-input-number",{attrs:{placeholder:t.placeholder,disabled:t.disabled,controls:!1},on:{change:function(o){e.commonChange(t,n,o)}},model:{value:e.fieldFrom[t.field],callback:function(o){e.$set(e.fieldFrom,t.field,o)},expression:"fieldFrom[item.field]"}}):"floatnumber"==t.formType?o("el-input-number",{attrs:{placeholder:t.placeholder,disabled:t.disabled,controls:!1},on:{change:function(o){e.commonChange(t,n,o)}},model:{value:e.fieldFrom[t.field],callback:function(o){e.$set(e.fieldFrom,t.field,o)},expression:"fieldFrom[item.field]"}}):"textarea"==t.formType?o("el-input",{attrs:{disabled:t.disabled,rows:3,autosize:{minRows:3},maxlength:t.maxlength||800,placeholder:t.placeholder,type:t.formType,resize:"none"},on:{input:function(o){e.commonChange(t,n,o)}},model:{value:e.fieldFrom[t.field],callback:function(o){e.$set(e.fieldFrom,t.field,o)},expression:"fieldFrom[item.field]"}}):"select"===t.formType&&t.hasOwnProperty("optionsData")?o("wk-select",{attrs:{disabled:t.disabled,clearable:t.clearable,placeholder:t.placeholder,options:t.setting,"show-type":1===t.precisions?"tiled":"default","other-show-input":t.hasOwnProperty("optionsData")},on:{change:function(o){e.commonChange(t,n,o)}},model:{value:e.fieldFrom[t.field],callback:function(o){e.$set(e.fieldFrom,t.field,o)},expression:"fieldFrom[item.field]"}}):"checkbox"===t.formType&&t.hasOwnProperty("optionsData")?o("wk-checkbox",{attrs:{disabled:t.disabled,clearable:t.clearable,placeholder:t.placeholder,options:t.setting,"show-type":1===t.precisions?"tiled":"default","other-show-input":t.hasOwnProperty("optionsData")},on:{change:function(o){e.commonChange(t,n,o)}},model:{value:e.fieldFrom[t.field],callback:function(o){e.$set(e.fieldFrom,t.field,o)},expression:"fieldFrom[item.field]"}}):["checkbox","select"].includes(t.formType)?o("el-select",{staticStyle:{width:"100%"},attrs:{disabled:t.disabled,clearable:t.clearable,placeholder:t.placeholder,multiple:"checkbox"===t.formType},on:{change:function(o){e.commonChange(t,n,o)}},model:{value:e.fieldFrom[t.field],callback:function(o){e.$set(e.fieldFrom,t.field,o)},expression:"fieldFrom[item.field]"}},e._l(t.setting,function(t,n){return o("el-option",{key:n,attrs:{label:e.isEmptyValue(t.value)?t:t.label||t.name,value:e.isEmptyValue(t.value)?t:t.value}})})):"checkbox"==t.formType?o("el-select",{staticStyle:{width:"100%"},attrs:{disabled:t.disabled,clearable:t.clearable,placeholder:t.placeholder,multiple:""},on:{change:function(o){e.commonChange(t,n,o)}},model:{value:e.fieldFrom[t.field],callback:function(o){e.$set(e.fieldFrom,t.field,o)},expression:"fieldFrom[item.field]"}},e._l(t.setting,function(t,n){return o("el-option",{key:n,attrs:{label:e.isEmptyValue(t.value)?t:t.label||t.name,value:e.isEmptyValue(t.value)?t:t.value}})})):"date"==t.formType?o("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:t.disabled,clearable:"",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},on:{change:function(o){e.commonChange(t,n,o)}},model:{value:e.fieldFrom[t.field],callback:function(o){e.$set(e.fieldFrom,t.field,o)},expression:"fieldFrom[item.field]"}}):"dateRange"==t.formType?o("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:t.disabled,type:t.dateType||"daterange","value-format":t.dateValueFormat||"yyyy-MM-dd",clearable:"","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:function(o){e.commonChange(t,n,o)}},model:{value:e.fieldFrom[t.field],callback:function(o){e.$set(e.fieldFrom,t.field,o)},expression:"fieldFrom[item.field]"}}):"datetime"==t.formType?o("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:t.disabled,clearable:"",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},on:{change:function(o){e.commonChange(t,n,o)}},model:{value:e.fieldFrom[t.field],callback:function(o){e.$set(e.fieldFrom,t.field,o)},expression:"fieldFrom[item.field]"}}):"structure"==t.formType?o("wk-dep-select",{staticStyle:{width:"100%"},attrs:{request:t.request,props:t.props,params:t.params,disabled:t.disabled,radio:!!e.isEmptyValue(t.radio)||t.radio},on:{change:function(o){e.depOrUserChange(t,n,arguments[0],arguments[1])}},model:{value:e.fieldFrom[t.field],callback:function(o){e.$set(e.fieldFrom,t.field,o)},expression:"fieldFrom[item.field]"}}):["single_user","user"].includes(t.formType)?o("wk-user-select",{staticStyle:{width:"100%"},attrs:{request:t.request,props:t.props,params:t.params,disabled:t.disabled,radio:!!e.isEmptyValue(t.radio)||t.radio},on:{change:function(o){e.depOrUserChange(t,n,arguments[0],arguments[1])}},model:{value:e.fieldFrom[t.field],callback:function(o){e.$set(e.fieldFrom,t.field,o)},expression:"fieldFrom[item.field]"}}):"radio"==t.formType?o("el-radio-group",{attrs:{disabled:t.disabled,placeholder:t.placeholder},on:{change:function(o){e.commonChange(t,n,o)}},model:{value:e.fieldFrom[t.field],callback:function(o){e.$set(e.fieldFrom,t.field,o)},expression:"fieldFrom[item.field]"}},e._l(t.setting,function(t,n){return o("el-radio",{key:n,attrs:{label:e.isEmptyValue(t.value)?t:t.value}},[e._v("\n        "+e._s(e.isEmptyValue(t.value)?t:t.label||t.name)+"\n      ")])})):"boolean_value"==t.formType?o("el-switch",{attrs:{disabled:t.disabled,"active-value":"1","inactive-value":"0"},model:{value:e.fieldFrom[t.field],callback:function(o){e.$set(e.fieldFrom,t.field,o)},expression:"fieldFrom[item.field]"}}):"address"==t.formType?o("v-distpicker",{attrs:{province:e.fieldFrom[t.field].province,city:e.fieldFrom[t.field].city,area:e.fieldFrom[t.field].area},on:{province:function(o){e.selectProvince(o,t,n)},city:function(o){e.selectCity(o,t,n)},area:function(o){e.selectArea(o,t,n)}}}):"file"==t.formType?o("xh-files",{attrs:{value:e.fieldFrom[t.field],disabled:t.disabled},on:{"value-change":function(o){e.oldChange(o,t,n)}}}):[e._t("default",null,{data:t,index:n})]],2)}),e._v(" "),e._t("suffix")],2)},[],!1,null,"61367085",null);p.options.__file="index.vue";t.a=p.exports},"X+Pv":function(e,t,o){"use strict";var n=o("Ed9r");o.n(n).a},XMdL:function(e,t,o){"use strict";var n=o("ehAc");o.n(n).a},ehAc:function(e,t,o){},ihDC:function(e,t,o){},mYM5:function(e,t,o){"use strict";var n=o("Pqxw");o.n(n).a},sIVf:function(e,t,o){"use strict";var n=o("Er1V");o.n(n).a},sfTQ:function(e,t,o){"use strict";o.r(t);var n=o("zMw6"),r=o("9GgJ"),a=o("4d7F"),i=o.n(a),l=o("GQeE"),s=o.n(l),c=o("TqqB"),u=o("gVZb"),d=o("UGe0"),p=o("EP+0"),m=o("IdJD"),h=o("7Qib"),f={name:"InsuranceSchemeCreate",components:{XrCreate:u.a,CreateSections:p.a,WkForm:d.a},filters:{},props:{id:[String,Number]},data:function(){return{loading:!1,tabList:[{label:"设置参保基数和比例",name:1},{label:"仅设置参保金额",name:2}],typeCity:"",typeDetail:null,typeList:[],baseRules:{city:[{required:!0,message:"请选择",trigger:["blur","change"]},{validator:function(e,t,o){t&&t.city?o():o(new Error("请选择参保城市"))},trigger:["blur","change"]}],schemeName:[{required:!0,message:"请输入",trigger:["blur","change"]}]},baseForm:{schemeType:1,houseType:"",city:{province:"",city:"",area:""}},otherFrom:null,handleOptions:[]}},computed:{title:function(){return this.id?"编辑参保方案":"添加参保方案"},baseFields:function(){return[{name:"方案名称",field:"schemeName",formType:"text",setting:[]},{name:"参保城市",field:"city",formType:"address",setting:[]},{name:"可选参保方案",field:"houseType",formType:"select",setting:this.typeList}]},tableFields:function(){return 1==this.baseForm.schemeType?[{label:"默认基数",prop:"defaultAmount"},{label:"公司缴纳比例",prop:"corporateProportion"},{label:"个人缴纳比例",prop:"personalProportion"},{label:"公司金额",prop:"corporateAmount"},{label:"个人金额",prop:"personalAmount"}]:[{label:"默认基数",prop:"defaultAmount"},{label:"公司金额",prop:"corporateAmount"},{label:"个人金额",prop:"personalAmount"}]}},watch:{},created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{afterEnter:function(){var e=this;this.id?this.getDetial():(this.loading=!0,setTimeout(function(){e.otherFrom={topList:e.getDefaultItems([1,2,3,4,5]),bottomList:e.getDefaultItems([10]),leftList:[],leftFundList:[],rightList:[],rightFundList:[]},e.$nextTick(function(){e.loading=!1})},300))},getDetial:function(){var e=this;this.loading=!0,Object(n.e)(this.id).then(function(t){var o=t.data||{},n={province:"",city:"",area:""};if(o.city){var r=o.city.split(",");if(n.province=r[0]||"",n.city=r[1]||"",n.area=r[2]||"",n.city){var a=e.getCityName(n.city);e.typeCity=a,e.getSchemeType(a)}}e.baseForm={city:n,schemeName:o.schemeName,schemeType:o.schemeType,houseType:o.houseType},e.$nextTick(function(){e.baseForm.houseType=o.houseType}),e.otherFrom={topList:o.socialSecurityProjectList,bottomList:o.providentFundProjectList,leftList:[],leftFundList:[],rightList:[],rightFundList:[]},e.loading=!1}).catch(function(){e.loading=!1,e.hideView()})},close:function(){this.$emit("close")},tabChange:function(){1==this.baseForm.schemeType?(this.otherFrom.rightList=this.otherFrom.topList,this.otherFrom.rightFundList=this.otherFrom.bottomList,this.otherFrom.topList=0==this.otherFrom.leftList.length?this.getDefaultItems([1,2,3,4,5]):Object(h.w)(this.otherFrom.leftList),this.otherFrom.bottomList=0==this.otherFrom.leftFundList.length?this.getDefaultItems([10]):Object(h.w)(this.otherFrom.leftFundList)):(this.otherFrom.leftList=this.otherFrom.topList,this.otherFrom.leftFundList=this.otherFrom.bottomList,this.otherFrom.topList=0==this.otherFrom.rightList.length?this.getDefaultItems([1,2,3,4,5]):Object(h.w)(this.otherFrom.rightList),this.otherFrom.bottomList=0==this.otherFrom.rightFundList.length?this.getDefaultItems([10]):Object(h.w)(this.otherFrom.rightFundList))},getDefaultItems:function(e){var t=this;return e.map(function(e){return t.getDefaultItem(e)})},getDefaultItem:function(e){var t=this.typeDetail?this.typeDetail[e]:null;return{type:e||1,projectName:"",corporateAmount:t?t.corporateAmount:0,corporateProportion:t?t.corporateProportion:0,defaultAmount:t?t.defaultAmount:0,personalAmount:t?t.personalAmount:0,personalProportion:t?t.personalProportion:0}},getProjectName:function(e){return e<9?m.a.providentFundTypeValue[e]:m.a.socialSecurityTypeValue[e]},getLeftInputDisabledValue:function(e){return 2!=this.baseForm.schemeType&&["corporateAmount","personalAmount"].includes(e)},getLeftInputAppendShowValue:function(e){return["corporateProportion","personalProportion"].includes(e)},getNumberType:function(e){return["corporateAmount","personalAmount","defaultAmount"].includes(e)?"positive3Float":["corporateProportion","personalProportion"].includes(e)?"positive4Float":""},getSummaries:function(e){var t=e.columns,o=e.data,n=[];return t.forEach(function(e,t){if(0!==t)if(!["personalProportion","corporateProportion","defaultAmount"].includes(e.property)&&e.property){var r=o.map(function(t){return Number(t[e.property])});r.every(function(e){return isNaN(e)})?n[t]="N/A":n[t]=r.reduce(function(e,t){var o=Number(t);return isNaN(o)?e:Object(h.i)(e,t)},0)}else n[t]="";else n[t]="总计"}),n},numberInputChange:function(e){if(1==this.baseForm.schemeType){var t=parseFloat(e.personalProportion||0),o=parseFloat(e.defaultAmount||0)*(t>0?t/100:0);e.personalAmount=Math.round(100*o)/100;var n=parseFloat(e.corporateProportion||0),r=parseFloat(e.defaultAmount||0)*(n>0?n/100:0);e.corporateAmount=Math.round(100*r)/100}},getHandleOptions:function(e,t){var o="top"==e?m.a.getValueList(m.a.providentFundTypeValue):m.a.getValueList(m.a.socialSecurityTypeValue),n=t.map(function(e){return e.type});return o.map(function(e){return e.checked=n.includes(e.value),e})},checkboxChange:function(e,t,o){if(e)o.push(this.getDefaultItem(t));else{for(var n=-1,r=0;r<o.length;r++)if(o[r].type==t){n=r;break}n>=0&&o.splice(n,1)}},dropdownCommand:function(e,t,o){"other"==e&&(this.$refs[o+"Dropdown"].hide(),t.push(this.getDefaultItem("top"==o?9:11)))},deleteItems:function(e,t){t.splice(e,1)},saveClick:function(){var e=this;this.$refs.baseForm.$children[0].validate(function(t){if(!t)return!1;e.$refs.otherFrom.validate(function(t){if(!t)return!1;if(0!=e.otherFrom.topList.length){var o={schemeType:e.baseForm.schemeType,schemeName:e.baseForm.schemeName,houseType:e.baseForm.houseType};if(e.id&&(o.schemeId=e.id),e.baseForm.city){var r="";s()(e.baseForm.city).forEach(function(t){e.baseForm.city[t]&&(r?r+=","+e.baseForm.city[t]:r=e.baseForm.city[t])}),o.city=r}else o.city="";o.socialSecurityProjectList=e.otherFrom.topList,o.providentFundProjectList=e.otherFrom.bottomList,e.getConfirmResult().then(function(){e.loading=!0,Object(n.a)(o).then(function(t){e.$emit("close"),e.$message.success(e.title+"成功"),e.$emit("success"),e.loading=!1}).catch(function(){e.loading=!1})}).catch(function(){})}else e.$message.error("请添加社保项目")})})},getConfirmResult:function(){var e=this;return new i.a(function(t,o){e.id?e.$confirm("编辑参保方案后，不会变更现有的参保信息，确定提交？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t()}).catch(function(){o(),e.$message({type:"info",message:"已取消操作"})}):t()})},baseFormChange:function(e,t,o){if("address"===e.formType&&this.baseForm.city&&this.baseForm.city.city){var n=this.getCityName(this.baseForm.city.city);this.typeCity!=n&&(this.typeCity=n,this.baseForm.houseType="",this.typeList=[],this.getSchemeType(n))}else"houseType"===e.field&&o&&this.getSchemeTypeDetail(o)},getSchemeTypeDetail:function(e){var t=this;Object(c.n)({cityId:this.typeCity,hujiId:e}).then(function(e){var o={},n=document.createElement("html");n.innerHTML=e.data;var r=n.getElementsByTagName("tr");if(r){var a={1:"defaultAmount",5:"corporateProportion",6:"personalProportion",7:"corporateAmount",8:"personalAmount"};Array.prototype.slice.call(r,0).forEach(function(e){if(e.children&&e.children.length&&"TD"==e.children[0].nodeName){var n=Array.prototype.slice.call(e.children,0),r=n[0],i=t.getSysSchemeTypeValue(r.innerText);if(i){for(var l={},s=0;s<n.length;s++){var c=n[s];a[s]&&(l[a[s]]=c.innerText.replace("%",""))}o[i]=l}}}),t.typeDetail=o}else t.typeDetail=null;t.handleOtherFrom(t.typeDetail)}).catch(function(){})},handleOtherFrom:function(e){var t=this;e?(this.otherFrom.topList.forEach(function(o){var n=e[o.type];n?(o.corporateAmount=n.corporateAmount,o.corporateProportion=n.corporateProportion,o.defaultAmount=n.defaultAmount,o.personalAmount=n.personalAmount,o.personalProportion=n.personalProportion):t.handleItemDefault(o)}),this.otherFrom.bottomList.forEach(function(o){var n=e[o.type];n?(o.corporateAmount=n.corporateAmount,o.corporateProportion=n.corporateProportion,o.defaultAmount=n.defaultAmount,o.personalAmount=n.personalAmount,o.personalProportion=n.personalProportion):t.handleItemDefault(o)})):(this.otherFrom.topList.forEach(function(e){t.handleItemDefault(e)}),this.otherFrom.bottomList.forEach(function(e){t.handleItemDefault(e)})),this.otherFrom.leftList=[],this.otherFrom.leftFundList=[],this.otherFrom.rightList=[],this.otherFrom.rightFundList=[]},handleItemDefault:function(e){e.corporateAmount=0,e.corporateProportion=0,e.defaultAmount=0,e.personalAmount=0,e.personalProportion=0},getSysSchemeTypeValue:function(e){return{"养老保险":1,"医疗保险":2,"工伤保险":3,"失业保险":4,"生育保险":5,"大病/补充/大额医疗":6,"残保金":8,"住房公积金":10}[e]},getCityName:function(e){var t=e.indexOf("城区");-1!=t&&e.length-2==t&&(e=e.substr(0,e.length-2));var o=e.indexOf("市");return-1!=o&&e.length-1==o&&(e=e.substr(0,e.length-1)),e},getSchemeType:function(e){var t=this;Object(c.o)({cityId:e}).then(function(e){var o=e.data||"";if(-1==o.indexOf("html")){var n=[];o.split(",").forEach(function(e){if(e){var t=e.split("|");t&&t.length>1&&n.push({label:t[1],value:t[1]})}}),t.typeList=n}else t.typeList=[]}).catch(function(){})}}},y=(o("sIVf"),o("KHd+")),b=Object(y.a)(f,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("xr-create",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:e.title},on:{afterEnter:e.afterEnter,close:e.close,save:e.saveClick}},[o("create-sections",{attrs:{title:"基本信息"}},[o("wk-form",{ref:"baseForm",attrs:{model:e.baseForm,rules:e.baseRules,"field-from":e.baseForm,"field-list":e.baseFields,"label-position":"top"},on:{change:e.baseFormChange}})],1),e._v(" "),o("el-radio-group",{on:{change:e.tabChange},model:{value:e.baseForm.schemeType,callback:function(t){e.$set(e.baseForm,"schemeType",t)},expression:"baseForm.schemeType"}},e._l(e.tabList,function(t){return o("el-radio-button",{key:t.name,attrs:{label:t.name}},[e._v("\n      "+e._s(t.label)+"\n    ")])})),e._v(" "),e.otherFrom?o("el-form",{ref:"otherFrom",attrs:{model:e.otherFrom,"validate-on-rule-change":!1,"hide-required-asterisk":""}},[o("create-sections",{attrs:{title:"社保"}},[o("div",{staticClass:"table-wrap"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.otherFrom.topList,"summary-method":e.getSummaries,"show-summary":""}},[o("el-table-column",{attrs:{"min-width":150,fixed:"",prop:"projectName",label:"项目名称","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[9==t.row.type||11==t.row.type?o("el-form-item",{attrs:{prop:"topList["+t.$index+"].projectName",rules:{required:!0,message:"请输入",trigger:"change"},label:""}},[o("el-input",{attrs:{placeholder:"请输入",type:"text"},model:{value:t.row.projectName,callback:function(o){e.$set(t.row,"projectName",o)},expression:"scope.row.projectName"}})],1):e._e(),e._v(" "),[e._v(e._s(e.getProjectName(t.row.type)))]]}}])}),e._v(" "),e._l(e.tableFields,function(t,n){return o("el-table-column",{key:n,attrs:{prop:t.prop,label:t.label,"min-width":150,"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-form-item",{attrs:{prop:"topList["+t.$index+"]["+t.column.property+"]",rules:{required:!0,message:"请输入",trigger:"change"},label:""}},[o("el-input",{directives:[{name:"wk-number",rawName:"v-wk-number",value:e.getNumberType(t.column.property),expression:"getNumberType(scope.column.property)"}],attrs:{disabled:e.getLeftInputDisabledValue(t.column.property),placeholder:"请输入",type:"text"},on:{input:function(o){e.numberInputChange(t.row)}},model:{value:t.row[t.column.property],callback:function(o){e.$set(t.row,t.column.property,o)},expression:"scope.row[scope.column.property]"}},[e.getLeftInputAppendShowValue(t.column.property)?o("template",{slot:"append"},[e._v("%")]):e._e()],2)],1)]}}])})}),e._v(" "),o("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text"},on:{click:function(o){e.deleteItems(t.$index,e.otherFrom.topList)}}},[e._v("删除")])]}}])})],2),e._v(" "),o("el-dropdown",{ref:"topDropdown",attrs:{"hide-on-click":!1,trigger:"click"},on:{command:function(t){e.dropdownCommand(t,e.otherFrom.topList,"top")}}},[o("el-button",{attrs:{type:"text"}},[e._v("添加项目")]),e._v(" "),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e._l(e.getHandleOptions("top",e.otherFrom.topList),function(t,n){return o("el-dropdown-item",{key:n,attrs:{command:t.value},on:{click:function(e){e.stopPropagation()}}},[o("el-checkbox",{on:{change:function(o){e.checkboxChange(o,t.value,e.otherFrom.topList)}},model:{value:t.checked,callback:function(o){e.$set(t,"checked",o)},expression:"item.checked"}},[e._v(e._s(t.label))])],1)}),e._v(" "),o("el-dropdown-item",{attrs:{command:"other",icon:"el-icon-plus",divided:""}},[e._v("其他")])],2)],1)],1)]),e._v(" "),o("create-sections",{attrs:{title:"公积金"}},[o("div",{staticClass:"table-wrap"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.otherFrom.bottomList,"summary-method":e.getSummaries,"show-summary":""}},[o("el-table-column",{attrs:{"min-width":150,fixed:"",prop:"projectName",label:"项目名称","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[9==t.row.type||11==t.row.type?o("el-form-item",{attrs:{prop:"bottomList["+t.$index+"].projectName",rules:{required:!0,message:"请输入",trigger:"change"},label:""}},[o("el-input",{attrs:{placeholder:"请输入",type:"text"},model:{value:t.row.projectName,callback:function(o){e.$set(t.row,"projectName",o)},expression:"scope.row.projectName"}})],1):e._e(),e._v(" "),[e._v(e._s(e.getProjectName(t.row.type)))]]}}])}),e._v(" "),e._l(e.tableFields,function(t,n){return o("el-table-column",{key:n,attrs:{prop:t.prop,label:t.label,"min-width":150,"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-form-item",{attrs:{prop:"bottomList["+t.$index+"]["+t.column.property+"]",rules:{required:!0,message:"请输入",trigger:"change"},label:""}},[o("el-input",{directives:[{name:"wk-number",rawName:"v-wk-number",value:e.getNumberType(t.column.property),expression:"getNumberType(scope.column.property)"}],attrs:{disabled:e.getLeftInputDisabledValue(t.column.property),placeholder:"请输入",type:"text"},on:{input:function(o){e.numberInputChange(t.row)}},model:{value:t.row[t.column.property],callback:function(o){e.$set(t.row,t.column.property,o)},expression:"scope.row[scope.column.property]"}},[e.getLeftInputAppendShowValue(t.column.property)?o("template",{slot:"append"},[e._v("%")]):e._e()],2)],1)]}}])})}),e._v(" "),o("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text"},on:{click:function(o){e.deleteItems(t.$index,e.otherFrom.bottomList)}}},[e._v("删除")])]}}])})],2),e._v(" "),o("el-dropdown",{ref:"bottomDropdown",attrs:{"hide-on-click":!1,trigger:"click"},on:{command:function(t){e.dropdownCommand(t,e.otherFrom.bottomList,"bottom")}}},[o("el-button",{attrs:{type:"text"}},[e._v("添加项目")]),e._v(" "),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e._l(e.getHandleOptions("bottom",e.otherFrom.bottomList),function(t,n){return o("el-dropdown-item",{key:n,attrs:{command:t.value},on:{click:function(e){e.stopPropagation()}}},[o("el-checkbox",{on:{change:function(o){e.checkboxChange(o,t.value,e.otherFrom.bottomList)}},model:{value:t.checked,callback:function(o){e.$set(t,"checked",o)},expression:"item.checked"}},[e._v(e._s(t.label))])],1)}),e._v(" "),o("el-dropdown-item",{attrs:{command:"other",icon:"el-icon-plus",divided:""}},[e._v("其他")])],2)],1)],1)])],1):e._e()],1)},[],!1,null,"13f74fd0",null);b.options.__file="Create.vue";var g=b.exports,v={name:"InsuranceScheme",components:{XrHeader:r.a,InsuranceSchemeCreate:g},mixins:[],data:function(){return{loading:!1,tableHeight:document.documentElement.clientHeight-196,createViewShow:!1,createId:"",list:[],fieldList:[{fieldName:"schemeName",name:"方案名称",width:80},{fieldName:"city",name:"参保城市",width:80},{fieldName:"personalInsuranceAmount",name:"个人社保",width:80},{fieldName:"corporateInsuranceAmount",name:"公司社保",width:80},{fieldName:"personalProvidentFundAmount",name:"个人公积金",width:80},{fieldName:"corporateProvidentFundAmount",name:"公司公积金",width:80},{fieldName:"useCount",name:"使用人数",width:80}]}},computed:{},mounted:function(){var e=this;window.onresize=function(){e.tableHeight=document.documentElement.clientHeight-196},this.getList()},methods:{getList:function(){var e=this;this.loading=!0,Object(n.d)({pageType:0}).then(function(t){e.list=t.data.list,e.loading=!1}).catch(function(){e.loading=!1})},createClick:function(){this.createId="",this.createViewShow=!0},handleRowClick:function(e,t,o){},handleClick:function(e,t){var o=this;"edit"===e?(this.createId=t.row.schemeId,this.createViewShow=!0):"delete"===e&&this.$confirm("您确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.b)(t.row.schemeId).then(function(e){o.list.splice(t.$index,1),o.$message({type:"success",message:"操作成功"})}).catch(function(){})}).catch(function(){o.$message({type:"info",message:"已取消删除"})})}}},F=(o("XMdL"),Object(y.a)(v,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"insurance-scheme main"},[o("xr-header",{attrs:{"icon-class":"wk wk-project","icon-color":"#33D08F",label:"社保方案管理"}}),e._v(" "),o("div",{staticClass:"main-body"},[o("div",{staticClass:"main-table-header"},[o("el-button",{staticClass:"main-table-header-button xr-btn--orange",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.createClick}},[e._v("新建参保方案")])],1),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"main-table",staticStyle:{width:"100%"},attrs:{data:e.list,height:e.tableHeight,"highlight-current-row":""},on:{"row-click":e.handleRowClick}},[e._l(e.fieldList,function(e,t){return o("el-table-column",{key:t,attrs:{prop:e.fieldName,label:e.name,"min-width":e.width,"show-overflow-tooltip":""}})}),e._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{disabled:2==t.row.label,type:"text",size:"small"},on:{click:function(o){e.handleClick("edit",t)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{disabled:5==t.row.roleType,type:"text",size:"small"},on:{click:function(o){e.handleClick("delete",t)}}},[e._v("删除")])]}}])})],2)],1),e._v(" "),e.createViewShow?o("insurance-scheme-create",{attrs:{id:e.createId},on:{success:e.getList,close:function(t){e.createViewShow=!1}}}):e._e()],1)},[],!1,null,"6baa1077",null));F.options.__file="index.vue";t.default=F.exports},zIzm:function(e,t,o){"use strict";var n=o("ihDC");o.n(n).a},zMw6:function(e,t,o){"use strict";o.d(t,"j",function(){return r}),o.d(t,"m",function(){return a}),o.d(t,"c",function(){return i}),o.d(t,"i",function(){return l}),o.d(t,"h",function(){return s}),o.d(t,"l",function(){return c}),o.d(t,"k",function(){return u}),o.d(t,"n",function(){return d}),o.d(t,"g",function(){return p}),o.d(t,"f",function(){return m}),o.d(t,"o",function(){return h}),o.d(t,"d",function(){return f}),o.d(t,"e",function(){return y}),o.d(t,"a",function(){return b}),o.d(t,"b",function(){return g}),o.d(t,"u",function(){return v}),o.d(t,"w",function(){return F}),o.d(t,"x",function(){return w}),o.d(t,"v",function(){return T}),o.d(t,"A",function(){return C}),o.d(t,"B",function(){return k}),o.d(t,"y",function(){return x}),o.d(t,"z",function(){return _}),o.d(t,"p",function(){return j}),o.d(t,"q",function(){return L}),o.d(t,"r",function(){return I}),o.d(t,"s",function(){return O}),o.d(t,"t",function(){return S});var n=o("t3Un");function r(e){return Object(n.a)({url:"hrmConfig/queryRecruitChannelList",method:"post",data:e})}function a(e){return Object(n.a)({url:"hrmConfig/saveRecruitChannel",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function i(e){return Object(n.a)({url:"hrmConfig/deleteRecruitChannel",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(n.a)({url:"hrmConfig/queryFields",method:"post",data:e})}function s(e){return Object(n.a)({url:"hrmConfig/queryFieldByLabel/"+e,method:"post"})}function c(e){return Object(n.a)({url:"hrmConfig/saveField",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(e){return Object(n.a)({url:"hrmConfig/queryRecruitEliminateList",method:"post",data:e})}function d(e){return Object(n.a)({url:"hrmConfig/saveRecruitEliminate",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function p(e){return Object(n.a)({url:"hrmConfig/queryAchievementTableList",method:"post",data:e})}function m(e){return Object(n.a)({url:"hrmConfig/queryAchievementTableById/"+e,method:"post"})}function h(e){return Object(n.a)({url:"hrmConfig/setAchievementTable",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function f(e){return Object(n.a)({url:"hrmConfig/queryInsuranceSchemePageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function y(e){return Object(n.a)({url:"hrmConfig/queryInsuranceSchemeById/"+e,method:"post"})}function b(e){return Object(n.a)({url:"hrmConfig/addInsuranceScheme",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function g(e){return Object(n.a)({url:"hrmConfig/deleteInsuranceScheme/"+e,method:"post"})}function v(e){return Object(n.a)({url:"hrmSalaryGroup/addSalaryGroup",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function F(e){return Object(n.a)({url:"hrmSalaryGroup/querySalaryGroupPageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function w(e){return Object(n.a)({url:"hrmSalaryGroup/setSalaryGroup",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function T(e){return Object(n.a)({url:"hrmSalaryGroup/delete/"+e,method:"post"})}function C(e){return Object(n.a)({url:"hrmSalaryTaxRule/queryTaxRuleList",method:"post",data:e})}function k(e){return Object(n.a)({url:"hrmSalaryTaxRule/setTaxRule",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function x(e){return Object(n.a)({url:"hrmSalaryOption/querySalaryOptionDetail",method:"post",data:e})}function _(e){return Object(n.a)({url:"hrmSalaryOption/setSalaryOption",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function j(){return Object(n.a)({url:"hrmEmployeeArchives/queryEmployeeArchivesField",method:"post"})}function L(e){return Object(n.a)({url:"hrmEmployeeArchives/sendWriteArchives",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function I(e){return Object(n.a)({url:"hrmEmployeeArchives/setEmployeeArchivesField",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function O(e){return Object(n.a)({url:"hrmEmployeeFieldManage/queryEmployeeManageField",method:"post",data:e})}function S(e){return Object(n.a)({url:"hrmEmployeeFieldManage/setEmployeeManageField",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}}}]);