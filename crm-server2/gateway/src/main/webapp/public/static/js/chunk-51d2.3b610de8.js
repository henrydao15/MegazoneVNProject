(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-51d2"],{"+J2V":function(t,e,a){"use strict";var i=a("VU5o");a.n(i).a},"/SD7":function(t,e,a){"use strict";var i=a("hxdy");a.n(i).a},"2yr3":function(t,e,a){"use strict";var i=a("ZngT");a.n(i).a},"4+vA":function(t,e,a){},"5uNU":function(t,e,a){"use strict";var i=a("bDG9");a.n(i).a},"63W0":function(t,e,a){"use strict";var i=a("4+vA");a.n(i).a},El9w:function(t,e,a){"use strict";var i=a("dukW");a.n(i).a},GfDF:function(t,e,a){"use strict";var i=a("uCc8");a.n(i).a},KFlF:function(t,e,a){"use strict";var i=a("rE8M");a.n(i).a},PwLV:function(t,e,a){"use strict";var i={name:"WkFileSelect",components:{},props:{name:{type:String,default:"file"},disabled:Boolean,multiple:Boolean,accept:{type:String,default:"*.*"}},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{handleChange:function(t){var e=t.target.files;e&&this.$emit("change",e,t)},handleClick:function(){var t=this;this.disabled||this.$wkFile.select({name:this.name,multiple:this.multiple,accept:this.accept}).then(function(e){t.handleChange(e)})}}},n=(a("El9w"),a("KHd+")),l=Object(n.a)(i,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"wk-file-select",on:{click:this.handleClick}},[this._t("default")],2)},[],!1,null,"b95eaae0",null);l.options.__file="index.vue";e.a=l.exports},Q9Cd:function(t,e,a){"use strict";var i=a("SDBt");a.n(i).a},SDBt:function(t,e,a){},VJAa:function(t,e,a){},VU5o:function(t,e,a){},ZngT:function(t,e,a){},bDG9:function(t,e,a){},dukW:function(t,e,a){},hxdy:function(t,e,a){},"ixM/":function(t,e,a){"use strict";a.d(e,"c",function(){return c}),a.d(e,"g",function(){return u}),a.d(e,"a",function(){return d}),a.d(e,"f",function(){return h}),a.d(e,"d",function(){return f}),a.d(e,"e",function(){return m}),a.d(e,"b",function(){return p});var i=a("GQeE"),n=a.n(i),l=a("7Qib"),o=a("a/5N"),s=a("cHj4"),r=a("D0zU");var c={fields:[{name:"学历",field:"education",formType:"select",setting:[{label:"小学",value:1},{label:"初中",value:2},{label:"中专",value:3},{label:"中职",value:4},{label:"中技",value:5},{label:"高中",value:6},{label:"大专",value:7},{label:"本科",value:8},{label:"硕士",value:9},{label:"博士",value:10},{label:"博士后",value:11},{label:"其他",value:12}]},{name:"毕业院校",field:"graduateSchool",formType:"text",setting:[]},{name:"专业",field:"major",formType:"text",setting:[]},{name:"入学时间",field:"admissionTime",formType:"date",setting:[]},{name:"毕业时间",field:"graduationTime",formType:"date",setting:[]},{name:"教学方式",field:"teachingMethods",formType:"select",setting:[{label:"全日制",value:1},{label:"成人教育",value:2},{label:"远程教育",value:3},{label:"自学考试",value:4},{label:"其他",value:5}]},{name:"是否第一学历",field:"isFirstDegree",formType:"radio",setting:[{label:"否",value:0},{label:"是",value:1}]}],rules:{education:[{required:!0,message:"请选择",trigger:["blur","change"]}],graduateSchool:[{required:!0,message:"请输入",trigger:["blur","change"]}],major:[{required:!0,message:"请输入",trigger:["blur","change"]}],isFirstDegree:[{required:!0,message:"请选择",trigger:["blur","change"]}]},educationValue:{1:"小学",2:"初中",3:"中专",4:"中职",5:"中技",6:"高中",7:"大专",8:"本科",9:"硕士",10:"博士",11:"博士后",12:"其他"},teachingMethodsValue:{1:"全日制",2:"成人教育",3:"远程教育",4:"自学考试",5:"其他"},isFirstDegreeValue:{1:"是",0:"否"}},u={fields:[{name:"工作单位",field:"workUnit",formType:"text",setting:[]},{name:"职务",field:"post",formType:"text",setting:[]},{name:"工作开始时间",field:"workStartTime",formType:"date",setting:[]},{name:"工作结束时间",field:"workEndTime",formType:"date",setting:[]},{name:"离职原因",field:"leavingReason",formType:"text",setting:[]},{name:"证明人",field:"witness",formType:"text",setting:[]},{name:"证明人电话",field:"witnessPhone",formType:"mobile",setting:[]},{name:"工作备注",field:"workRemarks",formType:"text",setting:[]}],rules:{workUnit:[{required:!0,message:"请输入",trigger:["blur","change"]}],post:[{required:!0,message:"请输入",trigger:["blur","change"]}],witnessPhone:[{validator:function(t,e,a){Object(o.b)(e)||Object(l.y)(e)?a():a(new Error("手机格式有误"))},trigger:["blur","change"]}]}},d={fields:[{name:"证书名称",field:"certificateName",formType:"text",setting:[]},{name:"证书级别",field:"certificateLevel",formType:"text",setting:[]},{name:"证书/证件编号",field:"certificateNum",formType:"text",setting:[]},{name:"有效期起始日期",field:"startTime",formType:"date",setting:[]},{name:"有效期到期日",field:"endTime",formType:"date",setting:[]},{name:"发证机构",field:"issuingAuthority",formType:"text",setting:[]},{name:"发证日期",field:"issuingTime",formType:"date",setting:[]},{name:"证件备注",field:"remarks",formType:"text",setting:[]}],rules:{certificateName:[{required:!0,message:"请输入",trigger:["blur","change"]}]}},h={fields:[{name:"培训课程",field:"trainingCourse",formType:"text",setting:[]},{name:"培训机构名称",field:"trainingOrganName",formType:"text",setting:[]},{name:"培训开始时间",field:"startTime",formType:"date",setting:[]},{name:"培训结束时间",field:"endTime",formType:"date",setting:[]},{name:"培训时长",field:"trainingDuration",formType:"number",setting:[]},{name:"培训成绩",field:"trainingResults",formType:"text",setting:[]},{name:"培训证书名称",field:"trainingCertificateName",formType:"text",setting:[]},{name:"培训备注",field:"remarks",formType:"textarea",setting:[]}],rules:{trainingCourse:[{required:!0,message:"请输入",trigger:["blur","change"]}]}},f={sexValue:{1:"男",2:"女"},birthdayTypeValue:{1:"阳历",2:"农历"},idTypeValue:{1:"身份证",2:"港澳通行证",3:"台湾通行证",4:"护照",5:"其他"},employmentFormsValue:{1:"正式",2:"非正式"},probationValue:{0:"无试用期",1:"1个月",2:"2个月",3:"3个月",4:"4个月",5:"5个月",6:"6个月"},statusValue:{1:"正式",2:"试用",3:"实习",4:"兼职",5:"劳务",6:"顾问",7:"返聘",8:"外包",11:"在职",12:"全职",13:"待入职",14:"待离职",15:"已离职"},validStatusValue:{1:"正式",2:"试用",3:"实习",4:"兼职",5:"劳务",6:"顾问",7:"返聘",8:"外包"},getValueList:function(t){return n()(t).map(function(e){return{label:t[e],value:parseInt(e)}})},sexSetting:[{label:"男",value:1},{label:"女",value:2}],idTypeSetting:[{label:"身份证",value:1},{label:"港澳通行证",value:2},{label:"台湾通行证",value:3},{label:"护照",value:4},{label:"其他",value:5}],employmentFormsSetting:[{label:"正式",value:1},{label:"非正式",value:2}],probationSetting:[{label:"无试用期",value:0},{label:"1个月",value:1},{label:"2个月",value:2},{label:"3个月",value:3},{label:"4个月",value:4},{label:"5个月",value:5},{label:"6个月",value:6}],statusSetting:[{label:"实习",value:3},{label:"兼职",value:4},{label:"劳务",value:5},{label:"顾问",value:6},{label:"返聘",value:7},{label:"外包",value:8}]},m={fields:[{name:"部门",field:"newDept",formType:"structure",props:{dataType:"hrm"},request:r.e,setting:[]},{name:"岗位",field:"newPost",formType:"text",setting:[]},{name:"直属上级",field:"newParentId",formType:"user",props:{label:"employeeName",value:"employeeId"},request:s.i,setting:[]},{name:"计划转正日期",field:"becomeTime",formType:"text",disabled:!0,setting:[]},{name:"实际转正日期",field:"effectTime",formType:"date",setting:[]},{name:"备注",field:"remarks",formType:"textarea",setting:[]}],rules:{effectTime:[{required:!0,message:"请选择",trigger:["blur","change"]}]}};var p={fieldsFunc:function(t,e){var a=[{label:"调岗",value:5},{label:"晋升",value:6},{label:"降级",value:7}];3!=e&&4!=e||a.push({label:"转为全职员工",value:8});var i=[{name:"异动类型",field:"changeType",formType:"select",setting:a},{name:"异动原因",field:"changeReason",formType:"select",setting:7==t?[{label:"违规违纪",value:4},{label:"绩效不达标",value:5},{label:"个人身体原因",value:6},{label:"不适应当前岗位",value:7}]:[{label:"组织架构调整",value:1},{label:"个人申请",value:2},{label:"工作安排",value:3}]}];return 8==t&&(i=i.concat([{name:"入职日期",field:"entryTime",formType:"date",disabled:!0,setting:[]},{name:"试用期",field:"probation",formType:"select",setting:[{label:"无试用期",value:0},{label:"1个月",value:1},{label:"2个月",value:2},{label:"3个月",value:3},{label:"4个月",value:4},{label:"5个月",value:5},{label:"6个月",value:6}]}])),i.concat([{name:"原部门",field:"oldDept",formType:"structure",disabled:!0,props:{dataType:"hrm"},request:r.e,setting:[]},{name:"变更为",field:"newDept",formType:"structure",props:{dataType:"hrm"},request:r.e,setting:[]},{name:"原岗位",field:"oldPost",formType:"text",disabled:!0,setting:[]},{name:"变更为",field:"newPost",formType:"text",setting:[]},{name:"原岗位职级",field:"oldPostLevel",disabled:!0,formType:"text",setting:[]},{name:"变更为",field:"newPostLevel",formType:"text",setting:[]},{name:"原工作地点",field:"oldWorkAddress",formType:"text",disabled:!0,setting:[]},{name:"变更为",field:"newWorkAddress",formType:"text",setting:[]},{name:"生效日期",field:"effectTime",formType:"date",setting:[]},{name:"备注",field:"remarks",formType:"textarea",setting:[]}])},rules:{effectTime:[{required:!0,message:"请选择",trigger:["blur","change"]}]}}},jzeO:function(t,e,a){"use strict";var i={name:"Reminder",components:{},props:{closeShow:{type:Boolean,default:!1},content:{type:String,default:"内容"},fontSize:{type:String,default:"13"}},data:function(){return{}},computed:{},mounted:function(){},destroyed:function(){},methods:{close:function(){this.$emit("close")}}},n=(a("/SD7"),a("KHd+")),l=Object(n.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("flexbox",{staticClass:"reminder-wrapper"},[a("flexbox",{staticClass:"reminder-body",attrs:{align:"stretch"}},[a("i",{staticClass:"wk wk-warning reminder-icon"}),t._v(" "),a("div",{staticClass:"reminder-content",style:{"font-size":t.fontSize+"px"},domProps:{innerHTML:t._s(t.content)}}),t._v(" "),t._t("default"),t._v(" "),t.closeShow?a("i",{staticClass:"el-icon-close close",on:{click:t.close}}):t._e()],2)],1)},[],!1,null,"d9a726d6",null);l.options.__file="Reminder.vue";e.a=l.exports},mTF4:function(t,e,a){"use strict";a.r(e);var i=a("4d7F"),n=a.n(i),l=a("GQeE"),o=a.n(l),s=a("QbLZ"),r=a.n(s),c=a("+hK9"),u=a("IzaY"),d=a("D0zU"),h=a("9GgJ"),f=a("jpO5"),m=a("kBEL"),p=a("TAjm"),g=a("nboU"),v={name:"MonthSetDialog",components:{},mixins:[g.a],props:{detail:Object,visible:{type:Boolean,required:!0,default:!1}},data:function(){return{loading:!1,title:"设置薪酬起始月份",rules:{salaryStartMonth:[{required:!0,message:"请选择",trigger:"blur"}]},form:{}}},computed:{},watch:{visible:{handler:function(t){t&&(this.form={salaryStartMonth:""})},immediate:!0}},mounted:function(){},methods:{handleCancel:function(){this.$router.go(-1),this.close()},close:function(){this.$emit("update:visible",!1)},handleConfirm:function(){var t=this;this.$refs.monthForm.validate(function(e){e&&(t.loading=!0,Object(u.c)(t.form).then(function(e){t.$message.success("操作成功");var a=t.form.salaryStartMonth.split("-");t.$emit("change",a[0],a[1]),t.close(),t.loading=!1}).catch(function(){t.loading=!1}))})}}},b=(a("t69r"),a("KHd+")),y=Object(b.a)(v,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{ref:"wkDialog",attrs:{visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,title:t.title,"show-close":!1,width:"500px"}},[a("div",{staticClass:"form-add-dialog-body"},[a("el-form",{ref:"monthForm",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"起始月份",prop:"salaryStartMonth"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",type:"month",format:"yyyy-MM","value-format":"yyyy-MM",placeholder:"选择日期"},model:{value:t.form.salaryStartMonth,callback:function(e){t.$set(t.form,"salaryStartMonth",e)},expression:"form.salaryStartMonth"}})],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){return t.handleCancel(e)}}},[t._v("取消")]),t._v(" "),a("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:t.handleConfirm,expression:"handleConfirm"}],attrs:{type:"primary"}},[t._v("保存")])],1)])},[],!1,null,"1948cc6e",null);y.options.__file="MonthSetDialog.vue";var w=y.exports,_=a("jzeO"),x={name:"OpenSetDialog",components:{Reminder:_.a},mixins:[g.a],props:{detail:Object,visible:{type:Boolean,required:!0,default:!1}},data:function(){return{loading:!1,title:"开启工资设置",form:{},cycleOptions:[],monthTypeOptions:[{label:"上月",value:0},{label:"当月",value:1},{label:"次月",value:2}]}},computed:{},watch:{visible:{handler:function(t){t&&(this.detail?this.form={salaryCycleStartDay:this.detail.salaryCycleStartDay||1,socialSecurityMonthType:this.detail.socialSecurityMonthType||0}:this.form={salaryCycleStartDay:1,socialSecurityMonthType:0})},immediate:!0}},created:function(){for(var t=1;t<=31;t++)this.cycleOptions.push(t)},methods:{handleCancel:function(){this.$router.go(-1),this.close()},close:function(){this.$emit("update:visible",!1)},getSalaryCycleEndDay:function(){return 1==this.form.salaryCycleStartDay?31:this.form.salaryCycleStartDay-1},getSalaryCycleEndDayDes:function(){var t=this.getSalaryCycleEndDay();return"至"+(31===t?"当月":"次月")+t+"号"},handleConfirm:function(){var t=this;this.$refs.openForm.validate(function(e){e&&(t.loading=!0,t.form.salaryCycleEndDay=t.getSalaryCycleEndDay(),Object(u.c)(t.form).then(function(e){t.$emit("change",t.form),t.close(),t.loading=!1}).catch(function(){t.loading=!1}))})}}},C=(a("63W0"),Object(b.a)(x,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{ref:"wkDialog",attrs:{visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,title:t.title,"show-close":!1,width:"500px"}},[a("div",{staticClass:"form-add-dialog-body"},[a("reminder",{staticStyle:{"margin-bottom":"10px"},attrs:{content:"计薪周期设置后将不可修改"}}),t._v(" "),a("el-form",{ref:"openForm",attrs:{model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"计薪周期"}},[a("span",[t._v("当月")]),t._v(" "),a("el-select",{model:{value:t.form.salaryCycleStartDay,callback:function(e){t.$set(t.form,"salaryCycleStartDay",e)},expression:"form.salaryCycleStartDay"}},t._l(t.cycleOptions,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})})),t._v(" "),a("span",[t._v(t._s(t.getSalaryCycleEndDayDes()))]),t._v(" "),a("el-tooltip",{attrs:{content:"计薪周期设定后将不可修改",effect:"dark",placement:"top"}},[a("i",{staticClass:"wk wk-help wk-help-tips"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"对应社保自然月"}},[a("el-select",{staticStyle:{"margin-left":"0"},model:{value:t.form.socialSecurityMonthType,callback:function(e){t.$set(t.form,"socialSecurityMonthType",e)},expression:"form.socialSecurityMonthType"}},t._l(t.monthTypeOptions,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("el-tooltip",{attrs:{content:"请根据你工资报表月份对应的社保报表月份进行选择，例如工资报表为6月，如果要对应5月的社保报表，则选择上月",effect:"dark",placement:"top"}},[a("i",{staticClass:"wk wk-help wk-help-tips"})])],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){return t.handleCancel(e)}}},[t._v("取消")]),t._v(" "),a("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:t.handleConfirm,expression:"handleConfirm"}],attrs:{type:"primary"}},[t._v("保存")])],1)])},[],!1,null,"281443f1",null));C.options.__file="OpenSetDialog.vue";var S=C.exports,k=a("PwLV"),D=a("7Qib"),T={name:"ComputeSetDialog",components:{WkFileSelect:k.a},mixins:[g.a],props:{lastData:Object,visible:{type:Boolean,required:!0,default:!1}},data:function(){return{loading:!1,title:"核算工资",number:0,form:{},file:null,lastMonthFile:null,additionalFile:null}},computed:{},watch:{visible:{handler:function(t){t&&(this.number=0,this.file=null,this.lastMonthFile=null,this.additionalFile=null,this.form={isSyncInsuranceData:!0},this.getNum())},immediate:!0}},mounted:function(){},methods:{handleCancel:function(){this.$emit("update:visible",!1)},getNum:function(){var t=this;Object(c.G)(1).then(function(e){t.number=e.data||0}).catch(function(){})},getAttendanceBtnName:function(){return this.file?this.file.name:"导入考勤数据"},getLastMonthBtnName:function(){return this.lastMonthFile?this.lastMonthFile.name:"导入截止上月个税累计"},getAdditionalBtnName:function(){return this.additionalFile?this.additionalFile.name:"导入专项附加扣除累计"},fileSelect:function(t,e,a){if(t.length){var i=t[0];Object(D.F)(i.name)&&("attendance"===a?this.file=i:"additional"===a?this.additionalFile=i:"lastMonth"===a&&(this.lastMonthFile=i))}e.target.value=""},downloadTemp:function(t){(0,{attendance:c.w,additional:c.u,lastMonth:c.v}[t])().then(function(t){Object(D.c)(t)}).catch(function(){})},handleConfirm:function(){var t=this;this.loading=!0,this.file&&(this.form.attendanceFile=this.file),this.lastMonthFile&&(this.form.cumulativeTaxOfLastMonthFile=this.lastMonthFile),this.additionalFile&&(this.form.additionalDeductionFile=this.additionalFile),this.form.srecordId=this.lastData.srecordId,Object(c.C)(this.form).then(function(e){t.$message.success("操作成功"),t.$emit("change"),t.handleCancel(),t.loading=!1}).catch(function(){t.loading=!1})}}},L=(a("5uNU"),Object(b.a)(T,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{ref:"wkDialog",attrs:{visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,title:t.title,width:"500px"},on:{close:t.handleCancel}},[a("div",{staticClass:"form-add-dialog-body"},[a("div",[t._v("计薪人员："+t._s(t.number)+"人")]),t._v(" "),a("flexbox",{staticClass:"row"},[a("div",{staticClass:"row-mark"}),t._v(" "),a("div",{staticClass:"row-label"},[t._v("同步社保数据")]),t._v(" "),a("el-switch",{model:{value:t.form.isSyncInsuranceData,callback:function(e){t.$set(t.form,"isSyncInsuranceData",e)},expression:"form.isSyncInsuranceData"}})],1),t._v(" "),a("flexbox",{staticClass:"row"},[a("div",{staticClass:"row-mark"}),t._v(" "),a("div",{staticClass:"row-label"},[t._v("考勤数据"),a("el-button",{staticClass:"row-btn",attrs:{type:"text"},on:{click:function(e){t.downloadTemp("attendance")}}},[t._v("下载考勤导入模板")])],1),t._v(" "),a("wk-file-select",{on:{change:function(e){t.fileSelect(arguments[0],arguments[1],"attendance")}}},[a("el-button",{staticClass:"row-btn",attrs:{type:"text"}},[t._v(t._s(t.getAttendanceBtnName()))])],1)],1),t._v(" "),a("div",{staticClass:"row"},[a("flexbox",[a("div",{staticClass:"row-mark"}),t._v(" "),a("div",{staticClass:"row-label"},[t._v("录入个税扣缴信息（非累计预扣法可跳过此步骤）")])]),t._v(" "),a("flexbox",{staticClass:"row-children"},[a("div",{staticClass:"row-label"},[t._v("专项附加扣除累计"),a("el-button",{staticClass:"row-btn",attrs:{type:"text"},on:{click:function(e){t.downloadTemp("additional")}}},[t._v("下载导入模板")])],1),t._v(" "),a("wk-file-select",{on:{change:function(e){t.fileSelect(arguments[0],arguments[1],"additional")}}},[a("el-button",{staticClass:"row-btn",attrs:{type:"text"}},[t._v(t._s(t.getAdditionalBtnName()))])],1)],1),t._v(" "),a("flexbox",{staticClass:"row-children"},[a("div",{staticClass:"row-label"},[t._v("截止上月个税累计"),a("el-button",{staticClass:"row-btn",attrs:{type:"text"},on:{click:function(e){t.downloadTemp("lastMonth")}}},[t._v("下载导入模板")])],1),t._v(" "),a("wk-file-select",{on:{change:function(e){t.fileSelect(arguments[0],arguments[1],"lastMonth")}}},[a("el-button",{staticClass:"row-btn",attrs:{type:"text"}},[t._v(t._s(t.getLastMonthBtnName()))])],1)],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){return t.handleCancel(e)}}},[t._v("取消")]),t._v(" "),a("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:t.handleConfirm,expression:"handleConfirm"}],attrs:{type:"primary"}},[t._v("保存")])],1)])},[],!1,null,"3944cd92",null));L.options.__file="ComputeSetDialog.vue";var O=L.exports,j={name:"BatchEditView",components:{},filters:{},props:{fieldList:Array,params:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,tableHeight:document.documentElement.clientHeight-100,list:[]}},computed:{},created:function(){this.getList()},mounted:function(){var t=this;this.$el.style.zIndex=Object(D.q)(),document.body.appendChild(this.$el),window.onresize=function(){t.tableHeight=document.documentElement.clientHeight-100}},destroyed:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},methods:{getList:function(){var t=this;this.loading=!0,Object(c.F)(r()({},this.params,{pageType:0})).then(function(e){var a=[];e.data.list.forEach(function(t){var e=t.salary||[],i={sempRecordId:t.sempRecordId,employeeName:t.employeeName,jobNumber:t.jobNumber,deptName:t.deptName,post:t.post};e.forEach(function(t){i[t.code]=t.value}),a.push(i)}),t.list=a,t.loading=!1}).catch(function(){t.loading=!1})},handleClick:function(t){var e=this;if("cancel"==t)this.$confirm("确定放弃编辑并退出, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$emit("close")}).catch(function(){e.$message({type:"info",message:"已取消操作"})});else{this.loading=!0;var a=[],i=this.fieldList.filter(function(t){return t.isFixed});this.list.forEach(function(t){var e=Object(D.w)(t),n=e.sempRecordId;delete e.sempRecordId,delete e.employeeName,delete e.jobNumber,delete e.deptName,delete e.post,i.forEach(function(t){delete e[t.field]}),a.push({sempRecordId:n,salaryValues:e})}),Object(c.K)(a).then(function(t){e.$emit("change"),e.$message.success("操作成功"),e.loading=!1,e.$emit("close")}).catch(function(){e.loading=!1})}},cellStyle:function(t){t.row,t.column,t.rowIndex;return t.columnIndex<=3?{color:"#787879",backgroundColor:"#F7F8FA",textAlign:"center"}:{textAlign:"center"}},headerCellStyle:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return{textAlign:"center"}}}},E=(a("2yr3"),Object(b.a)(j,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"opacity-fade"}},[a("div",{staticClass:"edit-view"},[a("flexbox",{staticClass:"edit-header"},[a("div",{staticClass:"title"},[t._v("批量修改薪资")]),t._v(" "),a("div",{staticClass:"handle"},[a("el-button",{nativeOn:{click:function(e){t.handleClick("cancel")}}},[t._v("放弃编辑")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){t.handleClick("save")}}},[t._v("保存")])],1)]),t._v(" "),a("div",{staticClass:"edit-body"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.list,height:t.tableHeight,"cell-style":t.cellStyle,"header-cell-style":t.headerCellStyle,border:""}},t._l(t.fieldList,function(e,i){return a("el-table-column",{key:"field"+i,attrs:{label:e.name,fixed:i<=3,width:e.width,prop:e.field,"show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(n){return[i<=3||e.isFixed?[t._v(t._s(n.row[n.column.property]))]:a("el-input-number",{attrs:{controls:!1,min:0,max:1e8,precision:2},model:{value:n.row[n.column.property],callback:function(e){t.$set(n.row,n.column.property,e)},expression:"scope.row[scope.column.property]"}})]}}])})}))],1)],1)])},[],!1,null,"35f6ba5f",null));E.options.__file="BatchEditView.vue";var F=E.exports,N={name:"ExamineSubmitDialog",components:{WkApprovalFlowApply:a("shYR").a},mixins:[],props:{visible:{type:Boolean,required:!0,default:!1},data:Object},data:function(){return{list:null,title:"提交审核"}},computed:{},watch:{visible:{handler:function(t){t&&(this.list=this.data?this.data.examineFlowList:null)},immediate:!0}},mounted:function(){},methods:{handleCancel:function(){this.close()},close:function(){this.$emit("update:visible",!1)},handleConfirm:function(){this.$emit("save",this.list)}}},$=(a("GfDF"),Object(b.a)(N,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,title:t.title,"show-close":!1,width:"500px"}},[a("div",{staticClass:"form-add-dialog-body"},[t.list?a("wk-approval-flow-apply",{staticStyle:{"padding-left":"5px","padding-top":"2px"},attrs:{data:t.list}}):t._e()],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){return t.handleCancel(e)}}},[t._v("取消")]),t._v(" "),a("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:t.handleConfirm,expression:"handleConfirm"}],attrs:{type:"primary"}},[t._v("保存")])],1)])},[],!1,null,"95c5c2a0",null));$.options.__file="ExamineSubmitDialog.vue";var I=$.exports,M=a("Q5mk"),P=a("ixM/"),A={name:"NoEmployeeDialog",components:{},mixins:[g.a],props:{visible:{type:Boolean,required:!0,default:!1}},data:function(){return{loading:!1,title:"无薪资组员工列表",list:[],fieldList:[{prop:"employeeName",width:"200",label:"姓名"},{prop:"jobNumber",width:"200",label:"工号"},{prop:"deptName",width:"200",label:"部门"},{prop:"post",width:"200",label:"岗位"},{prop:"status",width:"200",label:"员工状态"},{prop:"entryTime",width:"200",label:"入职时间"}]}},computed:{},watch:{visible:{handler:function(t){t&&this.getDetail()},immediate:!0}},mounted:function(){},methods:{close:function(){this.$emit("update:visible",!1)},fieldFormatter:function(t,e){var a=P.d[e.property+"Value"];return a?a[t[e.property]]||"--":t[e.property]||"--"},getDetail:function(){var t=this;this.loading=!0,Object(c.H)().then(function(e){t.list=e.data||[],t.loading=!1}).catch(function(){t.loading=!1})}}},z=(a("+J2V"),Object(b.a)(A,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{ref:"wkDialog",attrs:{visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,title:t.title,width:"700px"},on:{close:t.close}},[a("el-table",{staticClass:"el-table-header--white",attrs:{data:t.list,height:"400px",stripe:""}},t._l(t.fieldList,function(e,i){return a("el-table-column",{key:i,attrs:{prop:e.prop,label:e.label,formatter:t.fieldFormatter,"show-overflow-tooltip":""}})}))],1)},[],!1,null,"657f4a66",null));z.options.__file="NoEmployeeDialog.vue";var B=z.exports,H=a("t2rG"),V={name:"SalarySlipCreate",components:{Draggable:a.n(H).a,WkPopoverFilter:m.a},mixins:[g.a],props:{visible:{type:Boolean,required:!0,default:!1}},data:function(){return{loading:!1,allCheckbox:!1,allIsIndeterminate:!1,templateId:"",templateData:{},templates:[],templateList:[],isNext:!1,currentPage:1,pageSize:15,pageSizes:[15,30,60,100],total:0,tableHeight:.6*document.documentElement.clientHeight-70,employeeList:[],selectionList:[],fieldList:[{name:"姓名",field:"employeeName"},{name:"工号",field:"jobNumber"},{name:"部门",field:"deptName"},{name:"岗位",field:"post"},{name:"手机号",field:"mobile"},{name:"发送状态",field:"sendStatus"}],filterList:[{name:"员工姓名",field:"employeeName",formType:"text",setting:[]},{name:"部门",field:"deptId",formType:"structure",props:{dataType:"hrm"},request:d.e,setting:[]},{name:"发送状态",field:"sendStatus",formType:"select",setting:[{label:"未发送",value:0},{label:"已发送",value:1}]}],disabledCode:240101,filterObj:{}}},computed:{hasFilterContent:function(){if(this.filterObj){for(var t=!1,e=o()(this.filterObj),a=0;a<e.length;a++){var i=e[a];""!=this.filterObj[i]&&this.filterObj[i]!=[]&&null!=this.filterObj[i]&&void 0!=this.filterObj[i]&&(t=!0)}return t}return!1}},watch:{visible:{handler:function(t){t&&(this.isNext=!1,this.currentPage=1,this.selectionList=[],this.employeeList=[],this.filterObj={},this.getTemplateList())},immediate:!0}},mounted:function(){},methods:{allChange:function(){var t=this;this.templateList.forEach(function(e){e&&e.optionList&&e.optionList.forEach(function(e){e.code!=t.disabledCode&&(e.isHide=t.allCheckbox?0:1)})})},changeAllCheckboxStatus:function(){for(var t=null,e=!1,a=0;a<this.templateList.length;a++){for(var i=this.templateList[a],n=0;n<i.optionList.length;n++){var l=i.optionList[n];if(t){if(t.isHide!=l.isHide){e=!0,this.allIsIndeterminate=!0;break}}else t=l}if(e)break}e||(this.allCheckbox=1!==t.isHide,this.allIsIndeterminate=!1)},getTemplateList:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading=!0,Object(c.V)().then(function(a){t.loading=!1,t.templates=a.data||[],e&&(t.templates.length>0?(t.templateData=t.templates[0],t.templateId=t.templateData.id):(t.templateData={},t.templateId=""),t.getTemplateDetail())}).catch(function(){t.loading=!1})},getTemplateDetail:function(){var t=this;this.loading=!0,Object(c.U)(this.templateId).then(function(e){t.loading=!1,t.templateList=e.data||[],t.changeAllCheckboxStatus()}).catch(function(){t.loading=!1})},templateChange:function(){var t=this;this.templateData=this.templates.find(function(e){return e.id===t.templateId}),this.getTemplateDetail()},deleteTemplateClick:function(t){var e=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.loading=!0,Object(c.T)(t.id).then(function(t){e.loading=!1,e.$message.success("删除成功"),e.getTemplateList()}).catch(function(){e.loading=!1})}).catch(function(){})},draftAdd:function(t){this.$prompt("","备注",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"text",inputValue:t.remark,inputPlaceholder:"请输入内容",closeOnClickModal:!1}).then(function(e){var a=e.value;t.remark=a}).catch(function(){})},classNameChange:function(t){this.$prompt("","分类名称",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"text",inputValue:t.name,inputPlaceholder:"请输入内容",inputPattern:/\S/,closeOnClickModal:!1,inputErrorMessage:"请输入内容"}).then(function(e){var a=e.value;t.name=a}).catch(function(){})},deleteItem:function(t,e){var a=this,i=0===e?this.templateList[e+1]:this.templateList[e-1],n=0===t.optionList.length?"确定删除？":'确定删除？该分类下工资项将并入"'+i.name+'"分类';this.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.templateList.splice(e,1),0!==t.length&&(i.optionList=i.optionList.concat(t.optionList))}).catch(function(){})},classAdd:function(){var t=this;this.$prompt("","分类名称",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"text",inputPlaceholder:"请输入内容",inputPattern:/\S/,closeOnClickModal:!1,inputErrorMessage:"请输入内容"}).then(function(e){var a=e.value;t.templateList.unshift({isHide:0,type:1,name:a,optionList:[]})}).catch(function(){})},templateSave:function(){var t=this,e=this.templateList.find(function(t){return 0===t.optionList.length});e?this.$message.error("请完善分类"+e.name+"工资项"):this.$prompt("","模板名称",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"text",inputPlaceholder:"请输入内容",inputPattern:/\S/,closeOnClickModal:!1,inputErrorMessage:"请输入内容"}).then(function(e){var a=e.value;t.loading=!0,Object(c.S)({hideEmpty:t.templateData.hideEmpty,slipTemplateOption:t.templateList,templateName:a}).then(function(e){t.loading=!1,t.getTemplateList(!1)}).catch(function(){t.loading=!1})}).catch(function(){})},close:function(){this.$emit("update:visible",!1)},nextClick:function(){var t=this.templateList.find(function(t){return 0===t.optionList.length});t?this.$message.error('请完善分类"'+t.name+'"下的工资项'):(this.isNext=!0,this.refreshList())},refreshList:function(){this.currentPage=1,this.getEmployeeList()},handleSizeChange:function(t){this.pageSize=t,this.getEmployeeList()},handleCurrentChange:function(t){this.currentPage=t,this.getEmployeeList()},resetFilter:function(){this.filterObj={},this.refreshList()},getEmployeeList:function(){var t=this;this.loading=!0;var e={page:this.currentPage,limit:this.pageSize};for(var a in this.filterObj)e[a]=this.filterObj[a];Object(c.N)(e).then(function(e){t.employeeList=e.data.list,t.total=e.data.totalRow,e.data.totalRow&&Math.ceil(e.data.totalRow/t.pageSize)<t.currentPage&&t.currentPage>1?(t.currentPage=t.currentPage-1,t.getList()):(t.total=e.data.totalRow,t.loading=!1),t.$nextTick(function(){var t=document.querySelector(".el-table__body-wrapper");t.scrollTop=1,0!=t.scrollLeft&&(t.scrollLeft=t.scrollLeft-1)}),t.loading=!1}).catch(function(){t.loading=!1})},sendClick:function(t){var e=this;if(!1===this.loading){this.loading=!0;var a=[];Object(D.w)(this.templateList).forEach(function(t){var e=[];t.optionList.forEach(function(t){0==t.isHide&&e.push(t)}),t.optionList=e,t.optionList.length>0&&a.push(t)});var i={hideEmpty:this.templateData.hideEmpty,slipTemplateOption:a};if("all"===t){for(var n in this.filterObj)i[n]=this.filterObj[n];i.isAll=!0,i.sempRecordIds=[]}else i.isAll=!1,i.sempRecordIds=this.selectionList.map(function(t){return t.sempRecordId});Object(c.O)(i).then(function(t){e.loading=!1,e.$message.success("操作成功"),e.close()}).catch(function(){e.loading=!1})}},handleSelectionChange:function(t){this.selectionList=t}}},R=(a("Q9Cd"),Object(b.a)(V,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{ref:"wkDialog",attrs:{visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,top:"10vh",width:"700px",title:"发送工资条"},on:{close:t.close}},[a("div",{staticClass:"salary-slip-create"},[t.isNext?[a("div",{staticClass:"filter-header"},[t.hasFilterContent?a("el-button",{attrs:{type:"text"},on:{click:t.resetFilter}},[t._v("清除筛选")]):t._e(),t._v(" "),a("wk-popover-filter",{staticStyle:{"margin-right":"5px"},attrs:{width:700,"field-from":t.filterObj,"field-list":t.filterList,"has-content":t.hasFilterContent,placement:"bottom"},on:{"update:fieldFrom":function(e){t.filterObj=e},sure:t.refreshList,reset:t.resetFilter}})],1),t._v(" "),a("div",{staticClass:"table-header"},[t._v("选择发放的员工")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.employeeList,height:t.tableHeight,"row-height":40,"use-virtual":""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),t._l(t.fieldList,function(e,i){return a("el-table-column",{key:i,attrs:{label:e.name,prop:e.field,"show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("sendStatus"===e.column.property?{0:"未发送",1:"已发送"}[e.row[e.column.property]]:e.row[e.column.property]))]}}])})})],2),t._v(" "),a("div",{staticClass:"p-contianer"},[a("el-pagination",{staticClass:"p-bar",attrs:{"current-page":t.currentPage,"page-sizes":t.pageSizes,"page-size":t.pageSize,total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:pageSize":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]:[a("flexbox",{staticClass:"salary-slip-create__header"},[a("span",[t._v("选择模板")]),t._v(" "),a("el-select",{on:{change:t.templateChange},model:{value:t.templateId,callback:function(e){t.templateId=e},expression:"templateId"}},[t._l(t.templates,function(e){return a("el-option",{key:e.id,attrs:{label:e.templateName,value:e.id}},[a("flexbox",[a("flexbox-item",[t._v(t._s(e.templateName))]),t._v(" "),0==e.defaultOption?a("i",{staticClass:"el-icon-close template-delete",on:{click:function(a){a.stopPropagation(),t.deleteTemplateClick(e)}}}):t._e()],1)],1)}),t._v(" "),a("div",{staticClass:"handle-bar"},[a("el-button",{staticClass:"save-btn",attrs:{type:"text",icon:"wk wk-icon-save"},on:{click:t.templateSave}},[t._v("保存模板")])],1)],2)],1),t._v(" "),a("flexbox"),t._v(" "),a("flexbox",{staticClass:"salary-slip-create__header"},[a("flexbox-item",[t._v("选择员工可见项")]),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.classAdd}},[t._v("新建分类")])],1),t._v(" "),a("flexbox"),t._v(" "),a("div",{staticClass:"salary-slip-create__body"},[a("flexbox",{staticClass:"section__header"},[a("el-checkbox",{attrs:{indeterminate:t.allIsIndeterminate},on:{change:t.allChange},model:{value:t.allCheckbox,callback:function(e){t.allCheckbox=e},expression:"allCheckbox"}}),a("span",{staticClass:"label"},[t._v("全部可见")])],1),t._v(" "),a("draggable",{staticClass:"section__list",attrs:{list:t.templateList,options:{group:"mission",forceFallback:!1,dragClass:"sortable-parent-drag",filter:".ignore-elements"},handle:".section-handle"}},t._l(t.templateList,function(e,i){return a("div",{key:i,staticClass:"section"},[a("flexbox",{staticClass:"item is-section"},[a("flexbox-item",{staticClass:"item__body"},[t._v("\n                "+t._s(e.name)+"\n\n              ")]),t._v(" "),a("div",{staticClass:"item__footer"},[a("i",{staticClass:"wk wk-write",attrs:{title:"编辑"},on:{click:function(a){t.classNameChange(e)}}}),t._v(" "),t.templateList.length>1?a("i",{staticClass:"wk wk-delete",attrs:{title:"删除"},on:{click:function(a){t.deleteItem(e,i)}}}):t._e(),t._v(" "),a("span",{staticClass:"drag-handle section-handle"},[t._v("⋮⋮")])])],1),t._v(" "),a("draggable",{staticClass:"ignore-elements",attrs:{list:e.optionList,options:{group:{name:"missionSon"},forceFallback:!1,filter:".board-item-active",dragClass:"sortable-drag"},handle:".child-handle"}},[t._l(e.optionList,function(e,i){return a("flexbox",{key:i,staticClass:"item is-child"},[a("el-checkbox",{staticClass:"item__header",attrs:{disabled:e.code===t.disabledCode,"true-label":0,"false-label":1},on:{change:t.changeAllCheckboxStatus},model:{value:e.isHide,callback:function(a){t.$set(e,"isHide",a)},expression:"subItem.isHide"}}),t._v(" "),a("flexbox-item",{staticClass:"item__body"},[t._v(t._s(e.name)+"\n                  "),e.remark?a("el-tooltip",{attrs:{content:e.remark,effect:"dark",placement:"top"}},[a("i",{staticClass:"wk wk-help wk-help-tips"})]):t._e()],1),t._v(" "),a("div",{staticClass:"item__footer"},[a("i",{staticClass:"wk wk-icon-draft",attrs:{title:"备注",alt:"备注"},on:{click:function(a){t.draftAdd(e)}}}),t._v(" "),a("span",{staticClass:"drag-handle child-handle"},[t._v("⋮⋮")])])],1)}),t._v(" "),0===e.optionList.length?a("div",{staticClass:"no-data"},[t._v("将工资项拖拽到此分类")]):t._e()],2)],1)}))],1)]],2),t._v(" "),t.isNext?[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isNext=!1}}},[t._v("上一步")]),t._v(" "),a("el-button",{attrs:{disabled:0===t.selectionList.length,type:"primary"},on:{click:function(e){t.sendClick("select")}}},[t._v("发放已选员工")]),t._v(" "),a("el-button",{attrs:{disabled:0===t.employeeList.length,type:"primary"},on:{click:function(e){t.sendClick("all")}}},[t._v("全部发放")])],1)]:[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.close}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.nextClick}},[t._v("下一步")])],1),t._v(" "),a("span",{staticStyle:{float:"left","margin-top":"5px"},attrs:{slot:"footer"},slot:"footer"},[a("el-checkbox",{staticStyle:{"margin-right":"8px"},attrs:{"true-label":1,"false-label":0},model:{value:t.templateData.hideEmpty,callback:function(e){t.$set(t.templateData,"hideEmpty",e)},expression:"templateData.hideEmpty"}}),t._v("隐藏空数据工资项\n    ")],1)]],2)},[],!1,null,"74521047",null));R.options.__file="Create.vue";var q=R.exports,W=a("L2JU"),U=a("a/5N"),G=a("wd/R"),J=a.n(G),Q=a("CFeu"),K={name:"SalaryIndex",components:{XrHeader:h.a,XrTableHeader:f.a,WkPopoverFilter:m.a,WkStepsExplainView:p.a,MonthSetDialog:w,OpenSetDialog:S,ComputeSetDialog:O,BatchEditView:F,ExamineSubmitDialog:I,ExamineProgressDialog:M.a,NoEmployeeDialog:B,Reminder:_.a,SalarySlipCreate:q},mixins:[Q.a],data:function(){return{loading:!1,noNum:0,noEmployeeDialogShow:!1,tableHeight:400,list:[],fieldList:[],currentPage:1,pageSize:15,pageSizes:[15,30,60,100],total:0,popoverFilterWidth:150,tabType:"0",tabList:[{label:"计薪人数",name:"0",num:0},{label:"新入职",name:"1",num:0},{label:"离职",name:"2",num:0},{label:"转正",name:"3",num:0},{label:"调岗",name:"4",num:0}],rowID:"",showDview:!1,filterList:[{name:"员工姓名",field:"employeeName",formType:"text",setting:[]},{name:"部门",field:"deptId",formType:"structure",props:{dataType:"hrm"},request:d.e,setting:[]}],filterObj:{},explainTitle:"首次生成薪资前，请先配置薪资信息",explainSteps:[{icon:a("tdpD"),label:"第一步：",desLeft:"去企业后台",desCenter:"【配置工资表】",desRight:""},{icon:a("Y5+c"),label:"第二步：",desLeft:"去企业后台",desCenter:"【配置计税规则】",desRight:"",button:"已配置完成，去生成薪资"},{icon:a("vYgE"),label:"第三步：",desLeft:"",desCenter:"【创建薪资组】",desRight:"关联员工及计税规则"}],initStatusConfig:null,initDataConfig:null,stepsExplainShow:!1,monthDialogShow:!1,openData:null,openDialogShow:!1,computeDialogShow:!1,lastData:null,editViewShow:!1,sumData:null,examineSubDialogShow:!1,examineProDialogShow:!1,examineData:null,slipCreatShow:!1}},computed:r()({},Object(W.b)(["collapse","hrm"]),{salaryAuth:function(){return this.hrm.salary},manageAuth:function(){return this.salaryAuth&&this.salaryAuth.manage},sendAuth:function(){return this.salaryAuth&&this.salaryAuth.sendSlip},hasFilterContent:function(){if(this.filterObj){for(var t=!1,e=o()(this.filterObj),a=0;a<e.length;a++){var i=e[a];""!=this.filterObj[i]&&this.filterObj[i]!=[]&&null!=this.filterObj[i]&&void 0!=this.filterObj[i]&&(t=!0)}return t}return!1},listShow:function(){return!!this.initStatusConfig&&(this.initStatusConfig.firstConfig&&this.initStatusConfig.secondConfig)},startEndTimeValue:function(){return this.lastData?"计薪周期："+J()(this.lastData.startTime).format("MM月DD日")+"-"+J()(this.lastData.endTime).format("MM月DD日"):""},postParams:function(){var t={};for(var e in this.lastData&&(t.srecordId=this.lastData.srecordId),t.type=this.tabType,this.filterObj)t[e]=this.filterObj[e];return t},checkShow:function(){return!!this.examineData},checkSubmitShow:function(){return this.checkShow&&this.lastData&&(2==this.lastData.checkStatus||4==this.lastData.checkStatus||11==this.lastData.checkStatus)},checkProgressShow:function(){return this.checkShow&&this.lastData&&5!=this.lastData.checkStatus&&11!=this.lastData.checkStatus&&this.lastData.examineRecordId},tabShow:function(){return this.lastData&&5!=this.lastData.checkStatus},computedShow:function(){return!this.checkShow||!this.lastData||(2==this.lastData.checkStatus||4==this.lastData.checkStatus||5==this.lastData.checkStatus||11==this.lastData.checkStatus)},onlineEditShow:function(){return!this.checkShow||!this.lastData||(2==this.lastData.checkStatus||4==this.lastData.checkStatus||11==this.lastData.checkStatus)},createShow:function(){return!this.examineData||!this.lastData||1==this.lastData.checkStatus}}),watch:{collapse:{handler:function(t){this.popoverFilterWidth=document.documentElement.clientWidth-(t?89:225)},immediate:!0}},created:function(){var t=this;this.getTableHeight(),window.onresize=function(){t.getTableHeight()},this.refreshPageData()},methods:{getNoNum:function(){var t=this;Object(c.G)(0).then(function(e){t.noNum=e.data||0}).catch(function(){})},refreshPageData:function(){this.lastData=null,this.getConfigList()},getExamineData:function(t){var e=this;this.initWkFlowData({params:{label:4},fieldForm:t},function(t){e.examineData=t.resData})},getTableHeight:function(){this.tableHeight=document.documentElement.clientHeight-(this.tabShow?235:185)-(this.noNum>0?40:0)},getConfigList:function(){var t=this;this.loading=!0,Object(u.b)().then(function(e){var a=e.data.statusInitConfig,i=1==a[2],n=1==a[3];t.initStatusConfig={firstConfig:i,secondConfig:n},t.initDataConfig=e.data.otherInitConfig,i?n?(t.stepsExplainShow=!1,t.openDialogShow=!1,t.getTableHeader()):t.openDialogShow=!0:t.stepsExplainShow=!0,t.loading=!1}).catch(function(){t.loading=!1})},stepClick:function(t,e,a){"des"==t?0==e?this.$router.push({name:"salaryOptions"}):1!=e&&2!=e||this.$router.push({name:"salaryRules",query:{type:{1:"tax",2:"group"}[e]}}):"button"==t&&this.updateInItConfig(2)},updateInItConfig:function(t){var e=this;this.loading=!0,Object(u.e)(t).then(function(a){2==t?e.openDialogShow=!0:e.getTableHeader(),e.loading=!1}).catch(function(){e.loading=!1})},openSetChange:function(t){this.openData=t,this.monthDialogShow=!0},monthSetChange:function(t,e){this.getConfigList()},getTableHeader:function(){var t=this;this.loading=!0,Object(c.E)().then(function(e){t.loading=!1;var a=e.data.map(function(t){return{field:t.code.toString(),name:t.name,isFixed:1===t.isFixed,width:100}});t.fieldList=[{field:"employeeName",name:"姓名",width:100},{field:"jobNumber",name:"工号",width:100},{field:"deptName",name:"部门",width:100},{field:"post",name:"岗位",width:100}].concat(a),t.refreshList()}).catch(function(){t.loading=!1})},getLastData:function(){var t=this;return new n.a(function(e,a){if(t.lastData)return e(t.lastData);t.loading=!0,Object(c.z)().then(function(a){t.lastData=a.data,t.loading=!1,e(t.lastData)}).catch(function(){t.loading=!1,a&&a()})})},resetFilter:function(){this.filterObj={},this.refreshList()},checkClick:function(t){"submit"==t?this.examineSubDialogShow=!0:this.examineProDialogShow=!0},examineSubmitClick:function(t){var e=this;this.loading=!0;var a=this.validateWkFlowData(t);if(a.pass){var i={srecordId:this.lastData.srecordId,checkStatus:this.lastData.checkStatus,examineRecordId:this.lastData.examineRecordId};a.data&&(i.examineFlowData=a.data),Object(c.I)(i).then(function(t){e.lastData=null,e.loading=!1,e.examineSubDialogShow=!1,e.getLastData()}).catch(function(){e.loading=!1})}else this.loading=!1,this.$message.error("请完善审批信息")},examineProgressChange:function(){this.lastData=null,this.getLastData()},computeClick:function(){this.computeDialogShow=!0},createClick:function(){var t=this;this.$confirm("新建下月工资表，当前的工资表将归入历史工资表中，且历史工资表数据不可修改。请确认现在就开始做下月工资吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(c.A)().then(function(e){t.refreshList()}).catch(function(){})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},tabClick:function(){this.refreshList()},createSlipClick:function(){this.slipCreatShow=!0},deleteClick:function(){var t=this;this.$confirm("当月工资表删除后，上月工资表将纳入当月工资表中，并且支持修改，确定要删除当月工资表吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(c.D)(t.lastData.srecordId).then(function(e){t.refreshList()}).catch(function(){})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},refreshList:function(){this.lastData=null,this.getNoNum(),this.handleCurrentChange(1)},handleSizeChange:function(t){this.pageSize=t,this.getList()},handleCurrentChange:function(t){this.currentPage=t,this.getList()},getList:function(){var t=this;this.getLastData().then(function(e){t.getExamineData(e),t.loading=!0;var a=r()({},t.postParams,{page:t.currentPage,limit:t.pageSize});Object(c.F)(a).then(function(e){var a=e.data||{},i=a.list;i.forEach(function(t){(t.salary||[]).forEach(function(e){t[e.code]=e.value})}),t.list=i,t.total=a.totalRow;var n={};(a.extraData||{}).salaryOption.forEach(function(t){n[t.code]=t.value}),t.sumData=n,t.total>0&&t.getTabNum(),t.getTableHeight(),t.$nextTick(function(){var t=document.querySelector(".el-table__body-wrapper");t.scrollTop=1,0!=t.scrollLeft&&(t.scrollLeft=t.scrollLeft-1)}),t.loading=!1}).catch(function(){t.loading=!1})}).catch(function(){})},getTabNum:function(){var t=this;Object(c.B)().then(function(e){var a=e.data||{};t.tabList.forEach(function(t){"all"!=t.name&&(t.num=a[parseInt(t.name)]||0)})}).catch(function(){})},getSumData:function(){var t=this;this.getLastData().then(function(e){Object(c.J)(e.srecordId).then(function(e){var a={};(e.data||[]).forEach(function(t){a[t.code]=t.value}),t.sumData=a}).catch(function(){})}).catch(function(){})},getSummaries:function(t){var e=this,a=[];return t.columns.forEach(function(t,i){a[i]=0===i?"总合计":i<=5?"":e.sumData?e.sumData[t.property]:""}),a},fieldFormatter:function(t,e){var a=t[e.property];return Object(U.b)(a)?"--":a},editClick:function(){this.editViewShow=!0},checkNoEmployeesClick:function(){this.noEmployeeDialogShow=!0},noEmployeesCloseClick:function(){this.noNum=0,this.getTableHeight()}}},Y=(a("KFlF"),Object(b.a)(K,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"salary-index",attrs:{id:"employee-main-container"}},[t.listShow?[t.noNum>0?a("reminder",{attrs:{content:"有"+t.noNum+"名员工未在任何薪资组中，无法参与工资表核算工资","close-show":""},on:{close:t.noEmployeesCloseClick}},[a("el-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:t.checkNoEmployeesClick}},[t._v("查看无薪资组员工")])],1):t._e(),t._v(" "),a("xr-header",{staticStyle:{padding:"0px 15px 15px 0"},attrs:{"ft-top":"0","icon-class":"wk wk-payment","icon-color":"#2362FB",label:"薪资管理"}},[a("template",{slot:"label"},[t._v("\n        薪资管理"),a("el-tooltip",{attrs:{content:"首次计薪，请先录入基础工资数据。以后计薪无需重复录入",effect:"dark",placement:"top"}},[a("i",{staticClass:"wk wk-help wk-help-tips",staticStyle:{"margin-left":"8px"}})]),t._v(" "),t.startEndTimeValue?a("span",{staticClass:"time-label"},[t._v("（"+t._s(t.startEndTimeValue)+"）")]):t._e()],1),t._v(" "),a("template",{slot:"ft"},[t.hasFilterContent?a("el-button",{attrs:{type:"text"},on:{click:t.resetFilter}},[t._v("清除筛选")]):t._e(),t._v(" "),a("wk-popover-filter",{staticStyle:{"margin-right":"5px"},attrs:{width:t.popoverFilterWidth,"field-from":t.filterObj,"field-list":t.filterList,"has-content":t.hasFilterContent,placement:"bottom"},on:{"update:fieldFrom":function(e){t.filterObj=e},sure:t.refreshList,reset:t.resetFilter}}),t._v(" "),t.lastData?[t.checkSubmitShow&&t.manageAuth?a("el-button",{on:{click:function(e){t.checkClick("submit")}}},[t._v("提交审核")]):t._e(),t._v(" "),t.checkProgressShow&&t.manageAuth?a("el-button",{attrs:{type:"text"},on:{click:function(e){t.checkClick("progress")}}},[t._v("查看审核进度")]):t._e(),t._v(" "),t.computedShow&&t.manageAuth?a("el-button",{attrs:{type:"primary"},on:{click:t.computeClick}},[t._v("核算工资")]):t._e(),t._v(" "),t.createShow&&t.sendAuth?a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:t.createSlipClick}},[t._v("发送工资条")]):t._e(),t._v(" "),t.createShow&&t.manageAuth?a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:t.createClick}},[t._v("创建下月工资表")]):t._e(),t._v(" "),t.manageAuth?a("el-button",{on:{click:t.deleteClick}},[t._v("删除工资表")]):t._e()]:t._e()],2)],2),t._v(" "),a("div",{staticClass:"crm-container"},[t.tabShow?a("xr-table-header",[a("el-tabs",{staticStyle:{width:"100%","margin-bottom":"-8px"},on:{"tab-click":t.tabClick},model:{value:t.tabType,callback:function(e){t.tabType=e},expression:"tabType"}},t._l(t.tabList,function(e){return a("el-tab-pane",{key:e.name,attrs:{name:e.name}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(e.label)),e.num>0?a("span",{staticClass:"tab-pane-num",staticStyle:{"margin-left":"5px"}},[t._v(t._s(e.num))]):t._e()])])})),t._v(" "),t.onlineEditShow&&t.manageAuth?a("el-button",{attrs:{type:"primary"},on:{click:t.editClick}},[t._v("在线编辑")]):t._e()],1):t._e(),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"n-table--border el-table-header--white",staticStyle:{width:"100%"},attrs:{id:"crm-table","row-height":40,data:t.list,height:t.tableHeight,"summary-method":t.getSummaries,"show-summary":"","use-virtual":"",stripe:"",border:"","highlight-current-row":""}},[t._l(t.fieldList,function(e,i){return a("el-table-column",{key:i,attrs:{fixed:0==i,prop:e.field,label:e.name,"min-width":e.width,formatter:t.fieldFormatter,"show-overflow-tooltip":""}})}),t._v(" "),a("el-table-column")],2),t._v(" "),a("div",{staticClass:"p-contianer"},[a("el-pagination",{staticClass:"p-bar",attrs:{"current-page":t.currentPage,"page-sizes":t.pageSizes,"page-size":t.pageSize,total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:pageSize":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)]:t._e(),t._v(" "),t.stepsExplainShow?a("wk-steps-explain-view",{attrs:{title:t.explainTitle,steps:t.explainSteps},on:{"step-click":t.stepClick}}):t._e(),t._v(" "),a("open-set-dialog",{attrs:{detail:t.initDataConfig,visible:t.openDialogShow},on:{"update:visible":function(e){t.openDialogShow=e},change:t.openSetChange}}),t._v(" "),a("month-set-dialog",{attrs:{detail:t.openData,visible:t.monthDialogShow},on:{"update:visible":function(e){t.monthDialogShow=e},change:t.monthSetChange}}),t._v(" "),a("compute-set-dialog",{attrs:{"last-data":t.lastData,visible:t.computeDialogShow},on:{"update:visible":function(e){t.computeDialogShow=e},change:t.refreshPageData}}),t._v(" "),t.editViewShow?a("batch-edit-view",{attrs:{"field-list":t.fieldList,params:t.postParams},on:{close:function(e){t.editViewShow=!1},change:t.refreshList}}):t._e(),t._v(" "),a("examine-submit-dialog",{attrs:{data:t.examineData,visible:t.examineSubDialogShow},on:{"update:visible":function(e){t.examineSubDialogShow=e},save:t.examineSubmitClick}}),t._v(" "),a("examine-progress-dialog",{attrs:{detail:t.lastData,visible:t.examineProDialogShow},on:{"update:visible":function(e){t.examineProDialogShow=e},change:t.examineProgressChange}}),t._v(" "),a("no-employee-dialog",{attrs:{visible:t.noEmployeeDialogShow},on:{"update:visible":function(e){t.noEmployeeDialogShow=e}}}),t._v(" "),a("salary-slip-create",{attrs:{visible:t.slipCreatShow},on:{"update:visible":function(e){t.slipCreatShow=e}}})],2)},[],!1,null,"26025cd6",null));Y.options.__file="index.vue";e.default=Y.exports},rE8M:function(t,e,a){},t69r:function(t,e,a){"use strict";var i=a("VJAa");a.n(i).a},uCc8:function(t,e,a){}}]);