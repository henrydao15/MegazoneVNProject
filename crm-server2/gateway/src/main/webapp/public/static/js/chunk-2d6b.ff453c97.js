(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d6b"],{"9GgJ":function(t,e,n){"use strict";var i={name:"XrHeader",components:{},props:{iconClass:[String,Array],iconColor:String,label:String,showSearch:{type:Boolean,default:!1},searchIconType:{type:String,default:"text"},placeholder:{type:String,default:"请输入内容"},ftTop:{type:String,default:"15px"},content:[String,Number],inputAttr:{type:Object,default:function(){}}},data:function(){return{search:""}},computed:{},watch:{content:{handler:function(){this.search!=this.content&&(this.search=this.content)},immediate:!0}},mounted:function(){},beforeDestroy:function(){},methods:{inputChange:function(){this.$emit("update:content",this.search)},searchClick:function(){this.$emit("search",this.search)}}},a=(n("zIzm"),n("KHd+")),r=Object(a.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("flexbox",{staticClass:"xr-header"},[t.iconClass?n("div",{staticClass:"xr-header__icon",style:{backgroundColor:t.iconColor}},[n("i",{class:t.iconClass})]):t._e(),t._v(" "),n("div",{staticClass:"xr-header__label"},[t.$slots.label?t._t("label"):[t._v(t._s(t.label))]],2),t._v(" "),t.showSearch?n("el-input",t._b({staticClass:"xr-header__search",class:{"is-text":"text"===t.searchIconType},style:{"margin-top":t.ftTop},attrs:{placeholder:t.placeholder},on:{input:t.inputChange},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.searchClick(e):null}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},"el-input",t.inputAttr,!1),["text"===t.searchIconType?n("el-button",{attrs:{slot:"append",type:"primary"},nativeOn:{click:function(e){return t.searchClick(e)}},slot:"append"},[t._v("搜索")]):n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},nativeOn:{click:function(e){return t.searchClick(e)}},slot:"append"})],1):t._e(),t._v(" "),n("div",{staticClass:"xr-header__ft",style:{top:t.ftTop}},[t._t("ft")],2)],1)},[],!1,null,"7bba770c",null);r.options.__file="index.vue";e.a=r.exports},HNPu:function(t,e,n){"use strict";n.r(e);var i=n("zMw6"),a=n("9GgJ"),r=n("7Qib"),s={name:"SalaryOptions",components:{XrHeader:a.a},mixins:[],data:function(){return{loading:!1,detailData:null,optionTempList:[],sectionList:[],sectionFirstList:[],sectionNextList:[],step:0}},computed:{},watch:{},created:function(){this.getDetail()},methods:{editClick:function(){this.getFirstPageData(this.detailData),this.step=1},backClick:function(){this.step=1},deleteItems:function(t,e){e.splice(t,1)},saveClick:function(){var t=this;this.$confirm("编辑后不影响历史工资的工资表，当前计薪的工资表需重新核算后生效?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=[],n=[];t.sectionFirstList[0].list.forEach(function(t){0===t.isOpen?e.push(t.code):n.push(t)});var a=[];n.forEach(function(t){a=a.concat(t.children)}),t.sectionFirstList[1].list.forEach(function(t){a=a.concat(t.children||[])}),t.loading=!0,Object(i.z)({optionList:a,hideList:e}).then(function(e){t.loading=!1,t.step=0,t.getDetail()}).catch(function(){t.loading=!1})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},getDetail:function(){var t=this;this.sectionList=[],this.sectionFirstList=[],this.sectionNextList=[],this.loading=!0,Object(i.y)().then(function(e){t.loading=!1,t.detailData=e.data||{},t.getDetailPageData(t.detailData)}).catch(function(){t.loading=!1})},getDetailPageData:function(t){var e=[],n=[];Object(r.w)(t.openOption||[]).forEach(function(t){t.isFixed?t.children.filter(function(t){return 0===t.isShow}).length!=t.children.length&&n.push(t):e.push(t)}),this.sectionList=this.getSection(e,n)},getFirstPageData:function(t){var e=(t=Object(r.w)(t)).templateOption||[];this.optionTempList=Object(r.w)(e);var n=[],i=t.openOption.filter(function(t){return 1==t.isFixed}),a=t.openOption.map(function(t){return t.code});e.forEach(function(e){if(0===e.isFixed){if(e.isOpen=a.includes(e.code)?1:0,1==e.isOpen){var i=t.openOption.find(function(t){return t.code==e.code});i&&(e.children=i.children||[])}n.push(e)}}),this.sectionFirstList=this.getSection(n,i)},getSection:function(t,e){return[{title:"企业可选项",des:"选择企业工资表包含的所有工资项目类型，点开开关设置是否启用该项目类型，在下一步可以编辑具体的子项目",nextDes:"您可以新增或删除工资项，可以点击编辑项目名称和备注",list:t},{title:"系统默认项",des:"系统默认项，即计薪过程的必要项目，默认启用",nextDes:"系统项是计薪过程中的必要项目，可以设置项目是否在工资表显示",list:e}]},getTableFields:function(t){return 2==t.isPlus&&2==t.isTax?[{label:t.name,width:200,prop:"name"},{label:t.remarks,prop:"remarks"}]:2==t.isPlus?[{label:t.name,width:200,prop:"name"},{label:t.remarks,prop:"remarks"},{label:"加/减项",width:120,prop:"isPlus"}]:2==t.isTax?[{label:t.name,width:200,prop:"name"},{label:t.remarks,prop:"remarks"},{label:"是否计税",width:120,prop:"isTax"}]:[{label:t.name,width:200,prop:"name"},{label:t.remarks,prop:"remarks"},{label:"加/减项",width:120,prop:"isPlus"},{label:"是否计税",width:120,prop:"isTax"}]},fieldFormatter:function(t,e,n){return"isPlus"==e.property?{1:"加",0:"减"}[t[e.property]]:"isTax"==e.property?{1:"是",0:"否"}[t[e.property]]:t[e.property]||"--"},nextClick:function(){var t=this;this.loading=!0,setTimeout(function(){t.step=2,t.$nextTick(function(){t.loading=!1})},300)},cancelClick:function(){this.step=0},getHandleOptions:function(t){var e=this.optionTempList.find(function(e){return e.code==t.code});if(e){var n=t.children.map(function(t){return t.code}),i=e.children.map(function(t){return t.checked=n.includes(t.code),t});if(i.length){var a=Object(r.w)(i[i.length-1]);a.isCustom=!0,a.code+=1,a.name="添加自定义项",i.push(a)}return i}return[]},checkboxChange:function(t,e,n){if(t)n.push(e);else{for(var i=-1,a=0;a<n.length;a++)if(n[a].code==e.code){i=a;break}i>=0&&n.splice(i,1)}},dropdownCommand:function(t,e,n){if(t.isCustom){for(var i=null,a=e.children.length-1;a<0;a--){var s=e.children[a];if(s.isCustom){i=s;break}}var o=Object(r.w)(t);o.code=i?i.code+1:t.code,e.createData=o,this.$set(e,"showCreate",!0),this.$refs.bottomDropdown[n].hide()}},createCancelClick:function(t){this.resetItem(t),t.showCreate=!1},createSaveClick:function(t){if(t.createName){var e=t.createData;e.isCustom=!0,e.name=t.createName,e.remarks=t.createRemarks,t.children.push(e),this.resetItem(t),t.showCreate=!1}else this.$message.error("请输入名称")},resetItem:function(t){t.createName="",t.createRemarks="",t.createData=null},getSubChildren:function(t,e){if(1==e){var n=t.filter(function(t){return 1===t.isShow});return n&&n.length>3?n.slice(0,3):n}return t&&t.length>3?t.slice(0,3):t}}},o=(n("QvIp"),n("KHd+")),c=Object(o.a)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"main"},[n("xr-header",{attrs:{"icon-class":"wk wk-double-gear","icon-color":"#1CBAF5",label:"工资表设置"}}),t._v(" "),n("div",{staticClass:"main-body"},[0==t.step?t._l(t.sectionList,function(e,i){return n("div",{key:i,staticClass:"section"},[n("div",{staticClass:"section__title"},[t._v(t._s(e.title))]),t._v(" "),n("div",{staticClass:"section__des"},[t._v(t._s(e.des))]),t._v(" "),0==i?n("div",{staticClass:"handle-bar"},[n("el-button",{attrs:{type:"primary"},on:{click:t.editClick}},[t._v("编辑")])],1):t._e(),t._v(" "),n("flexbox",{staticClass:"section__content",attrs:{wrap:"wrap",align:"stretch"}},t._l(e.list,function(e,a){return n("el-card",{key:a,staticClass:"section-item"},[n("flexbox",{staticClass:"section-item__header"},[n("div",{staticClass:"section-item__title text-one-line"},[t._v(t._s(e.name))]),t._v(" "),[1==i?n("span",{staticClass:"section-item--system"},[t._v("\n                  系统项\n                ")]):t._e()]],2),t._v(" "),n("div",{staticClass:"section-item__body"},[t._l(t.getSubChildren(e.children,i),function(e,i){return n("div",{key:i,staticClass:"section-item__content text-one-line"},[t._v(t._s(e.name))])}),t._v(" "),e.children&&e.children.length>3?n("div",{staticClass:"section-item__content text-one-line"},[t._v("...")]):t._e()],2)],1)}))],1)}):1==t.step?t._l(t.sectionFirstList,function(e,i){return n("div",{key:i,staticClass:"section"},[n("div",{staticClass:"section__title"},[t._v(t._s(e.title))]),t._v(" "),n("div",{staticClass:"section__des"},[t._v(t._s(e.des))]),t._v(" "),0==i?n("div",{staticClass:"handle-bar"},[n("el-button",{attrs:{type:"primary"},on:{click:t.nextClick}},[t._v("下一步")]),t._v(" "),n("el-button",{on:{click:t.cancelClick}},[t._v("取消")])],1):t._e(),t._v(" "),n("flexbox",{staticClass:"section__content",attrs:{wrap:"wrap",align:"stretch"}},t._l(e.list,function(e,a){return n("el-card",{key:a,staticClass:"section-item"},[n("flexbox",{staticClass:"section-item__header"},[n("div",{staticClass:"section-item__title text-one-line"},[t._v(t._s(e.name))]),t._v(" "),[0==i?n("el-switch",{attrs:{"inactive-value":0,"active-value":1},model:{value:e.isOpen,callback:function(n){t.$set(e,"isOpen",n)},expression:"item.isOpen"}}):t._e(),t._v(" "),1==i?n("span",{staticClass:"section-item--system"},[t._v("\n                  系统项\n                ")]):t._e()]],2),t._v(" "),n("div",{staticClass:"section-item__body"},[t._l(t.getSubChildren(e.children,i),function(e,i){return n("div",{key:i,staticClass:"section-item__content text-one-line"},[t._v(t._s(e.name))])}),t._v(" "),e.children&&e.children.length>3?n("div",{staticClass:"section-item__content text-one-line"},[t._v("...")]):t._e()],2)],1)}))],1)}):2==t.step?t._l(t.sectionFirstList,function(e,i){return n("div",{key:i,staticClass:"section"},[n("div",{staticClass:"section__title"},[t._v(t._s(e.title))]),t._v(" "),n("div",{staticClass:"section__des"},[t._v(t._s(e.nextDes))]),t._v(" "),0==i?n("div",{staticClass:"handle-bar"},[n("el-button",{attrs:{type:"primary"},on:{click:t.saveClick}},[t._v("保存")]),t._v(" "),n("el-button",{on:{click:t.backClick}},[t._v("返回")])],1):t._e(),t._v(" "),n("div",{staticClass:"section__content",attrs:{wrap:"wrap",align:"stretch"}},t._l(e.list,function(e,a){return n("div",{directives:[{name:"show",rawName:"v-show",value:1==e.isOpen,expression:"item.isOpen == 1"}],key:a,staticClass:"table-content"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.children}},[t._l(t.getTableFields(e),function(e,i){return n("el-table-column",{key:i,attrs:{prop:e.prop,label:e.label,width:e.width,formatter:t.fieldFormatter,"show-overflow-tooltip":""}})}),t._v(" "),n("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[0==i?n("el-button",{attrs:{type:"text"},on:{click:function(n){t.deleteItems(a.$index,e.children)}}},[t._v("删除")]):[n("el-switch",{attrs:{"inactive-value":0,"active-value":1},model:{value:a.row.isShow,callback:function(e){t.$set(a.row,"isShow",e)},expression:"scope.row.isShow"}}),n("span",{staticStyle:{color:"#999","margin-left":"2px"}},[t._v("显示")])]]}}])}),t._v(" "),e.showCreate?n("flexbox",{staticClass:"create-bar",attrs:{slot:"append"},slot:"append"},[n("el-input",{staticClass:"name-input",attrs:{maxlength:50,type:"text"},model:{value:e.createName,callback:function(n){t.$set(e,"createName",n)},expression:"item.createName"}}),t._v(" "),n("el-input",{staticClass:"remarks-input",attrs:{maxlength:50,type:"text"},model:{value:e.createRemarks,callback:function(n){t.$set(e,"createRemarks",n)},expression:"item.createRemarks"}}),t._v(" "),n("el-button",{on:{click:function(n){t.createCancelClick(e)}}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(n){t.createSaveClick(e)}}},[t._v("保存")])],1):t._e()],2),t._v(" "),0==i?n("el-dropdown",{ref:"bottomDropdown",refInFor:!0,attrs:{"hide-on-click":!1,trigger:"click"}},[n("el-button",{attrs:{type:"text"}},[t._v("添加薪资项")]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.getHandleOptions(e),function(i,r){return n("el-dropdown-item",{key:r,attrs:{icon:i.isCustom?"el-icon-plus":"",command:i.code},nativeOn:{click:function(n){t.dropdownCommand(i,e,a)}}},[i.isCustom?[t._v(t._s(i.name))]:n("el-checkbox",{on:{change:function(n){t.checkboxChange(n,i,e.children)}},model:{value:i.checked,callback:function(e){t.$set(i,"checked",e)},expression:"handleItem.checked"}},[t._v(t._s(i.name))])],2)}))],1):t._e()],1)}))])}):t._e()],2)],1)},[],!1,null,"82d60676",null);c.options.__file="Options.vue";e.default=c.exports},QvIp:function(t,e,n){"use strict";var i=n("zL1M");n.n(i).a},ihDC:function(t,e,n){},zIzm:function(t,e,n){"use strict";var i=n("ihDC");n.n(i).a},zL1M:function(t,e,n){},zMw6:function(t,e,n){"use strict";n.d(e,"j",function(){return a}),n.d(e,"m",function(){return r}),n.d(e,"c",function(){return s}),n.d(e,"i",function(){return o}),n.d(e,"h",function(){return c}),n.d(e,"l",function(){return l}),n.d(e,"k",function(){return u}),n.d(e,"n",function(){return d}),n.d(e,"g",function(){return p}),n.d(e,"f",function(){return h}),n.d(e,"o",function(){return f}),n.d(e,"d",function(){return m}),n.d(e,"e",function(){return v}),n.d(e,"a",function(){return _}),n.d(e,"b",function(){return b}),n.d(e,"u",function(){return C}),n.d(e,"w",function(){return y}),n.d(e,"x",function(){return g}),n.d(e,"v",function(){return k}),n.d(e,"A",function(){return x}),n.d(e,"B",function(){return w}),n.d(e,"y",function(){return O}),n.d(e,"z",function(){return T}),n.d(e,"p",function(){return j}),n.d(e,"q",function(){return S}),n.d(e,"r",function(){return F}),n.d(e,"s",function(){return L}),n.d(e,"t",function(){return D});var i=n("t3Un");function a(t){return Object(i.a)({url:"hrmConfig/queryRecruitChannelList",method:"post",data:t})}function r(t){return Object(i.a)({url:"hrmConfig/saveRecruitChannel",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function s(t){return Object(i.a)({url:"hrmConfig/deleteRecruitChannel",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(t){return Object(i.a)({url:"hrmConfig/queryFields",method:"post",data:t})}function c(t){return Object(i.a)({url:"hrmConfig/queryFieldByLabel/"+t,method:"post"})}function l(t){return Object(i.a)({url:"hrmConfig/saveField",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(t){return Object(i.a)({url:"hrmConfig/queryRecruitEliminateList",method:"post",data:t})}function d(t){return Object(i.a)({url:"hrmConfig/saveRecruitEliminate",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function p(t){return Object(i.a)({url:"hrmConfig/queryAchievementTableList",method:"post",data:t})}function h(t){return Object(i.a)({url:"hrmConfig/queryAchievementTableById/"+t,method:"post"})}function f(t){return Object(i.a)({url:"hrmConfig/setAchievementTable",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function m(t){return Object(i.a)({url:"hrmConfig/queryInsuranceSchemePageList",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function v(t){return Object(i.a)({url:"hrmConfig/queryInsuranceSchemeById/"+t,method:"post"})}function _(t){return Object(i.a)({url:"hrmConfig/addInsuranceScheme",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function b(t){return Object(i.a)({url:"hrmConfig/deleteInsuranceScheme/"+t,method:"post"})}function C(t){return Object(i.a)({url:"hrmSalaryGroup/addSalaryGroup",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function y(t){return Object(i.a)({url:"hrmSalaryGroup/querySalaryGroupPageList",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function g(t){return Object(i.a)({url:"hrmSalaryGroup/setSalaryGroup",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function k(t){return Object(i.a)({url:"hrmSalaryGroup/delete/"+t,method:"post"})}function x(t){return Object(i.a)({url:"hrmSalaryTaxRule/queryTaxRuleList",method:"post",data:t})}function w(t){return Object(i.a)({url:"hrmSalaryTaxRule/setTaxRule",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function O(t){return Object(i.a)({url:"hrmSalaryOption/querySalaryOptionDetail",method:"post",data:t})}function T(t){return Object(i.a)({url:"hrmSalaryOption/setSalaryOption",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function j(){return Object(i.a)({url:"hrmEmployeeArchives/queryEmployeeArchivesField",method:"post"})}function S(t){return Object(i.a)({url:"hrmEmployeeArchives/sendWriteArchives",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function F(t){return Object(i.a)({url:"hrmEmployeeArchives/setEmployeeArchivesField",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function L(t){return Object(i.a)({url:"hrmEmployeeFieldManage/queryEmployeeManageField",method:"post",data:t})}function D(t){return Object(i.a)({url:"hrmEmployeeFieldManage/setEmployeeManageField",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}}}]);