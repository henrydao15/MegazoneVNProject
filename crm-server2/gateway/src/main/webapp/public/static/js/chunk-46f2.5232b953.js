(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-46f2"],{"1Ikr":function(e,t,i){"use strict";var l=i("qI47");i.n(l).a},"9GgJ":function(e,t,i){"use strict";var l={name:"XrHeader",components:{},props:{iconClass:[String,Array],iconColor:String,label:String,showSearch:{type:Boolean,default:!1},searchIconType:{type:String,default:"text"},placeholder:{type:String,default:"请输入内容"},ftTop:{type:String,default:"15px"},content:[String,Number],inputAttr:{type:Object,default:function(){}}},data:function(){return{search:""}},computed:{},watch:{content:{handler:function(){this.search!=this.content&&(this.search=this.content)},immediate:!0}},mounted:function(){},beforeDestroy:function(){},methods:{inputChange:function(){this.$emit("update:content",this.search)},searchClick:function(){this.$emit("search",this.search)}}},a=(i("zIzm"),i("KHd+")),o=Object(a.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("flexbox",{staticClass:"xr-header"},[e.iconClass?i("div",{staticClass:"xr-header__icon",style:{backgroundColor:e.iconColor}},[i("i",{class:e.iconClass})]):e._e(),e._v(" "),i("div",{staticClass:"xr-header__label"},[e.$slots.label?e._t("label"):[e._v(e._s(e.label))]],2),e._v(" "),e.showSearch?i("el-input",e._b({staticClass:"xr-header__search",class:{"is-text":"text"===e.searchIconType},style:{"margin-top":e.ftTop},attrs:{placeholder:e.placeholder},on:{input:e.inputChange},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchClick(t):null}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},"el-input",e.inputAttr,!1),["text"===e.searchIconType?i("el-button",{attrs:{slot:"append",type:"primary"},nativeOn:{click:function(t){return e.searchClick(t)}},slot:"append"},[e._v("搜索")]):i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},nativeOn:{click:function(t){return e.searchClick(t)}},slot:"append"})],1):e._e(),e._v(" "),i("div",{staticClass:"xr-header__ft",style:{top:e.ftTop}},[e._t("ft")],2)],1)},[],!1,null,"7bba770c",null);o.options.__file="index.vue";t.a=o.exports},Dpm0:function(e,t,i){"use strict";var l=i("c1z1");i.n(l).a},Ed9r:function(e,t,i){},G7Rp:function(e,t,i){"use strict";i.r(t);var l=i("GQeE"),a=i.n(l),o=i("QbLZ"),n=i.n(o),r=i("t3Un");var s=i("D0zU"),c=i("9GgJ"),d=i("kBEL"),f=i("wd/R"),p=i.n(f),m=i("L2JU"),u=i("a/5N"),h=i("7Qib"),b={name:"ClockIndex",components:{XrHeader:c.a,WkPopoverFilter:d.a},data:function(){return{loading:!1,createType:"",tableHeight:document.documentElement.clientHeight-190,list:[],fieldList:[],currentPage:1,pageSize:15,pageSizes:[15,30,60,100],total:0,search:"",popoverFilterWidth:150,filterObj:{date:p()().format("YYYY-MM-DD HH:mm:ss"),deptId:null},filterList:[{name:"时间",field:"date",formType:"date",setting:[]},{name:"部门",field:"deptId",formType:"structure",props:{dataType:"hrm"},request:s.e,setting:[]}]}},computed:n()({},Object(m.b)(["collapse","hrm"]),{headerMoreHandle:function(){var e=[];return this.hrm.attendance&&this.hrm.attendance.excelexport&&e.push({type:"export",name:"导出",icon:"wk wk-export"}),e},hasFilterContent:function(){if(this.filterObj){for(var e=!1,t=a()(this.filterObj),i=0;i<t.length;i++){var l=t[i];""!=this.filterObj[l]&&this.filterObj[l]!=[]&&null!=this.filterObj[l]&&void 0!=this.filterObj[l]&&(e=!0)}return e}return!1}}),watch:{collapse:{handler:function(e){this.popoverFilterWidth=document.documentElement.clientWidth-(e?89:225)},immediate:!0}},created:function(){var e=this;window.onresize=function(){e.tableHeight=document.documentElement.clientHeight-190},this.getFieldList(),this.refreshList()},methods:{resetFilter:function(){this.filterObj={},this.refreshList()},searchClick:function(e){this.search=e,this.refreshList()},getFieldList:function(){this.fieldList=[{fieldName:"employeeName",name:"姓名",sortable:"",width:100},{fieldName:"jobNumber",name:"工号",sortable:"",width:100},{fieldName:"deptName",name:"部门",sortable:"",width:100},{fieldName:"post",name:"岗位",sortable:"",width:100},{fieldName:"attendanceTime",name:"上班日期",sortable:"",width:100},{fieldName:"clockType",name:"打卡类型",sortable:"",width:100},{fieldName:"clockTime",name:"打卡时间",sortable:"",width:100},{fieldName:"address",name:"打卡地点",sortable:"",width:100}]},refreshList:function(){this.handleCurrentChange(1)},handleSizeChange:function(e){this.pageSize=e,this.getList()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},getList:function(){var e=this;this.loading=!0;var t,i={page:this.currentPage,limit:this.pageSize,pageType:1,search:this.search};for(var l in this.filterObj)i[l]=this.filterObj[l];(t=i,Object(r.a)({url:"hrmAttendanceClock/queryPageList",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})).then(function(t){e.list=t.data.list,e.total=t.data.totalRow,t.data.totalRow&&Math.ceil(t.data.totalRow/e.pageSize)<e.currentPage&&e.currentPage>1?(e.currentPage=e.currentPage-1,e.getList()):(e.total=t.data.totalRow,e.loading=!1),e.$nextTick(function(){var e=document.querySelector(".el-table__body-wrapper");e.scrollTop=1,0!=e.scrollLeft&&(e.scrollLeft=e.scrollLeft-1)}),e.loading=!1}).catch(function(){e.loading=!1})},fieldFormatter:function(e,t){return"clockType"==t.property?{1:"上班打卡",2:"下班打卡"}[e[t.property]]||"--":Object(u.b)(e[t.property])?"--":e[t.property]},headerMoreHandleClick:function(e){var t,i=this;if("export"==e){this.loading=!0;var l={search:this.search};for(var a in this.filterObj)l[a]=this.filterObj[a];(t=l,Object(r.a)({url:"hrmAttendanceClock/excelExport",method:"post",responseType:"blob",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})).then(function(e){Object(h.c)(e),i.loading=!1}).catch(function(){i.loading=!1})}}}},g=(i("1Ikr"),i("KHd+")),v=Object(g.a)(b,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"clock-index",attrs:{id:"employee-main-container"}},[i("xr-header",{staticStyle:{padding:"0px 15px 15px 0"},attrs:{"ft-top":"0","icon-class":"wk wk-schedule","icon-color":"#2362FB",placeholder:"请输入员工姓名/工号",label:"打卡记录","show-search":"","search-icon-type":"icon"},on:{search:e.searchClick}},[i("template",{slot:"ft"},[e.hasFilterContent?i("el-button",{attrs:{type:"text"},on:{click:e.resetFilter}},[e._v("清除筛选")]):e._e(),e._v(" "),i("wk-popover-filter",{staticStyle:{"margin-right":"5px"},attrs:{width:e.popoverFilterWidth,"field-from":e.filterObj,"field-list":e.filterList,"has-content":e.hasFilterContent,placement:"bottom"},on:{"update:fieldFrom":function(t){e.filterObj=t},sure:e.refreshList,reset:e.resetFilter}}),e._v(" "),e.headerMoreHandle.length>0?i("el-dropdown",{staticStyle:{"margin-left":"5px"},attrs:{trigger:"click"},on:{command:e.headerMoreHandleClick}},[i("el-button",{attrs:{icon:"el-icon-more"}}),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.headerMoreHandle,function(t,l){return i("el-dropdown-item",{key:l,attrs:{icon:t.icon,command:t.type}},[e._v(e._s(t.name))])}))],1):e._e()],1)],2),e._v(" "),i("div",{staticClass:"crm-container"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"n-table--border el-table-header--white",staticStyle:{width:"100%"},attrs:{id:"crm-table","row-height":40,data:e.list,height:e.tableHeight,"use-virtual":"",stripe:"",border:"","highlight-current-row":""}},[e._l(e.fieldList,function(t,l){return i("el-table-column",{key:l,attrs:{fixed:0==l,prop:t.fieldName,label:t.name,"min-width":t.width,formatter:e.fieldFormatter,"show-overflow-tooltip":""}})}),e._v(" "),i("el-table-column")],2),e._v(" "),i("div",{staticClass:"p-contianer"},[i("el-pagination",{staticClass:"p-bar",attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:pageSize":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},[],!1,null,"0b9f91bc",null);v.options.__file="index.vue";t.default=v.exports},Pqxw:function(e,t,i){e.exports={xrColorPrimary:"#2362FB"}},UGe0:function(e,t,i){"use strict";var l=i("XAon"),a=i("3pgX"),o=i("Woz+"),n=i("8GhS"),r=i("DMJz"),s=i("tG22"),c=i("bWDp"),d={name:"WkForm",components:{WkUserSelect:l.a,WkDepSelect:a.a,VDistpicker:o.a,XhFiles:n.d,WkSelect:r.a,WkCheckbox:s.a},mixins:[c.a],inheritAttrs:!1,props:{fieldFrom:{type:Object,default:function(){return{}}},fieldList:{type:Array,default:function(){return[]}},customClass:{type:String,default:"is-two-columns"}},data:function(){return{instance:null}},computed:{},watch:{},mounted:function(){var e=this;this.$nextTick(function(){e.instance=e.$refs.form})},beforeDestroy:function(){},methods:{}},f=(i("mYM5"),i("X+Pv"),i("KHd+")),p=Object(f.a)(d,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-form",e._g(e._b({ref:"form",staticClass:"wk-form",class:e.customClass},"el-form",e.$attrs,!1),e.$listeners),[e._l(e.fieldList,function(t,l){return i("el-form-item",{key:l,class:[t.className||"","is-"+t.formType],attrs:{prop:t.field}},[i("template",{slot:"label"},[e._v("\n      "+e._s(t.name)+"\n      "),"tooltip"==t.tipType?i("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.getTips(t))},slot:"content"}),e._v(" "),i("i",{staticClass:"wk wk-help wk-help-tips"})]):i("span",{staticStyle:{color:"#999"}},[e._v("\n        "+e._s(e.getTips(t))+"\n      ")])],1),e._v(" "),"text"==t.formType?i("el-input",{attrs:{disabled:t.disabled,maxlength:100,placeholder:t.placeholder,type:t.formType},on:{input:function(i){e.commonChange(t,l,i)}},model:{value:e.fieldFrom[t.field],callback:function(i){e.$set(e.fieldFrom,t.field,i)},expression:"fieldFrom[item.field]"}}):e.isTrimInput(t.formType)?i("el-input",{attrs:{disabled:t.disabled,"prefix-icon":e.getInputIcon(t.formType),maxlength:e.getInputMaxlength(t.formType),placeholder:t.placeholder,type:"text"},on:{input:function(i){e.commonChange(t,l,i)}},model:{value:e.fieldFrom[t.field],callback:function(i){e.$set(e.fieldFrom,t.field,"string"==typeof i?i.trim():i)},expression:"fieldFrom[item.field]"}}):"number"==t.formType?i("el-input-number",{attrs:{placeholder:t.placeholder,disabled:t.disabled,controls:!1},on:{change:function(i){e.commonChange(t,l,i)}},model:{value:e.fieldFrom[t.field],callback:function(i){e.$set(e.fieldFrom,t.field,i)},expression:"fieldFrom[item.field]"}}):"floatnumber"==t.formType?i("el-input-number",{attrs:{placeholder:t.placeholder,disabled:t.disabled,controls:!1},on:{change:function(i){e.commonChange(t,l,i)}},model:{value:e.fieldFrom[t.field],callback:function(i){e.$set(e.fieldFrom,t.field,i)},expression:"fieldFrom[item.field]"}}):"textarea"==t.formType?i("el-input",{attrs:{disabled:t.disabled,rows:3,autosize:{minRows:3},maxlength:t.maxlength||800,placeholder:t.placeholder,type:t.formType,resize:"none"},on:{input:function(i){e.commonChange(t,l,i)}},model:{value:e.fieldFrom[t.field],callback:function(i){e.$set(e.fieldFrom,t.field,i)},expression:"fieldFrom[item.field]"}}):"select"===t.formType&&t.hasOwnProperty("optionsData")?i("wk-select",{attrs:{disabled:t.disabled,clearable:t.clearable,placeholder:t.placeholder,options:t.setting,"show-type":1===t.precisions?"tiled":"default","other-show-input":t.hasOwnProperty("optionsData")},on:{change:function(i){e.commonChange(t,l,i)}},model:{value:e.fieldFrom[t.field],callback:function(i){e.$set(e.fieldFrom,t.field,i)},expression:"fieldFrom[item.field]"}}):"checkbox"===t.formType&&t.hasOwnProperty("optionsData")?i("wk-checkbox",{attrs:{disabled:t.disabled,clearable:t.clearable,placeholder:t.placeholder,options:t.setting,"show-type":1===t.precisions?"tiled":"default","other-show-input":t.hasOwnProperty("optionsData")},on:{change:function(i){e.commonChange(t,l,i)}},model:{value:e.fieldFrom[t.field],callback:function(i){e.$set(e.fieldFrom,t.field,i)},expression:"fieldFrom[item.field]"}}):["checkbox","select"].includes(t.formType)?i("el-select",{staticStyle:{width:"100%"},attrs:{disabled:t.disabled,clearable:t.clearable,placeholder:t.placeholder,multiple:"checkbox"===t.formType},on:{change:function(i){e.commonChange(t,l,i)}},model:{value:e.fieldFrom[t.field],callback:function(i){e.$set(e.fieldFrom,t.field,i)},expression:"fieldFrom[item.field]"}},e._l(t.setting,function(t,l){return i("el-option",{key:l,attrs:{label:e.isEmptyValue(t.value)?t:t.label||t.name,value:e.isEmptyValue(t.value)?t:t.value}})})):"checkbox"==t.formType?i("el-select",{staticStyle:{width:"100%"},attrs:{disabled:t.disabled,clearable:t.clearable,placeholder:t.placeholder,multiple:""},on:{change:function(i){e.commonChange(t,l,i)}},model:{value:e.fieldFrom[t.field],callback:function(i){e.$set(e.fieldFrom,t.field,i)},expression:"fieldFrom[item.field]"}},e._l(t.setting,function(t,l){return i("el-option",{key:l,attrs:{label:e.isEmptyValue(t.value)?t:t.label||t.name,value:e.isEmptyValue(t.value)?t:t.value}})})):"date"==t.formType?i("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:t.disabled,clearable:"",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},on:{change:function(i){e.commonChange(t,l,i)}},model:{value:e.fieldFrom[t.field],callback:function(i){e.$set(e.fieldFrom,t.field,i)},expression:"fieldFrom[item.field]"}}):"dateRange"==t.formType?i("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:t.disabled,type:t.dateType||"daterange","value-format":t.dateValueFormat||"yyyy-MM-dd",clearable:"","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:function(i){e.commonChange(t,l,i)}},model:{value:e.fieldFrom[t.field],callback:function(i){e.$set(e.fieldFrom,t.field,i)},expression:"fieldFrom[item.field]"}}):"datetime"==t.formType?i("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:t.disabled,clearable:"",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},on:{change:function(i){e.commonChange(t,l,i)}},model:{value:e.fieldFrom[t.field],callback:function(i){e.$set(e.fieldFrom,t.field,i)},expression:"fieldFrom[item.field]"}}):"structure"==t.formType?i("wk-dep-select",{staticStyle:{width:"100%"},attrs:{request:t.request,props:t.props,params:t.params,disabled:t.disabled,radio:!!e.isEmptyValue(t.radio)||t.radio},on:{change:function(i){e.depOrUserChange(t,l,arguments[0],arguments[1])}},model:{value:e.fieldFrom[t.field],callback:function(i){e.$set(e.fieldFrom,t.field,i)},expression:"fieldFrom[item.field]"}}):["single_user","user"].includes(t.formType)?i("wk-user-select",{staticStyle:{width:"100%"},attrs:{request:t.request,props:t.props,params:t.params,disabled:t.disabled,radio:!!e.isEmptyValue(t.radio)||t.radio},on:{change:function(i){e.depOrUserChange(t,l,arguments[0],arguments[1])}},model:{value:e.fieldFrom[t.field],callback:function(i){e.$set(e.fieldFrom,t.field,i)},expression:"fieldFrom[item.field]"}}):"radio"==t.formType?i("el-radio-group",{attrs:{disabled:t.disabled,placeholder:t.placeholder},on:{change:function(i){e.commonChange(t,l,i)}},model:{value:e.fieldFrom[t.field],callback:function(i){e.$set(e.fieldFrom,t.field,i)},expression:"fieldFrom[item.field]"}},e._l(t.setting,function(t,l){return i("el-radio",{key:l,attrs:{label:e.isEmptyValue(t.value)?t:t.value}},[e._v("\n        "+e._s(e.isEmptyValue(t.value)?t:t.label||t.name)+"\n      ")])})):"boolean_value"==t.formType?i("el-switch",{attrs:{disabled:t.disabled,"active-value":"1","inactive-value":"0"},model:{value:e.fieldFrom[t.field],callback:function(i){e.$set(e.fieldFrom,t.field,i)},expression:"fieldFrom[item.field]"}}):"address"==t.formType?i("v-distpicker",{attrs:{province:e.fieldFrom[t.field].province,city:e.fieldFrom[t.field].city,area:e.fieldFrom[t.field].area},on:{province:function(i){e.selectProvince(i,t,l)},city:function(i){e.selectCity(i,t,l)},area:function(i){e.selectArea(i,t,l)}}}):"file"==t.formType?i("xh-files",{attrs:{value:e.fieldFrom[t.field],disabled:t.disabled},on:{"value-change":function(i){e.oldChange(i,t,l)}}}):[e._t("default",null,{data:t,index:l})]],2)}),e._v(" "),e._t("suffix")],2)},[],!1,null,"61367085",null);p.options.__file="index.vue";t.a=p.exports},"X+Pv":function(e,t,i){"use strict";var l=i("Ed9r");i.n(l).a},c1z1:function(e,t,i){},ihDC:function(e,t,i){},kBEL:function(e,t,i){"use strict";var l=i("UGe0"),a=i("7Qib"),o={name:"WkPopoverFilter",components:{WkForm:l.a},inheritAttrs:!1,props:{hasContent:{type:Boolean,default:!1},fieldFrom:Object,fieldList:Array},data:function(){return{popverShow:!1,from:{}}},computed:{},watch:{popverShow:function(e){this.$emit(e?"show":"hide")},fieldFrom:{handler:function(){var e=Object(a.w)(this.fieldFrom);this.fieldList.forEach(function(t){"range"==t.formType&&(e[t.field]=e[t.field]?e[t.field]:["",""])}),this.from=e},immediate:!0}},mounted:function(){},beforeDestroy:function(){},methods:{sureClick:function(){this.$emit("update:fieldFrom",this.from),this.$emit("sure",Object(a.w)(this.from)),this.popverShow=!1},resetClick:function(){this.$emit("reset")},hide:function(){var e=Object(a.w)(this.fieldFrom);this.fieldList.forEach(function(t){"range"==t.formType&&(e[t.field]=e[t.field]?e[t.field]:["",""])}),this.from=e}}},n=(i("Dpm0"),i("KHd+")),r=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-popover",e._g(e._b({staticClass:"wk-popover-filter",on:{hide:e.hide},model:{value:e.popverShow,callback:function(t){e.popverShow=t},expression:"popverShow"}},"el-popover",e.$attrs,!1),e.$listeners),[i("div",{staticStyle:{padding:"3px 12px"}},[i("wk-form",{staticClass:"wk-filter-form",attrs:{"field-from":e.from,"field-list":e.fieldList,"custom-class":""},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.data;return[l&&"range"==l.formType?i("div",{staticClass:"wk-range-select"},[i("flexbox",{staticClass:"wk-range-select__top"},[i("el-input",{attrs:{type:"number",maxlength:"100"},model:{value:e.from[l.field][0],callback:function(t){e.$set(e.from[l.field],0,t)},expression:"from[data.field][0]"}}),e._v(" "),i("span",{staticClass:"range-separator"},[e._v("至")]),e._v(" "),i("el-input",{attrs:{type:"number",maxlength:"100"},model:{value:e.from[l.field][1],callback:function(t){e.$set(e.from[l.field],1,t)},expression:"from[data.field][1]"}})],1)],1):e._e()]}}])}),e._v(" "),i("div",[i("el-button",{attrs:{type:"primary"},on:{click:e.sureClick}},[e._v("确定")]),e._v(" "),i("el-button",{on:{click:e.resetClick}},[e._v("重置")])],1)],1),e._v(" "),i("i",{staticClass:"wk wk-screening",class:{"is-select":e.hasContent||e.popverShow},attrs:{slot:"reference"},slot:"reference"})])},[],!1,null,"5fb20868",null);r.options.__file="index.vue";t.a=r.exports},mYM5:function(e,t,i){"use strict";var l=i("Pqxw");i.n(l).a},qI47:function(e,t,i){},zIzm:function(e,t,i){"use strict";var l=i("ihDC");i.n(l).a}}]);