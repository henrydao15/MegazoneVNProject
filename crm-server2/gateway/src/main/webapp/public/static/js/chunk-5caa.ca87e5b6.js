(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5caa"],{"/alq":function(e,t,i){},"1xWU":function(e,t,i){},"5xlL":function(e,t,i){"use strict";var a=i("5zEL");i.n(a).a},"5zEL":function(e,t,i){},"6fkd":function(e,t,i){"use strict";var a=i("Y5Xo");i.n(a).a},"7N0o":function(e,t,i){},"7ZQD":function(e,t,i){},"8JBq":function(e,t,i){"use strict";var a=i("FaXT");i.n(a).a},"A/aH":function(e,t,i){},AHMD:function(e,t,i){},CUKw:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var a=i("t3Un");function n(e){return Object(a.a)({url:"hrmActionRecord/queryRecordList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},DGFN:function(e,t,i){},EYLx:function(e,t,i){"use strict";var a=i("h8CF");i.n(a).a},El9w:function(e,t,i){"use strict";var a=i("dukW");i.n(a).a},FaXT:function(e,t,i){},IVrs:function(e,t,i){"use strict";var a=i("DGFN");i.n(a).a},JKkP:function(e,t,i){"use strict";var a=i("NPZe");i.n(a).a},Jbo4:function(e,t,i){"use strict";var a={name:"WkBorderMenu",components:{},props:{list:Array,value:[String,Number],isSelect:{type:Boolean,default:!1}},data:function(){return{tabType:""}},computed:{},watch:{value:{handler:function(e){this.tabType=e},immediate:!0}},mounted:function(){},beforeDestroy:function(){},methods:{tabClick:function(e,t){this.$emit("input",e.name),this.$emit("select",e,t)}}},n=(i("fUY0"),i("KHd+")),o=Object(n.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("flexbox",{staticClass:"wk-border-menu",class:{"is-select":e.isSelect}},e._l(e.list,function(t,a){return i("div",{key:a,staticClass:"wk-border-menu__item",class:{"is-select":e.tabType==t.name},on:{click:function(i){e.tabClick(t,a)}}},[i("div",{staticClass:"label"},[e._v(e._s(t.label))]),e._v(" "),i("div",{staticClass:"num"},[e._v(e._s(t.num))])])}))},[],!1,null,"8dc40426",null);o.options.__file="index.vue";t.a=o.exports},NPZe:function(e,t,i){},O50V:function(e,t,i){"use strict";var a=i("oxGU");i.n(a).a},PwLV:function(e,t,i){"use strict";var a={name:"WkFileSelect",components:{},props:{name:{type:String,default:"file"},disabled:Boolean,multiple:Boolean,accept:{type:String,default:"*.*"}},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{handleChange:function(e){var t=e.target.files;t&&this.$emit("change",t,e)},handleClick:function(){var e=this;this.disabled||this.$wkFile.select({name:this.name,multiple:this.multiple,accept:this.accept}).then(function(t){e.handleChange(t)})}}},n=(i("El9w"),i("KHd+")),o=Object(n.a)(a,function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"wk-file-select",on:{click:this.handleClick}},[this._t("default")],2)},[],!1,null,"b95eaae0",null);o.options.__file="index.vue";t.a=o.exports},Qehy:function(e,t,i){"use strict";i.d(t,"c",function(){return n}),i.d(t,"a",function(){return o}),i.d(t,"b",function(){return s}),i.d(t,"f",function(){return l}),i.d(t,"g",function(){return r}),i.d(t,"h",function(){return d}),i.d(t,"e",function(){return c}),i.d(t,"d",function(){return u});var a=i("t3Un");function n(e){return Object(a.a)({url:"hrmEmployee/SocialSecurity/salarySocialSecurityInformation/"+e,method:"post"})}function o(e){return Object(a.a)({url:"hrmEmployee/SocialSecurity/addSalaryCard",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function s(e){return Object(a.a)({url:"hrmEmployee/SocialSecurity/addSocialSecurity",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(a.a)({url:"hrmEmployee/SocialSecurity/setSalaryCard",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function r(e){return Object(a.a)({url:"hrmEmployee/SocialSecurity/setSocialSecurity",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(a.a)({url:"hrmEmployee/updateInsuranceScheme",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(a.a)({url:"hrmEmployee/SocialSecurity/querySalaryList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(e){return Object(a.a)({url:"hrmEmployee/SocialSecurity/querySalaryDetail/"+e,method:"post"})}},S5CY:function(e,t,i){},URGv:function(e,t,i){"use strict";var a=i("7Qib"),n=i("t2rG"),o={name:"WkFieldSet",components:{Draggable:i.n(n).a},props:{loading:Boolean,fields:Array},data:function(){return{show:!1,copyfields:[],search:""}},computed:{},watch:{fields:{handler:function(){this.copyfields=Object(a.w)(this.fields)},immediate:!0}},mounted:function(){},beforeDestroy:function(){},methods:{searchClick:function(){var e=this;this.fields=this.fields.map(function(t){var i=t.name.indexOf(e.search);if(-1!=i){t.left=t.name.substr(0,i),t.center=t.name.substr(i,e.search.length);var a=i+e.search.length;t.right=t.name.substr(a,t.name.length-a)}else t.left="",t.center="",t.right="";return t})},save:function(){this.copyfields.filter(function(e){return e.check}).length<2?this.$message.error("至少要显示两列"):this.$emit("save",this.copyfields)},reSet:function(){this.copyfields=Object(a.w)(this.fields)}}},s=(i("JKkP"),i("KHd+")),l=Object(s.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-popover",{attrs:{"popper-class":"no-padding-popover",placement:"bottom",width:"240",trigger:"click"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"wk-field-set"},[i("el-input",{staticClass:"wk-field-set__search",attrs:{placeholder:"搜索字段"},on:{input:e.searchClick},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),i("div",{staticClass:"wk-field-set__content"},[i("draggable",{attrs:{options:{dragClass:"sortable-drag",forceFallback:!1}},model:{value:e.copyfields,callback:function(t){e.copyfields=t},expression:"copyfields"}},e._l(e.copyfields,function(t,a){return i("div",{key:a,staticClass:"wk-field-set__content--item text-one-line"},[i("el-switch",{model:{value:t.check,callback:function(i){e.$set(t,"check",i)},expression:"item.check"}}),e._v(" "),t.center?i("span",[e._v(e._s(t.left)),i("span",{staticClass:"input-word"},[e._v(e._s(t.center))]),e._v(e._s(t.right))]):i("span",[e._v(e._s(t.name))])],1)}))],1),e._v(" "),i("div",{staticClass:"wk-field-set__ft"},[i("el-button",{attrs:{type:"text"},on:{click:e.reSet}},[e._v("重置")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1),e._v(" "),e.$slots.reference?e._t("default",null,{slot:"reference"}):i("i",{staticClass:"wk wk-config table-set",attrs:{slot:"reference"},on:{click:function(t){e.show=!e.show}},slot:"reference"})],2)},[],!1,null,"36e82ac0",null);l.options.__file="index.vue";t.a=l.exports},UzdC:function(e,t,i){"use strict";var a={name:"WkDetailHeader",components:{},props:{iconClass:[String,Array],iconBgColor:{type:String,default:"#ECEEF2"},iconColor:{type:String,default:"#42526E"},detailName:String,detailValue:String,defaultBodyShow:{type:Boolean,default:!0},dropdownItems:Array,showEdit:{type:Boolean,default:!1},editButtonClass:{type:String,default:"xr-btn--primary"}},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{handleTypeClick:function(e){this.$emit("command-select",e)},editClick:function(){this.$emit("edit")}}},n=(i("nEBa"),i("KHd+")),o=Object(n.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("flexbox",{staticClass:"xr-detail-header"},[e.iconClass?i("div",{staticClass:"xr-detail-header__icon",style:{backgroundColor:e.iconBgColor}},[i("i",{class:e.iconClass,style:{color:e.iconColor}})]):e._e(),e._v(" "),i("div",{staticClass:"xr-detail-header__body"},[e._t("body"),e._v(" "),e.defaultBodyShow?[i("div",{staticClass:"detail-name"},[e._v(e._s(e.detailName))]),e._v(" "),i("div",{staticClass:"detail-value"},[e._v(e._s(e.detailValue))])]:e._e()],2),e._v(" "),i("div",{staticClass:"xr-detail-header__ft"},[e._t("ft"),e._v(" "),e.showEdit?i("el-button",{staticClass:"xr-detail-header--button",class:e.editButtonClass,staticStyle:{"margin-right":"10px"},attrs:{icon:"wk wk-circle-edit",type:"primary"},nativeOn:{click:function(t){return e.editClick(t)}}},[e._v("编辑")]):e._e(),e._v(" "),e.dropdownItems&&e.dropdownItems.length>0?i("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleTypeClick}},[i("el-button",{staticClass:"xr-detail-header--more",attrs:{icon:"el-icon-more"}}),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.dropdownItems,function(t,a){return i("el-dropdown-item",{key:a,attrs:{icon:t.icon,command:t.command}},[e._v(e._s(t.label))])}))],1):e._e()],2)])},[],!1,null,"e893dc20",null);o.options.__file="index.vue";t.a=o.exports},W7L6:function(e,t,i){},WEGX:function(e,t,i){"use strict";var a=i("QbLZ"),n=i.n(a),o=i("cHj4"),s=i("Ew9n"),l=i("4d7F"),r=i.n(l),d=i("GQeE"),c=i.n(d),u=i("Gqw/"),m=i("j3/X"),f=i("0WXr"),h=i("XaGJ"),p=i("TN+K"),g=i("JPSa"),v=i("V4FA"),y=i("7Qib"),b=i("a/5N"),w=i("ixM/"),A=i("IEYw"),C={name:"EmployeePostInfo",components:{WkBaseDetail:m.a,WkCustomBaseDetail:f.a,FormAddDialog:h.a,CustomFormAddDialog:p.a},mixins:[A.a],props:{id:[String,Number],detail:Object},data:function(){return{loading:!1,leaveDetail:null,postEditList:[],postList:[],leaveFields:[{label:"计划离职日期",field:"planQuitTime",value:""},{label:"申请离职日期",field:"applyQuitTime",value:""},{label:"薪资结算日期",field:"salarySettlementTime",value:""},{label:"离职类型",field:"quitType",value:""},{label:"离职原因",field:"quitReason",value:""},{label:"备注",field:"remarks",value:""}],leaveList:[],formAddCommond:"",formAddTitle:"",formAddForm:{},formAddRules:{},formAddFields:[],formAddDialogShow:!1,channelList:[],customFormAddFields:[],customFormAddDialogShow:!1,updateKey:Date.now()}},inject:["editAuth"],computed:{dropdownItems:function(){var e=[];return this.editAuth&&this.detail&&3==this.detail.entryStatus&&e.push({label:"调整离职信息",command:"change-leave",icon:""}),e},postDropdownItems:function(){var e=[];return this.editAuth&&e.push({label:"编辑",command:"edit",icon:""}),e}},watch:{id:function(e){this.getDetail()}},mounted:function(){this.getDetail()},activated:function(){},deactivated:function(){},methods:{getDetail:function(){var e=this;this.loading=!0,Object(u.c)(this.id).then(function(t){e.loading=!1;var i=t.data.information||[];e.postEditList=Object(y.w)(i);var a=[];i.forEach(function(e){e.value=e.fieldValue,"employment_forms"==e.fieldName?e.value=w.d.employmentFormsValue[e.value]:"probation"==e.fieldName?e.value=w.d.probationValue[e.value]:"status"==e.fieldName?e.value=w.d.statusValue[e.value]:"user"==e.formType||"structure"==e.formType||"recruit_channel"==e.formType||"area"==e.formType?e.value=e.fieldValueDesc:"company_age"==e.fieldName&&(e.value=e.fieldValueDesc),a.push(e)});var n=e.getFormAssistIds([a]),o=[];a.forEach(function(t){if(e.getFormItemDefaultProperty(t,!1),t.show=!n.includes(t.formAssistId),"detail_table"===t.formType){if(!Object(b.b)(t.value)){var i=t.value;Object(b.a)(i)&&i.forEach(function(e){e&&e.forEach(function(e){e&&(e.value=e.fieldValue)})}),t.value=e.getItemValue(t,null,"update")}Object(b.a)(t.value)||(t.value=[])}t.show&&o.push(t)}),e.postList=[{name:"岗位信息",list:o}];var s=t.data.employeeQuitInfo;if(e.leaveDetail=s,s){var l=[];g.a.getFields(s).forEach(function(e){var t={label:e.name};"quitType"==e.field?t.value=g.a.quitTypeValue[s[e.field]]:"quitReason"==e.field?t.value=g.a.quitReasonValue[s[e.field]]:t.value=s[e.field],l.push(t)}),e.leaveList=[{name:"离职信息",list:l}]}else e.leaveList=[]}).catch(function(){e.loading=!1})},topCommandSelect:function(e){this.formAddCommond=e,"change-leave"==e&&(this.formAddTitle="调整离职信息",this.formAddForm=this.leaveDetail?{planQuitTime:this.leaveDetail.planQuitTime,applyQuitTime:this.leaveDetail.applyQuitTime,salarySettlementTime:this.leaveDetail.salarySettlementTime,quitType:this.leaveDetail.quitType,quitReason:this.leaveDetail.quitReason,remarks:this.leaveDetail.remarks,quitInfoId:this.leaveDetail.quitInfoId}:{quitType:1,quitReason:1},this.formAddRules=g.a.getRules(this.formAddForm),this.formAddFields=g.a.getFields(this.formAddForm),this.formAddDialogShow=!0)},formAddPass:function(){var e=this;this.$refs.formAdddialog.loading=!0,this.formAddForm.employeeId=this.id,Object(u.d)(this.formAddForm).then(function(t){e.$refs.formAdddialog.loading=!1,e.$message.success(e.formAddTitle+"成功"),e.formAddDialogShow=!1,e.getDetail(),e.updateKey=Date.now(),e.$emit("handle",{type:e.formAddCommond})}).catch(function(){e.$refs.formAdddialog.loading=!1})},customFormAddPass:function(e){var t=this,i=Object(y.w)(e.field);i.forEach(function(e){if("work_city"==e.fieldName)if(e.value){var t="";c()(e.value).forEach(function(i){e.value[i]&&(t?t+=","+e.value[i]:t=e.value[i])}),e.value=t}else e.value="";if(45===e.type){var i=e.value;Object(b.a)(i)&&i.forEach(function(e){e&&e.forEach(function(e){e&&(e.fieldValue=e.value)})})}delete e.fieldType,e.fieldValue=e.value,delete e.value});var a=this.$refs.customFormAdddialog;a.loading=!0;var n={};n.employeeId=this.id,n.dataList=i,Object(u.e)(n).then(function(e){a.loading=!1,t.$message.success(t.formAddTitle+"成功"),t.customFormAddDialogShow=!1,t.getDetail(),t.updateKey=Date.now(),t.$emit("handle",{type:t.formAddCommond})}).catch(function(){a.loading=!1})},postCommandSelect:function(e){var t=this;if("edit"==e){var i=[];Object(y.w)(this.postEditList).forEach(function(e){if("company_age"!=e.fieldName&&"become_time"!=e.fieldName){if(t.handleFieldExtendList(e),v.a.getCreateFieldDefalutData(e),e.value=e.fieldValue,t.handleTableValue(e),"work_city"===e.fieldName&&(e.formType="address"),"dept_id"!==e.fieldName&&"parent_id"!==e.fieldName||(e.radio=!0),"employment_forms"==e.fieldName?(e.disabled=!0,e.setting=w.d.employmentFormsSetting):"probation"==e.fieldName?e.setting=w.d.probationSetting:"recruit_channel"==e.formType?(e.formType="select",t.channelList&&t.channelList.length>0?e.setting=t.channelList:t.getChannelDetail(e)):"status"==e.fieldName&&(e.setting=w.d.statusSetting),"detail_table"===e.formType){if(!Object(b.b)(e.value)){var a=e.value;Object(b.a)(a)&&a.forEach(function(e){e&&e.forEach(function(e){e&&(e.value=e.fieldValue)})})}Object(b.a)(e.value)||(e.value=[])}if(2==t.detail.employmentForms||1==t.detail.employmentForms&&"status"!=e.fieldName){if("address"==e.formType)if(e.value){var n=e.value.split(",");e.value={province:n[0]||"",city:n[1]||"",area:n[2]||""}}else e.value={};i.push(e)}}}),this.formAddTitle="编辑岗位信息",this.customFormAddFields=i,this.customFormAddDialogShow=!0}},UniquePromise:function(e){var t=this,i=e.field,a=e.value;return new r.a(function(e,n){Object(o.v)({fieldId:i.fieldId,id:t.id,value:a}).then(function(t){e()}).catch(function(){n()})})},formAddChange:function(e,t,i,a,n){if(a&&(e.valueList=a),"entry_time"==e.field){var o=this.formAddFields.find(function(e){return"company_age_start_time"===e.fieldName});o&&this.$set(n,o.fieldName,n.entry_time)}"调整离职信息"===this.formAddTitle&&"quitType"==e.field&&(1==i?n.quitReason=1:2==i?n.quitReason=11:3==i&&(n.quitReason=""),this.formAddRules=g.a.getRules(n),this.formAddFields=g.a.getFields(n))},getChannelDetail:function(e){var t=this;return new r.a(function(i,a){Object(u.f)().then(function(a){var n=a.data||[];n.forEach(function(e){1==e.status&&(e.label=e.value,e.value=e.channelId)}),t.channelList=n,t.$set(e,"setting",t.channelList),i(t.channelList)}).catch(function(){})})},handleTableValue:function(e){if("detail_table"===e.formType){if(!Object(b.b)(e.value)){var t=e.value;Object(b.a)(t)&&t.forEach(function(e){e&&e.forEach(function(e){e&&(v.a.getCreateFieldDefalutData(e),e.value=e.fieldValue)})})}Object(b.a)(e.value)||(e.value=[])}},handleFieldExtendList:function(e){if("detail_table"===e.formType&&!Object(b.b)(e.fieldExtendList)){var t=e.fieldExtendList;Object(b.a)(t)&&t.forEach(function(e){e&&(v.a.getCreateFieldDefalutData(e),e.value=e.fieldValue)})}}}},_=(i("IVrs"),i("KHd+")),k=Object(_.a)(C,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],key:e.updateKey},[i("wk-custom-base-detail",{attrs:{list:e.postList},scopedSlots:e._u([{key:"data",fn:function(t){var i=t.data;return[e._v(e._s(i.value))]}}])},[e.editAuth?i("el-button",{attrs:{slot:"more",type:"text"},on:{click:function(t){e.postCommandSelect("edit")}},slot:"more"},[e._v("编辑")]):e._e()],1),e._v(" "),e.leaveList.length>0?i("wk-base-detail",{attrs:{"dropdown-items":e.dropdownItems,list:e.leaveList},on:{"top-command-select":e.topCommandSelect}}):e._e(),e._v(" "),i("form-add-dialog",{ref:"formAdddialog",attrs:{title:e.formAddTitle,form:e.formAddForm,rules:e.formAddRules,fields:e.formAddFields,visible:e.formAddDialogShow},on:{"update:form":function(t){e.formAddForm=t},"update:visible":function(t){e.formAddDialogShow=t},pass:e.formAddPass,change:e.formAddChange}}),e._v(" "),e.customFormAddDialogShow?i("custom-form-add-dialog",{ref:"customFormAdddialog",attrs:{title:e.formAddTitle,id:e.id,fields:e.customFormAddFields,visible:e.customFormAddDialogShow},on:{"update:visible":function(t){e.customFormAddDialogShow=t},pass:e.customFormAddPass}}):e._e()],1)},[],!1,null,"75b6cc32",null);k.options.__file="EmployeePostInfo.vue";var T=k.exports,D=i("EP+0"),S=i("lMh0"),F=i("REUC"),x={name:"EmployeeBaseInfo",components:{WkBaseDetail:m.a,CreateSections:D.a,WkBaseDetailSection:S.a,FormAddDialog:h.a,WkCustomBaseDetail:f.a,WkCustomBaseDetailSection:F.a,CustomFormAddDialog:p.a},filters:{},mixins:[A.a],props:{id:[String,Number]},data:function(){return{loading:!1,baseEditList:[],baseList:[],communicationEditList:[],communicationList:[],educationBaseList:[],educationList:[],workBaseList:[],workList:[],certificateBaseList:[],certificateList:[],trainingBaseList:[],trainingList:[],contactsBaseList:[],contactsFieldList:[],contactsAddRules:{},contactsList:[],formAddTitle:"",formAddForm:{},formAddRules:{},formAddFields:[],formAddDialogShow:!1,customFormAddFields:[],customFormAddDialogShow:!1,updateKey:Date.now()}},inject:["editAuth"],computed:{baseDropdownItems:function(){var e=[];return this.editAuth&&e.push({label:"编辑",command:"edit",icon:""}),e},communicationDropdownItems:function(){var e=[];return this.editAuth&&e.push({label:"编辑",command:"edit",icon:""}),e},dropdownItems:function(){return this.editAuth?[{label:"编辑",command:"edit"},{label:"删除",command:"delete"}]:[]}},watch:{id:function(e){this.getDetail()}},mounted:function(){this.getDetail()},activated:function(){},deactivated:function(){},methods:{getDetail:function(){var e=this;this.loading=!0,Object(o.B)(this.id).then(function(t){e.loading=!1;var i=t.data||{},a=Object(y.w)(i);e.baseList=[{name:"基本信息",list:e.getCustomFieldListValue(i.information||[])}],e.communicationList=[{name:"通讯信息",list:e.getCustomFieldListValue(i.communicationInformation||[])}],e.baseEditList=a.information||[],e.communicationEditList=a.communicationInformation||[];var n=i.educationExperienceList||[],o=[];e.educationBaseList=n,n.forEach(function(e){var t=[];w.c.fields.forEach(function(i){var a={};a.label=i.name,"education"===i.field?a.value=w.c.educationValue[e[i.field]]:"teachingMethods"===i.field?a.value=w.c.teachingMethodsValue[e[i.field]]:"isFirstDegree"===i.field?a.value=w.c.isFirstDegreeValue[e[i.field]]:a.value=e[i.field],t.push(a)}),o.push(t)}),e.educationList=o;var s=i.workExperienceList||[];e.workBaseList=s,e.workList=e.getCommonFieldListValue(s,w.g.fields);var l=i.certificateList||[];e.certificateBaseList=l,e.certificateList=e.getCommonFieldListValue(l,w.a.fields);var r=i.trainingExperienceList||[];e.trainingBaseList=r,e.trainingList=e.getCommonFieldListValue(r,w.f.fields);var d=i.hrmEmployeeContacts||[];e.contactsBaseList=a.hrmEmployeeContacts||[],e.contactsList=d.map(function(t){return e.getCustomFieldListValue(t.information||[])})}).catch(function(){e.loading=!1})},getCustomFieldListValue:function(e){var t=this;e.forEach(function(e){["id_type","sex","birthday_type","highest_education"].includes(e.fieldName)?e.value=e.fieldValueDesc:e.value=e.fieldValue});var i=this.getFormAssistIds([e]),a=[];return e.forEach(function(e){if(t.getFormItemDefaultProperty(e,!1),e.show=!i.includes(e.formAssistId),"detail_table"===e.formType){if(!Object(b.b)(e.value)){var n=e.value;Object(b.a)(n)&&n.forEach(function(e){e&&e.forEach(function(e){e&&(e.value=e.fieldValue)})}),e.value=t.getItemValue(e,null,"update")}Object(b.a)(e.value)||(e.value=[])}e.show&&a.push(e)}),a},getCommonFieldListValue:function(e,t){var i=[];return e.forEach(function(e){var a=[];t.forEach(function(t){var i={};i.label=t.name,i.value=e[t.field],a.push(i)}),i.push(a)}),i},educationCreateClick:function(){this.formAddTitle="新建教育经历",this.formAddForm={isFirstDegree:1,education:1},this.formAddRules=w.c.rules,this.formAddFields=w.c.fields,this.formAddDialogShow=!0},uploadEmployeeRelativeData:function(){var e=this;this.$refs.formAdddialog.loading=!0,this.formAddForm.employeeId=this.id;var t=null;"新建教育经历"===this.formAddTitle?t=o.c:"编辑教育经历"===this.formAddTitle?t=o.O:"新建工作经历"===this.formAddTitle?t=o.f:"编辑工作经历"===this.formAddTitle?t=o.R:"新建证书/证件"===this.formAddTitle?t=o.a:"编辑证书/证件"===this.formAddTitle?t=o.L:"添加培训经历"===this.formAddTitle?t=o.e:"编辑培训经历"===this.formAddTitle?t=o.Q:"添加联系人"===this.formAddTitle?t=o.b:"编辑联系人"===this.formAddTitle&&(t=o.N),t(this.formAddForm).then(function(t){e.$refs.formAdddialog.loading=!1,e.$message.success(e.formAddTitle+"成功"),e.formAddDialogShow=!1,e.updateKey=Date.now(),e.getDetail()}).catch(function(){e.$refs.formAdddialog.loading=!1})},workCreateClick:function(){this.formAddTitle="新建工作经历",this.formAddForm={isFirstDegree:1,education:1},this.formAddRules=w.g.rules,this.formAddFields=w.g.fields,this.formAddDialogShow=!0},certificateCreateClick:function(){this.formAddTitle="新建证书/证件",this.formAddForm={},this.formAddRules=w.a.rules,this.formAddFields=w.a.fields,this.formAddDialogShow=!0},trainingCreateClick:function(){this.formAddTitle="添加培训经历",this.formAddForm={},this.formAddRules=w.f.rules,this.formAddFields=w.f.fields,this.formAddDialogShow=!0},contactsCreateClick:function(){var e=this;Object(o.F)().then(function(t){var i=[];(t.data||[]).forEach(function(t){e.handleFieldExtendList(t),v.a.getCreateFieldDefalutData(t),t.value=t.fieldValue,e.handleTableValue(t),i.push(t)}),e.formAddTitle="新建联系人",e.formAddForm={},e.customFormAddFields=i,e.customFormAddDialogShow=!0}).catch(function(){})},getCustomEditId:function(){return"新建联系人"===this.formAddTitle?"":this.formAddForm.contactsId||this.id},formAddPass:function(){"编辑基本信息"==this.formAddTitle||"编辑联系人"==this.formAddTitle||"新建联系人"==this.formAddTitle||"编辑通讯信息"==this.formAddTitle?this.uploadCustomRelativeData():this.uploadEmployeeRelativeData()},formAddChange:function(e,t,i,a){a&&(e.valueList=a)},customFormAddPass:function(e){var t=this,i=Object(y.w)(e.field);i.forEach(function(e){if("native_place"==e.fieldName)if(e.value){var t="";c()(e.value).forEach(function(i){e.value[i]&&(t?t+=","+e.value[i]:t=e.value[i])}),e.value=t}else e.value="";if(45===e.type){var i=e.value;Object(b.a)(i)&&i.forEach(function(e){e&&e.forEach(function(e){e&&(e.fieldValue=e.value)})})}delete e.fieldType,e.fieldValue=e.value,delete e.value});var a=this.$refs.customFormAdddialog;a.loading=!0;var n={};n.employeeId=this.id,n.dataList=i;var s=null;"编辑基本信息"===this.formAddTitle?s=o.T:"编辑联系人"===this.formAddTitle?(s=o.N,n.contactsId=this.formAddForm.contactsId):"新建联系人"===this.formAddTitle?s=o.b:"编辑通讯信息"===this.formAddTitle&&(s=o.S),s(n).then(function(e){a.loading=!1,t.$message.success(t.formAddTitle+"成功"),t.customFormAddDialogShow=!1,t.getDetail(),t.updateKey=Date.now(),t.$emit("handle",{type:"update"})}).catch(function(){a.loading=!1})},commandSelect:function(e,t,i){var a=this;if("education"==t){var n=this.educationBaseList[i];"delete"==e?this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.n)(n.educationId).then(function(e){a.$message.success("删除成功"),a.educationBaseList.splice(i,1),a.educationList.splice(i,1)})}).catch(function(){a.$message({type:"info",message:"已取消操作"})}):"edit"==e&&(this.formAddTitle="编辑教育经历",this.formAddForm={education:n.education,graduateSchool:n.graduateSchool,major:n.major,admissionTime:n.admissionTime,graduationTime:n.graduationTime,teachingMethods:n.teachingMethods,isFirstDegree:n.isFirstDegree,educationId:n.educationId},this.formAddRules=w.c.rules,this.formAddFields=w.c.fields,this.formAddDialogShow=!0)}else if("work"==t){var s=this.workBaseList[i];"delete"==e?this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.p)(s.workExpId).then(function(e){a.$message.success("删除成功"),a.workBaseList.splice(i,1),a.workList.splice(i,1)})}).catch(function(){a.$message({type:"info",message:"已取消操作"})}):"edit"==e&&(this.formAddTitle="编辑工作经历",this.formAddForm={workUnit:s.workUnit,post:s.post,workStartTime:s.workStartTime,workEndTime:s.workEndTime,leavingReason:s.leavingReason,witness:s.witness,witnessPhone:s.witnessPhone,workRemarks:s.workRemarks,workExpId:s.workExpId},this.formAddRules=w.g.rules,this.formAddFields=w.g.fields,this.formAddDialogShow=!0)}else if("certificate"==t){var l=this.certificateBaseList[i];"delete"==e?this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.l)(l.certificateId).then(function(e){a.$message.success("删除成功"),a.certificateBaseList.splice(i,1),a.certificateList.splice(i,1)})}).catch(function(){a.$message({type:"info",message:"已取消操作"})}):"edit"==e&&(this.formAddTitle="编辑证书/证件",this.formAddForm={certificateName:l.certificateName,certificateLevel:l.certificateLevel,certificateNum:l.certificateNum,startTime:l.startTime,endTime:l.endTime,issuingAuthority:l.issuingAuthority,issuingTime:l.issuingTime,remarks:l.remarks,certificateId:l.certificateId},this.formAddRules=w.a.rules,this.formAddFields=w.a.fields,this.formAddDialogShow=!0)}else if("training"==t){var r=this.trainingBaseList[i];"delete"==e?this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.o)(r.trainingId).then(function(e){a.$message.success("删除成功"),a.trainingBaseList.splice(i,1),a.trainingList.splice(i,1)})}).catch(function(){a.$message({type:"info",message:"已取消操作"})}):"edit"==e&&(this.formAddTitle="编辑培训经历",this.formAddForm={trainingCourse:r.trainingCourse,trainingOrganName:r.trainingOrganName,startTime:r.startTime,endTime:r.endTime,trainingDuration:r.trainingDuration,trainingResults:r.trainingResults,trainingCertificateName:r.trainingCertificateName,remarks:r.remarks,trainingId:r.trainingId},this.formAddRules=w.f.rules,this.formAddFields=w.f.fields,this.formAddDialogShow=!0)}else if("contacts"==t){var d=Object(y.w)(this.contactsBaseList[i]);if("delete"==e)this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.m)(d.contactsId).then(function(e){a.$message.success("删除成功"),a.contactsBaseList.splice(i,1),a.contactsList.splice(i,1)})}).catch(function(){a.$message({type:"info",message:"已取消操作"})});else if("edit"==e){var c=[];Object(y.w)(d.information||[]).forEach(function(e){a.handleFieldExtendList(e),v.a.getCreateFieldDefalutData(e),e.value=e.fieldValue,a.handleTableValue(e),c.push(e)}),this.formAddTitle="编辑联系人",this.formAddForm={contactsId:d.contactsId},this.customFormAddFields=c,this.customFormAddDialogShow=!0}}},baseCommandSelect:function(e){var t=this;if("edit"==e){var i=[];Object(y.w)(this.baseEditList).forEach(function(e){if("age"!=e.fieldName){if(t.handleFieldExtendList(e),v.a.getCreateFieldDefalutData(e),e.value=e.fieldValue,t.handleTableValue(e),"city"==e.formType)if(e.value){var a=e.value.split(",");e.value={province:a[0]||"",city:a[1]||""}}else e.value={};i.push(e)}}),this.formAddTitle="编辑基本信息",this.customFormAddFields=i,this.customFormAddDialogShow=!0}},handleTableValue:function(e){if("detail_table"===e.formType){if(!Object(b.b)(e.value)){var t=e.value;Object(b.a)(t)&&t.forEach(function(e){e&&e.forEach(function(e){e&&(v.a.getCreateFieldDefalutData(e),e.value=e.fieldValue)})})}Object(b.a)(e.value)||(e.value=[])}},handleFieldExtendList:function(e){if("detail_table"===e.formType&&!Object(b.b)(e.fieldExtendList)){var t=e.fieldExtendList;Object(b.a)(t)&&t.forEach(function(e){e&&(v.a.getCreateFieldDefalutData(e),e.value=e.fieldValue)})}},communicationCommandSelect:function(e){var t=this;if("edit"==e){var i=[];Object(y.w)(this.communicationEditList).forEach(function(e){t.handleFieldExtendList(e),v.a.getCreateFieldDefalutData(e),e.value=e.fieldValue,t.handleTableValue(e),i.push(e)}),this.formAddTitle="编辑通讯信息",this.customFormAddFields=i,this.customFormAddDialogShow=!0}},UniquePromise:function(e){var t=this,i=e.field,a=e.value;return new r.a(function(e,n){Object(o.v)({fieldId:i.fieldId,id:t.formAddForm.contactsId||t.id,value:a}).then(function(t){e()}).catch(function(){n()})})},uploadCustomRelativeData:function(){var e=this;this.$refs.formAdddialog.loading=!0;var t={employeeId:this.id};this.formAddFields.forEach(function(t){if(t.oldFieldValueDesc=t.fieldValueDesc,"city"==t.formType){var i=e.formAddForm[t.field]||{},a=[];for(var n in i)i[n]&&a.push(i[n]);t.fieldValue=a.join(",")}else t.fieldValue=e.formAddForm[t.field];"user"==t.formType?t.valueList?t.fieldValueDesc=t.valueList.map(function(e){return e.employeeName}).join("，"):t.fieldValue&&!t.valueList&&(t.fieldValueDesc=t.fieldValueDesc):"structure"==t.formType?t.valueList?t.fieldValueDesc=t.valueList.map(function(e){return e.name}).join("，"):t.fieldValue&&!t.valueList&&(t.fieldValueDesc=t.fieldValueDesc):"id_type"==t.field?t.fieldValueDesc=w.d.idTypeValue[t.fieldValue]:"sex"==t.field?t.fieldValueDesc=w.d.sexValue[t.fieldValue]:"birthday_type"==t.field?t.fieldValueDesc=w.d.birthdayTypeValue[t.fieldValue]:"highest_education"==t.field?t.fieldValueDesc=w.c.educationValue[t.fieldValue]:t.fieldValueDesc=t.fieldValue}),t.dataList=this.formAddFields;var i=null;"编辑基本信息"===this.formAddTitle?i=o.T:"编辑联系人"===this.formAddTitle?(i=o.N,t.contactsId=this.formAddForm.contactsId):"新建联系人"===this.formAddTitle?i=o.b:"编辑通讯信息"===this.formAddTitle&&(i=o.S),i(t).then(function(t){e.$refs.formAdddialog.loading=!1,e.$message.success(e.formAddTitle+"成功"),e.formAddDialogShow=!1,e.getDetail()}).catch(function(){e.$refs.formAdddialog.loading=!1})}}},L=(i("kyS4"),Object(_.a)(x,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],key:e.updateKey},[i("wk-custom-base-detail",{attrs:{list:e.baseList},scopedSlots:e._u([{key:"data",fn:function(t){var i=t.data;return[e._v(e._s(i.value))]}}])},[e.editAuth?i("el-button",{attrs:{slot:"more",type:"text"},on:{click:function(t){e.baseCommandSelect("edit")}},slot:"more"},[e._v("编辑")]):e._e()],1),e._v(" "),i("wk-custom-base-detail",{attrs:{"dropdown-items":e.communicationDropdownItems,list:e.communicationList},on:{"top-command-select":e.communicationCommandSelect}}),e._v(" "),i("create-sections",{attrs:{title:"教育经历"}},[e._l(e.educationList,function(t,a){return i("wk-base-detail-section",{key:a,attrs:{"dropdown-items":e.dropdownItems,list:t},on:{"command-select":function(t){e.commandSelect(t,"education",a)}}})}),e._v(" "),e.editAuth?i("el-button",{staticClass:"base-add-button",attrs:{plain:""},on:{click:e.educationCreateClick}},[e._v("+  添加教育经历")]):e._e()],2),e._v(" "),i("create-sections",{attrs:{title:"工作经历"}},[e._l(e.workList,function(t,a){return i("wk-base-detail-section",{key:a,attrs:{"dropdown-items":e.dropdownItems,list:t},on:{"command-select":function(t){e.commandSelect(t,"work",a)}}})}),e._v(" "),e.editAuth?i("el-button",{staticClass:"base-add-button",attrs:{plain:""},on:{click:e.workCreateClick}},[e._v("+  添加工作经历")]):e._e()],2),e._v(" "),i("create-sections",{attrs:{title:"证书/证件"}},[e._l(e.certificateList,function(t,a){return i("wk-base-detail-section",{key:a,attrs:{"dropdown-items":e.dropdownItems,list:t},on:{"command-select":function(t){e.commandSelect(t,"certificate",a)}}})}),e._v(" "),e.editAuth?i("el-button",{staticClass:"base-add-button",attrs:{plain:""},on:{click:e.certificateCreateClick}},[e._v("+  添加证书/证件")]):e._e()],2),e._v(" "),i("create-sections",{attrs:{title:"培训经历"}},[e._l(e.trainingList,function(t,a){return i("wk-base-detail-section",{key:a,attrs:{"dropdown-items":e.dropdownItems,list:t},on:{"command-select":function(t){e.commandSelect(t,"training",a)}}})}),e._v(" "),e.editAuth?i("el-button",{staticClass:"base-add-button",attrs:{plain:""},on:{click:e.trainingCreateClick}},[e._v("+  添加培训经历")]):e._e()],2),e._v(" "),i("create-sections",{attrs:{title:"联系人"}},[e._l(e.contactsList,function(t,a){return i("wk-custom-base-detail-section",{key:a,attrs:{"dropdown-items":e.dropdownItems,list:t},on:{"command-select":function(t){e.commandSelect(t,"contacts",a)}}})}),e._v(" "),e.editAuth?i("el-button",{staticClass:"base-add-button",attrs:{plain:""},on:{click:e.contactsCreateClick}},[e._v("+  联系人")]):e._e()],2),e._v(" "),i("form-add-dialog",{ref:"formAdddialog",attrs:{title:e.formAddTitle,form:e.formAddForm,rules:e.formAddRules,fields:e.formAddFields,visible:e.formAddDialogShow},on:{"update:form":function(t){e.formAddForm=t},"update:visible":function(t){e.formAddDialogShow=t},pass:e.formAddPass,change:e.formAddChange}}),e._v(" "),e.customFormAddDialogShow?i("custom-form-add-dialog",{ref:"customFormAdddialog",attrs:{title:e.formAddTitle,id:e.getCustomEditId(),fields:e.customFormAddFields,visible:e.customFormAddDialogShow},on:{"update:visible":function(t){e.customFormAddDialogShow=t},pass:e.customFormAddPass}}):e._e()],1)},[],!1,null,"3b23f76d",null));L.options.__file="EmployeeBaseInfo.vue";var I=L.exports,E=i("t3Un");function j(e){return Object(E.a)({url:"hrmEmployeeContract/addContract",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function O(e){return Object(E.a)({url:"hrmEmployeeContract/setContract",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}var N=i("tbm1"),$=i("PwLV"),R=i("KTTK"),V={name:"WkFileCell",filters:{getFileSize:function(e){return Object(y.h)(e)}},props:{index:Number,data:Object,list:Array,showFoot:{type:Boolean,default:!0},cursorPointer:{type:Boolean,default:!1},previewShow:{type:Boolean,default:!0},deleteShow:{type:Boolean,default:!1}},data:function(){return{}},computed:{fileName:function(){return this.data?this.data.name||this.data.fileName:""},fileIcon:function(){var e=this.fileName?this.fileName.split("."):[],t="";return t=e.length>0?e[e.length-1]:"",Object(y.n)(t)}},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{downloadClick:function(){var e=this;Object(R.l)(this.data.url).then(function(t){var i=new Blob([t.data],{type:""});Object(y.e)(i,e.data.name)}).catch(function(){})},previewClick:function(){Object(y.a)(this.fileName)?Object(y.G)(this.data.url,this.fileName):this.$wkPreviewFile.preview({index:this.index||0,data:this.list.map(function(e){return{url:e.url,name:e.name}})})},deleteClick:function(){var e=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$emit("delete",e.data,e.index)}).catch(function(){e.$message({type:"info",message:"已取消操作"})})}}},B=(i("vBho"),Object(_.a)(V,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("flexbox",{staticClass:"wk-file-cell"},[i("img",{staticClass:"wk-file-cell__header",attrs:{src:e.fileIcon,alt:""}}),e._v(" "),i("div",{staticClass:"wk-file-cell__body text-one-line",class:{"cursor-pointer":e.cursorPointer}},[e._v("\n    "+e._s(e.fileName.length>20?e.fileName.substring(0,20)+"...":e.fileName)+"\n  ")]),e._v(" "),i("div",{staticClass:"wk-file-cell__size"},[e._v("\n    ("+e._s(e._f("getFileSize")(e.data.size))+")\n  ")]),e._v(" "),i("div",{staticClass:"wk-file-cell__footer"},[[e.previewShow?i("span",{staticClass:"xr-text-btn primary",on:{click:e.previewClick}},[e._v("预览")]):e._e(),e._v(" "),i("span",{staticClass:"xr-text-btn primary",on:{click:e.downloadClick}},[e._v("下载")]),e._v(" "),e.deleteShow?i("span",{staticClass:"xr-text-btn delete",on:{click:e.deleteClick}},[e._v("删除")]):e._e()]],2)])},[],!1,null,"779bc66c",null));B.options.__file="index.vue";var q=B.exports,P=i("kq9f"),U={name:"EmployeeContract",components:{CreateSections:D.a,WkBaseDetailSection:S.a,FormAddDialog:h.a,WkFileSelect:$.a,WkFileCell:q},props:{id:[String,Number]},data:function(){return{loading:!1,contractList:[],contractBaseList:[],formAddTitle:"",formAddForm:{},formAddRules:{},formAddFields:[],formAddDialogShow:!1,batchId:"",fileList:[]}},inject:["editAuth"],computed:{dropdownItems:function(){return this.editAuth?[{label:"编辑",command:"edit"},{label:"删除",command:"delete"}]:[]}},watch:{id:{handler:function(){this.getDetail()},immediate:!0}},mounted:function(){},beforeDestroy:function(){},methods:{getDetail:function(){var e,t=this;this.loading=!0,(e=this.id,Object(E.a)({url:"hrmEmployeeContract/contractInformation/"+e,method:"post"})).then(function(e){t.loading=!1;var i=e.data||[];t.contractBaseList=i,t.contractList=t.getCommonFieldListValue(i)}).catch(function(){t.loading=!1})},getCommonFieldListValue:function(e){var t=[];return e.forEach(function(e){var i=[];P.a.getFields(e).forEach(function(t){var a={};a.label=t.name,"contractType"===t.field?a.value=P.a.contractTypeValue[e[t.field]]:"term"===t.field?a.value=P.a.termValue[e[t.field]]:"status"===t.field?a.value=P.a.statusValue[e[t.field]]:a.value=e[t.field],i.push(a)}),t.push(i)}),t},contractCreateClick:function(){this.batchId=Object(y.v)(),this.fileList=[],this.formAddTitle="添加合同",this.formAddForm={contractType:1,term:1,status:0},this.formAddRules=P.a.getRules(this.formAddForm),this.formAddFields=P.a.getFields(this.formAddForm),this.formAddDialogShow=!0},formAddDialogChange:function(e,t,i,a){"contractType"===e.field&&(this.formAddRules=P.a.getRules({contractType:i}),this.formAddFields=P.a.getFields({contractType:i}))},uploadEmployeeRelativeData:function(){var e=this;this.formAddDialogShow=!0,this.formAddForm.batchId=this.batchId,this.formAddForm.employeeId=this.id;var t=null;"添加合同"===this.formAddTitle?t=j:"编辑合同"===this.formAddTitle&&(t=O),t(this.formAddForm).then(function(t){e.formAddDialogShow=!1,e.$message.success(e.formAddTitle+"成功"),e.formAddDialogShow=!1,e.getDetail()}).catch(function(){e.formAddDialogShow=!1})},commandSelect:function(e,t){var i=this,a=this.contractBaseList[t];"delete"==e?this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=a.contractId,Object(E.a)({url:"hrmEmployeeContract/deleteContract/"+e,method:"post"})).then(function(e){i.$message.success("删除成功"),i.contractBaseList.splice(t,1),i.contractList.splice(t,1)})}).catch(function(){i.$message({type:"info",message:"已取消操作"})}):"edit"==e&&(this.formAddTitle="编辑合同",this.formAddForm={contractNum:a.contractNum,contractType:a.contractType,startTime:a.startTime,endTime:a.endTime,term:a.term,status:a.status,signCompany:a.signCompany,signTime:a.signTime,remarks:a.remarks,contractId:a.contractId},this.batchId=a.batchId,this.fileList=a.fileList||[],this.formAddRules=P.a.getRules(this.formAddForm),this.formAddFields=P.a.getFields(this.formAddForm),this.formAddDialogShow=!0)},fileSelect:function(e,t){for(var i=0;i<e.length;i++){var a=e[i];this.uploadFileRequest(a)}t.target.value=""},uploadFileRequest:function(e){var t=this;this.$wkUploadFile.upload({request:N.g,file:e,params:{batchId:this.batchId}}).then(function(e){var i=e.res;t.fileList.push(i.data)}).catch(function(){})},fileDelete:function(e,t){var i=this;Object(N.b)(e.fileId).then(function(e){i.fileList.splice(t,1)}).catch(function(){})}}},H=(i("adJy"),Object(_.a)(U,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("create-sections",{attrs:{title:"合同信息"}},[e._l(e.contractList,function(t,a){return i("wk-base-detail-section",{key:a,attrs:{"dropdown-items":e.dropdownItems,list:t},on:{"command-select":function(t){e.commandSelect(t,a)}}},[i("div",{staticStyle:{flex:"0 0 80%"}},e._l(e.contractBaseList[a].fileList,function(t,n){return i("wk-file-cell",{key:n,attrs:{data:t,list:e.contractBaseList[a].fileList,index:n}})}))])}),e._v(" "),e.editAuth?i("el-button",{staticClass:"base-add-button",attrs:{plain:""},on:{click:e.contractCreateClick}},[e._v("+  添加合同")]):e._e()],2),e._v(" "),i("form-add-dialog",{ref:"formAdddialog",attrs:{title:e.formAddTitle,form:e.formAddForm,rules:e.formAddRules,fields:e.formAddFields,visible:e.formAddDialogShow},on:{"update:form":function(t){e.formAddForm=t},"update:visible":function(t){e.formAddDialogShow=t},pass:e.uploadEmployeeRelativeData,change:e.formAddDialogChange}},[i("div",{staticClass:"contract-files"},[i("wk-file-select",{staticStyle:{display:"inline-block"},attrs:{multiple:""},on:{change:e.fileSelect}},[i("el-button",{attrs:{type:"text"}},[e._v("添加合同附件")])],1),e._v(" "),e._l(e.fileList,function(t,a){return i("wk-file-cell",{key:a,attrs:{data:t,list:e.fileList,index:a,"delete-show":""},on:{delete:e.fileDelete}})})],2)])],1)},[],!1,null,"6735fe62",null));H.options.__file="EmployeeContract.vue";var z=H.exports,M=i("Qehy"),W=i("zMw6"),G={fields:[{name:"工资卡卡号",field:"salaryCardNum",formType:"text",setting:[]},{name:"工资卡开户城市",field:"accountOpeningCity",formType:"text",setting:[]},{name:"银行名称",field:"bankName",formType:"text",setting:[]},{name:"工资卡开户行",field:"openingBank",formType:"text",setting:[]}],rules:{salaryCardNum:[{required:!0,message:"请选择",trigger:["change","blur"]}]}},K={name:"MoneyDetailDialog",components:{},mixins:[i("nboU").a],props:{detail:Object,visible:{type:Boolean,required:!0,default:!1}},data:function(){return{loading:!1,title:"明细详情",list:[]}},computed:{},watch:{visible:{handler:function(e){e&&this.getDetail()},immediate:!0}},mounted:function(){},methods:{handleCancel:function(){this.close()},close:function(){this.$emit("update:visible",!1)},getDetail:function(){var e=this;this.loading=!0,Object(M.d)(this.detail.sempRecordId).then(function(t){e.list=t.data||[],e.loading=!1}).catch(function(){e.loading=!1})}}},J=(i("O50V"),Object(_.a)(K,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{ref:"wkDialog",attrs:{visible:e.visible,"append-to-body":!0,"close-on-click-modal":!1,title:e.title,width:"500px"},on:{close:e.handleCancel}},[i("div",{staticClass:"moeny-dialog-body"},[i("div",{staticClass:"money-header"},[i("div",{staticClass:"money-header__title"},[e._v(e._s(e.detail?e.detail.realSalary:0))]),e._v(" "),i("div",{staticClass:"money-header__des"},[e._v("实发金额（元）")])]),e._v(" "),e._l(e.list,function(t,a){return i("flexbox",{key:a,staticClass:"money-item"},[i("div",{staticClass:"money-item__title text-one-line"},[e._v(e._s(t.name))]),e._v(" "),i("div",{staticClass:"money-item__value"},[e._v(e._s(t.value))])])})],2),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v("关闭")])],1)])},[],!1,null,"a855f9a6",null));J.options.__file="MoneyDetailDialog.vue";var Q=J.exports;var X={getFields:function(e){return[{name:"是否本地首次缴纳社保",field:"isFirstSocialSecurity",formType:"radio",setting:[{label:"否",value:0},{label:"是",value:1}]},{name:"是否本地首次缴纳公积金",field:"isFirstAccumulationFund",formType:"radio",setting:[{label:"否",value:0},{label:"是",value:1}]},{name:"个人社保账号",field:"socialSecurityNum",formType:"text",setting:[]},{name:"个人公积金账号",field:"accumulationFundNum",formType:"text",setting:[]},{name:"参保起始月份",field:"socialSecurityStartMonth",formType:"date",disabled:!0,setting:[]},{name:"参保方案",field:"schemeId",formType:"select",setting:e||[]}]},rules:{isFirstSocialSecurity:[{required:!0,message:"请选择",trigger:["blur","change"]}],isFirstAccumulationFund:[{required:!0,message:"请选择",trigger:["blur","change"]}]}},Y={name:"EmployeeMoney",components:{CreateSections:D.a,FormAddDialog:h.a,WkBaseDetailSection:S.a,MoneyDetailDialog:Q},props:{id:[String,Number]},data:function(){return{loading:!1,list:[],formAddTitle:"",formAddForm:{},formAddRules:{},formAddFields:[],formAddDialogShow:!1,cardData:null,cardList:[],securityData:null,securityList:[],schemeList:[],moneyList:[],currentPage:1,pageSize:15,pageSizes:[15,30,60,100],total:0,fieldList:[{prop:"yearMonth",label:"计薪月份",width:"150"},{prop:"time",label:"计薪周期",width:"220"},{prop:"shouldSalary",label:"应发工资"},{prop:"personalTax",label:"个人所得税"},{prop:"realSalary",label:"实发工资"}],moneyData:null,detailDialogShow:!1}},inject:["editAuth"],computed:{cardDropdownItems:function(){var e=[];return this.editAuth&&e.push({label:"编辑",command:"edit",icon:""}),e},securityDropdownItems:function(){var e=[];return this.editAuth&&e.push({label:"编辑",command:"edit",icon:""}),e}},watch:{id:{handler:function(){this.getDetail(),this.refreshList()},immediate:!0}},mounted:function(){},activated:function(){},deactivated:function(){},methods:{getDetail:function(){var e=this;this.loading=!0,Object(M.c)(this.id).then(function(t){var i=t.data||{};e.cardData=i.salaryCard;var a=[];G.fields.forEach(function(t){a.push({label:t.name,value:e.cardData?e.cardData[t.field]:""})}),e.cardList=a,e.securityData=i.socialSecurityInfo;var n=[];X.getFields().forEach(function(t){var i=e.securityData?e.securityData[t.field]:"";"isFirstSocialSecurity"===t.field||"isFirstAccumulationFund"===t.field?i={0:"否",1:"是"}[i]:"schemeId"===t.field&&(i=e.securityData?e.securityData.schemeName:""),n.push({label:t.name,value:i})}),e.securityList=n,e.loading=!1}).catch(function(){e.loading=!1})},cardCommandSelect:function(e){"edit"==e&&(this.formAddTitle="编辑工资卡",this.formAddForm=this.cardData?{salaryCardNum:this.cardData.salaryCardNum||"",accountOpeningCity:this.cardData.accountOpeningCity||"",bankName:this.cardData.bankName||"",openingBank:this.cardData.openingBank||"",salaryCardId:this.cardData.salaryCardId||""}:{},this.formAddRules=G.rules,this.formAddFields=G.fields,this.formAddDialogShow=!0)},securityCommandSelect:function(e){var t=this;"edit"==e&&(this.formAddTitle="编辑社保",this.formAddForm=this.securityData?{isFirstSocialSecurity:this.securityData.isFirstSocialSecurity,isFirstAccumulationFund:this.securityData.isFirstAccumulationFund,socialSecurityNum:this.securityData.socialSecurityNum,accumulationFundNum:this.securityData.accumulationFundNum,socialSecurityStartMonth:this.securityData.socialSecurityStartMonth,socialSecurityInfoId:this.securityData.socialSecurityInfoId,schemeId:this.securityData.schemeId}:{isFirstSocialSecurity:0,isFirstAccumulationFund:0},this.formAddRules=X.rules,this.getSchemList().then(function(){t.formAddFields=X.getFields(t.schemeList),t.formAddDialogShow=!0}))},getSchemList:function(){var e=this;return new r.a(function(t,i){e.schemeList.length?t():Object(W.d)({pageType:0}).then(function(i){e.schemeList=i.data.list.map(function(e){return{label:e.schemeName,value:e.schemeId}}),t()}).catch(function(){i&&i()})})},uploadEmployeeRelativeData:function(){var e=this;this.$refs.formAdddialog.loading=!0,this.formAddForm.employeeId=this.id;var t=null;"添加工资卡"===this.formAddTitle?t=M.a:"编辑工资卡"===this.formAddTitle?t=M.f:"添加社保"===this.formAddTitle?t=M.b:"编辑社保"===this.formAddTitle&&(t=M.g),t(this.formAddForm).then(function(t){e.$refs.formAdddialog.loading=!1,e.$message.success(e.formAddTitle+"成功"),e.formAddDialogShow=!1,e.getDetail()}).catch(function(){e.$refs.formAdddialog.loading=!1})},cellClassName:function(e){e.row,e.column,e.rowIndex;return 0==e.columnIndex?"can-visit--underline":""},handleRowClick:function(e,t,i){"yearMonth"==t.property&&(this.moneyData=e,this.detailDialogShow=!0)},refreshList:function(){this.handleCurrentChange(1)},handleSizeChange:function(e){this.pageSize=e,this.getList()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},getList:function(){var e=this;this.loading=!0;var t={page:this.currentPage,limit:this.pageSize,employeeId:this.id};Object(M.e)(t).then(function(t){var i=t.data.list;i.forEach(function(e){e.time=e.startTime+" ~ "+e.endTime,e.yearMonth=e.year+"-"+e.month}),e.moneyList=i,e.total=t.data.totalRow,t.data.totalRow&&Math.ceil(t.data.totalRow/e.pageSize)<e.currentPage&&e.currentPage>1?(e.currentPage=e.currentPage-1,e.getList()):(e.total=t.data.totalRow,e.loading=!1),e.loading=!1}).catch(function(){e.loading=!1})}}},Z=(i("zEpx"),Object(_.a)(Y,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"b-cont"},[i("create-sections",{attrs:{"dropdown-items":e.cardDropdownItems,title:"工资卡信息"},on:{"command-select":e.cardCommandSelect}},[i("wk-base-detail-section",{attrs:{list:e.cardList}})],1),e._v(" "),i("create-sections",{attrs:{"dropdown-items":e.securityDropdownItems,title:"社保信息"},on:{"command-select":e.securityCommandSelect}},[i("wk-base-detail-section",{attrs:{list:e.securityList}})],1),e._v(" "),i("create-sections",{staticClass:"b-cells",attrs:{title:"薪资信息"}},[i("div",{staticClass:"money-table"},[i("el-table",{attrs:{data:e.moneyList,"cell-class-name":e.cellClassName,height:"500",border:"",align:"center"},on:{"row-click":e.handleRowClick}},e._l(e.fieldList,function(e,t){return i("el-table-column",{key:t,attrs:{prop:e.prop,width:e.width,label:e.label}})})),e._v(" "),i("div",{staticClass:"p-contianer"},[i("el-pagination",{staticClass:"p-bar",attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:pageSize":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),e._v(" "),i("form-add-dialog",{ref:"formAdddialog",attrs:{title:e.formAddTitle,form:e.formAddForm,rules:e.formAddRules,fields:e.formAddFields,visible:e.formAddDialogShow},on:{"update:form":function(t){e.formAddForm=t},"update:visible":function(t){e.formAddDialogShow=t},pass:e.uploadEmployeeRelativeData}}),e._v(" "),i("money-detail-dialog",{attrs:{detail:e.moneyData,visible:e.detailDialogShow},on:{"update:visible":function(t){e.detailDialogShow=t}}})],1)},[],!1,null,"69928ab0",null));Z.options.__file="EmployeeMoney.vue";var ee=Z.exports,te={name:"Sections",components:{},props:{title:{type:String,default:""},titles:{type:Array,default:function(){return[]}},mColor:{type:String,default:"#2362FB"},contentHeight:{type:String,default:"327px"},showNoData:{type:Boolean,default:!1},showHandle:{type:Boolean,default:!1},index:Number},data:function(){return{}},computed:{},mounted:function(){},methods:{handleTypeDrop:function(e){this.$emit("on-handle",{type:e,index:this.index})},titlesClick:function(e,t){this.$emit("on-titles-click",{item:e,itemIndex:t,index:this.index})}}},ie=(i("EYLx"),Object(_.a)(te,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"section"},[e.title&&e.title.length>0?a("div",{staticClass:"section-header"},[a("div",{staticClass:"section-mark",style:{"border-left-color":e.mColor}}),e._v(" "),a("div",{staticClass:"section-title"},[e._v(e._s(e.title))]),e._v(" "),e.showHandle?a("el-dropdown",{on:{command:e.handleTypeDrop}},[e.showHandle?a("span",{staticClass:"handle-button"},[e._v("\n        操作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]):e._e(),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"edit"}},[e._v("编辑")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"delete"}},[e._v("删除")])],1)],1):e._e()],1):e._e(),e._v(" "),e.titles.length>0?a("div",{staticClass:"section-header"},[a("div",{staticClass:"section-mark",style:{"border-left-color":e.mColor}}),e._v(" "),a("el-breadcrumb",{staticStyle:{padding:"5px 0","margin-left":"8px"},attrs:{"separator-class":"el-icon-arrow-right"}},e._l(e.titles,function(t,i){return a("el-breadcrumb-item",{key:i},[a("span",{staticClass:"section-titles-name",on:{click:function(a){e.titlesClick(t,i)}}},[e._v(e._s(t))])])}))],1):e._e(),e._v(" "),a("div",{staticClass:"content",style:{height:e.contentHeight}},[e.showNoData?a("div",{staticClass:"no-data-container"},[a("img",{staticClass:"no-data",attrs:{src:i("MqKM")}}),e._v(" "),a("div",{staticClass:"no-data-name"},[e._v("暂无数据")])]):e._e(),e._v(" "),e._t("default")],2)])},[],!1,null,"40b9ed58",null));ie.options.__file="Sections.vue";var ae={name:"EmployeeFiles",components:{Sections:ie.exports},props:{id:[String,Number]},data:function(){return{loading:!1,baseList:[],recordList:[],leaveList:[],allData:[],showDetailIndex:-1,showDetailSubIndex:-1,editDetailItem:{},editDetailIndex:-1,editInputContent:"",detailList:[]}},inject:["editAuth"],computed:{},watch:{id:{handler:function(){this.initInfo(),this.getBaseInfo()},immediate:!0}},mounted:function(){},activated:function(){},deactivated:function(){},methods:{initInfo:function(){this.showDetailIndex=-1,this.showDetailSubIndex=-1,this.editDetailItem={},this.editDetailIndex=-1,this.editInputContent="",this.detailList=[],this.baseList=[{name:"身份证原件照片",icon:"wk wk-icon-credentials",count:0,subType:11},{name:"学历证明",icon:"wk wk-icon-medal",count:0,subType:12},{name:"个人证件照",icon:"wk wk-icon-my",count:0,subType:13},{name:"身份证复印件",icon:"wk wk-icon-copy",count:0,subType:14},{name:"工资银行卡",icon:"wk wk-icon-bankcard",count:0,subType:15},{name:"社保卡",icon:"wk wk-icon-license",count:0,subType:16},{name:"公积金卡",icon:"wk wk-icon-home",count:0,subType:17},{name:"获奖证书",icon:"wk wk-icon-barrage",count:0,subType:18},{name:"其他",icon:"wk wk-icon-setup",count:0,subType:19}],this.recordList=[{name:"劳动合同",icon:"wk wk-icon-star-contract",count:0,subType:21},{name:"入职简历",icon:"wk wk-icon-personal-data",count:0,subType:22},{name:"入职登记表",icon:"wk wk-icon-handle-log",count:0,subType:23},{name:"入职体检单",icon:"wk wk-icon-health-data",count:0,subType:24},{name:"上家公司离职证明",icon:"wk wk-icon-bevel-contract",count:0,subType:25},{name:"转正申请表",icon:"wk wk-icon-contract",count:0,subType:26},{name:"其他",icon:"wk wk-icon-setup",count:0,subType:27}],this.leaveList=[{name:"离职审批",icon:"wk wk-icon-seal",count:0,subType:31},{name:"离职证明",icon:"wk wk-icon-forbid-user",count:0,subType:32},{name:"其他",icon:"wk wk-icon-setup",count:0,subType:33}],this.allData=[{name:["员工基本资料"],list:this.baseList,unfold:!1},{name:["员工档案资料"],list:this.recordList,unfold:!1},{name:["员工离职资料"],list:this.leaveList,unfold:!1}]},getBaseInfo:function(){var e=this;Object(o.A)(this.id).then(function(t){for(var i=t.data||{},a=0;a<e.baseList.length;a++){var n=e.baseList[a];n.count=i["subType"+n.subType]}for(var o=0;o<e.recordList.length;o++){var s=e.recordList[o];s.count=i["subType"+s.subType]}for(var l=0;l<e.leaveList.length;l++){var r=e.leaveList[l];r.count=i["subType"+r.subType]}}).catch(function(){})},fileUpload:function(e){var t=this;this.$wkUploadFile.upload({request:N.g,file:e.file}).then(function(e){t.loading=!0;var i=t.allData[t.showDetailIndex].list[t.showDetailSubIndex];Object(o.x)({employeeId:t.id,subType:i.subType,fileId:e.res.data.fileId}).then(function(e){t.loading=!1,t.getSubDetail()}).catch(function(){t.loading=!1})}).catch(function(){})},checkDetail:function(e,t,i,a){e.name.push(i.name),this.showDetailIndex=t,this.showDetailSubIndex=a,this.getSubDetail()},previewDetail:function(e,t,i,a){var n=this;this.loading=!0,Object(o.z)({employeeId:this.id,subType:i.subType}).then(function(e){n.loading=!1;var t=e.data.map(function(e){return e.file});n.$wkPreviewFile.preview({index:0,data:t})}).catch(function(){n.loading=!1})},getSubDetail:function(){var e=this;this.loading=!0;var t=this.allData[this.showDetailIndex].list[this.showDetailSubIndex];Object(o.z)({employeeId:this.id,subType:t.subType}).then(function(t){e.detailList=t.data,e.loading=!1}).catch(function(){e.loading=!1})},handleDetailItemClick:function(e,t,i){var a=this;if("edit"==e){this.editDetailItem=t,this.editDetailIndex=i,this.editInputContent=t.file.name;var n=this;setTimeout(function(){n.$refs.editInput[0].focus()},100)}else"delete"==e?this.$confirm("您确定要删除此附件吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.y)(t.employeeFileId).then(function(e){a.detailList.splice(i,1),a.$message.success("删除成功")}).catch(function(){})}).catch(function(){a.$message({type:"info",message:"已取消操作"})}):"download"==e&&Object(N.c)(t.fileId).then(function(e){var i=new Blob([e.data],{type:""});Object(y.e)(i,t.file.name)}).catch(function(){})},editInputBlur:function(){var e=this;this.loading=!0,Object(N.f)({fileId:this.editDetailItem.fileId,name:this.editInputContent}).then(function(t){e.editDetailIndex=-1,e.editDetailItem.file.name=e.editInputContent,e.editInputContent="",e.editDetailItem={},e.$message.success("编辑成功"),e.loading=!1}).catch(function(){e.loading=!1})},onTitlesClick:function(e){var t=this.allData[e.index];t.name.length>1&&(t.name=t.name.splice(0,1),this.showDetailIndex=-1,this.showDetailSubIndex=-1,this.detailList=[])},previewFile:function(e,t){var i=this.detailList.map(function(e){return e.file});this.$wkPreviewFile.preview({index:t,data:i})},getFileTypeIcon:function(e){var t=e?e.split("."):[],i="";return i=t.length>0?t[t.length-1]:"",Object(y.n)(i)},isShowImage:function(e){var t=e?e.split("."):[],i="";return i=t.length>0?t[t.length-1]:"",["jpg","png","gif","jpeg"].includes(i.toLowerCase())},unfloadFiles:function(e,t){e.unfold=!e.unfold}}},ne=(i("6fkd"),Object(_.a)(ae,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"contianer"},[i("div",e._l(e.allData,function(t,a){return 1==t.name.length&&-1==e.showDetailIndex||t.name.length>1&&e.showDetailIndex==a?i("sections",{key:a,staticClass:"file-sections",attrs:{index:a,titles:t.name,"content-height":"auto"},on:{"on-titles-click":e.onTitlesClick}},[1==t.name.length&&-1==e.showDetailIndex?i("div",{staticClass:"files-box-class"},[i("flexbox",{attrs:{gutter:0,wrap:"wrap"}},[e._l(t.unfold?t.list:t.list.slice().splice(0,2),function(n,o){return i("flexbox-item",{key:o,staticClass:"cell",attrs:{span:.25}},[i("div",{staticClass:"cell-box"},[i("div",{staticClass:"cell-body"},[i("i",{staticClass:"cell-body-icon",class:n.icon})]),e._v(" "),i("div",{staticClass:"cell-footer"},[e._v("\n                "+e._s(n.name)),n.count>0?i("span",[e._v("（"+e._s(n.count)+"）")]):e._e()]),e._v(" "),i("div",{staticClass:"cell-handle"},[i("div",{staticClass:"handle-items"},[n.count>0?i("span",{staticClass:"handle-item",on:{click:function(i){e.previewDetail(t,a,n,o)}}},[i("i",{staticClass:"wk wk-icon-eye-solid"})]):e._e(),e._v(" "),i("span",{staticClass:"handle-item",on:{click:function(i){e.checkDetail(t,a,n,o)}}},[i("i",{staticClass:"wk wk-folder"})])])])])])}),e._v(" "),i("flexbox-item",{staticClass:"cell",attrs:{span:.25}},[i("div",{staticClass:"cell-unfold-box"},[t.unfold?i("flexbox",{staticClass:"unfold-button unfold-button-positon",nativeOn:{click:function(i){e.unfloadFiles(t,a)}}},[i("i",{staticClass:"el-icon-d-arrow-left unfold-button-icon"}),e._v(" "),i("div",{staticClass:"unfold-button-name"},[e._v("收起")])]):i("flexbox",{staticClass:"unfold-button unfold-button-positon",nativeOn:{click:function(i){e.unfloadFiles(t,a)}}},[i("div",{staticClass:"more-button-name"},[e._v("更多")]),e._v(" "),i("i",{staticClass:"el-icon-d-arrow-right more-button-icon"})])],1)])],2)],1):e._e(),e._v(" "),t.name.length>1&&e.showDetailIndex==a?i("div",{staticClass:"files-box-detail"},[i("flexbox",{attrs:{gutter:0,wrap:"wrap"}},[e.editAuth?i("flexbox-item",{staticClass:"detail-cell",attrs:{span:1/3}},[i("div",{staticClass:"cell-upload-box"},[i("el-upload",{attrs:{"show-file-list":!1,"http-request":e.fileUpload,action:"http",drag:"",multiple:""}},[i("i",{staticClass:"wk wk-icon-upload upload-icon"}),e._v(" "),i("div",{staticClass:"upload-name"},[e._v("点击或拖拽上传")])])],1)]):e._e(),e._v(" "),e._l(e.detailList,function(t,a){return i("flexbox-item",{key:a,staticClass:"detail-cell",attrs:{span:1/3}},[i("div",{staticClass:"detail-cell-box"},[i("div",{staticClass:"detail-cell-body"},[i("span",[e.isShowImage(t.file.name)?i("img",{directives:[{name:"src",rawName:"v-src",value:t.file.url,expression:"item.file.url"}],key:t.file.url}):e._e(),e._v(" "),e.isShowImage(t.file.name)?e._e():i("img",{directives:[{name:"src",rawName:"v-src",value:e.getFileTypeIcon(t.file.url),expression:"getFileTypeIcon(item.file.url)"}],key:t.file.url})]),e._v(" "),i("div",{staticClass:"body-handle"},[i("div",{staticClass:"handle-items"},[i("span",{staticClass:"handle-item",on:{click:function(i){e.previewFile(t,a)}}},[i("i",{staticClass:"wk wk-icon-eye-solid"})])])])]),e._v(" "),i("flexbox",{staticClass:"detail-cell-footer"},[e.editDetailIndex!=a?i("div",{staticClass:"footer-name"},[e._v(e._s(t.file.name))]):e._e(),e._v(" "),e.editDetailIndex==a?i("el-input",{ref:"editInput",refInFor:!0,attrs:{autofocus:"",placeholder:"请输入内容"},on:{blur:e.editInputBlur},model:{value:e.editInputContent,callback:function(t){e.editInputContent=t},expression:"editInputContent"}}):e._e(),e._v(" "),e.editAuth?i("i",{staticClass:"wk wk-edit footer-item",on:{click:function(i){e.handleDetailItemClick("edit",t,a)}}}):e._e(),e._v(" "),e.editAuth?i("i",{staticClass:"wk wk-s-delete footer-item",on:{click:function(i){e.handleDetailItemClick("delete",t,a)}}}):e._e(),e._v(" "),i("i",{staticClass:"wk wk-b-download footer-item",on:{click:function(i){e.handleDetailItemClick("download",t,a)}}})],1)],1)])})],2)],1):e._e()]):e._e()}))])},[],!1,null,"168bdb36",null));ne.options.__file="EmployeeFiles.vue";var oe=ne.exports,se=i("CUKw"),le={name:"EmployeeHandle",components:{},props:{id:[String,Number]},data:function(){return{loading:!1,list:[]}},computed:{},watch:{id:function(e){this.list=[],this.getDetail()}},mounted:function(){this.getDetail()},activated:function(){},deactivated:function(){},methods:{getDetail:function(){var e=this;this.loading=!0,Object(se.a)({type:1,typeId:this.id}).then(function(t){e.loading=!1;var i=t.data||[];i.forEach(function(e){e.content=e.content?JSON.parse(e.content):[]}),e.list=i}).catch(function(){e.loading=!1})},getYMDFormaterTime:function(e){return Object(y.C)(e)},getWeekFormaterTime:function(e){return Object(y.C)(e,"dddd")},getTimeFormaterTime:function(e){return Object(y.C)(e,"H:mm")}}},re=(i("erCq"),Object(_.a)(le,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"rc-cont"},e._l(e.list,function(t,a){return i("flexbox",{key:a,staticClass:"ha-cont",attrs:{align:"stretch",justify:"flex-start"}},[i("div",{staticClass:"ha-week"},[i("div",[e._v(e._s(e.getYMDFormaterTime(t.createTime)))]),e._v(" "),i("div",[e._v(e._s(e.getWeekFormaterTime(t.createTime)))])]),e._v(" "),i("div",{staticClass:"ha-circle"}),e._v(" "),i("div",{staticClass:"ha-time"},[e._v(e._s(e.getTimeFormaterTime(t.createTime)))]),e._v(" "),i("div",{staticClass:"ha-name"},[e._v(e._s(t.realname))]),e._v(" "),i("div",{staticClass:"ha-content"},e._l(t.content,function(t,a){return i("p",{key:a},[e._v(e._s(t))])})),e._v(" "),i("div",{staticClass:"ha-line"})])}))},[],!1,null,"6f60321c",null));re.options.__file="EmployeeHandle.vue";var de=re.exports,ce=i("UzdC"),ue=i("L2JU"),me={name:"EmpolyeeDetail",components:{WkDetailHeader:ce.a,SlideView:s.a,EmployeePostInfo:T,EmployeeBaseInfo:I,EmployeeContract:z,EmployeeMoney:ee,EmployeeFiles:oe,EmployeeHandle:de,FormAddDialog:h.a},mixins:[],props:{id:[String,Number],listenerIDs:{type:Array,default:function(){return["crm-main-container"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return["el-table__body"]}}},data:function(){return{loading:!1,detailData:null,tabNames:[{label:"岗位信息",name:"EmployeePostInfo"},{label:"基本信息",name:"EmployeeBaseInfo"},{label:"员工合同",name:"EmployeeContract"},{label:"工资社保",name:"EmployeeMoney"},{label:"材料附件",name:"EmployeeFiles"},{label:"操作记录",name:"EmployeeHandle"}],tabCurrentName:"EmployeePostInfo",formAddCommond:"",formAddTitle:"",formAddForm:{},formAddRules:{},formAddFields:[],formAddDialogShow:!1}},provide:function(){return{editAuth:this.editAuth}},computed:n()({},Object(ue.b)(["hrm"]),{employeeAuth:function(){return this.hrm.employee},deleteAuth:function(){return this.employeeAuth&&this.employeeAuth.delete},editAuth:function(){return this.employeeAuth&&this.employeeAuth.update},tabName:function(){return"EmployeePostInfo"==this.tabCurrentName?"EmployeePostInfo":"EmployeeBaseInfo"==this.tabCurrentName?"EmployeeBaseInfo":"EmployeeContract"==this.tabCurrentName?"EmployeeContract":"EmployeeMoney"==this.tabCurrentName?"EmployeeMoney":"EmployeeFiles"==this.tabCurrentName?"EmployeeFiles":"EmployeeHandle"==this.tabCurrentName?"EmployeeHandle":""},dropdownItems:function(){var e=[];return this.deleteAuth&&e.push({icon:"wk wk-delete",label:"删除",command:"delete"}),e}}),watch:{id:function(e){this.getDetail()}},mounted:function(){},methods:{getDetail:function(){var e=this;this.loading=!0,Object(o.D)(this.id).then(function(t){e.loading=!1;var i=t.data||{};i.entryTime=Object(y.C)(i.entryTime),e.detailData=i}).catch(function(){e.loading=!1})},getEmployeeStatusName:function(e){return e?w.d.statusValue[parseInt(e)]:""},hideView:function(){this.$emit("close")},commandSelect:function(e){var t=this;this.formAddCommond=e,"delete"==e&&this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.k)([t.id]).then(function(i){t.$message({type:"success",message:"删除成功"}),t.$emit("handle",{type:e})}).catch(function(){})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},relativeHandle:function(e){this.$emit("handle",e)},formAddPass:function(){var e=this;this.$refs.formAdddialog.loading=!0,this.formAddForm.employeeId=this.handleRowData.employeeId;null(this.formAddForm).then(function(t){e.$refs.formAdddialog.loading=!1,e.$message.success(e.formAddTitle+"成功"),e.formAddDialogShow=!1,e.getTabsNum(),e.getList()}).catch(function(){e.$refs.formAdddialog.loading=!1})}}},fe=(i("8JBq"),Object(_.a)(me,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("slide-view",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"d-view",attrs:{"listener-ids":e.listenerIDs,"no-listener-ids":e.noListenerIDs,"no-listener-class":e.noListenerClass,"body-style":{padding:0,height:"100%",background:"white"}},on:{afterEnter:e.getDetail,close:e.hideView}},[e.detailData?i("flexbox",{staticClass:"side-detail-main",staticStyle:{padding:"0 15px"},attrs:{direction:"column",align:"stretch"}},[i("wk-detail-header",{attrs:{"dropdown-items":e.dropdownItems},on:{"command-select":e.commandSelect}},[i("div",{staticClass:"employee-header",attrs:{slot:"body"},slot:"body"},[i("div",{staticClass:"employee-header__top"},[i("span",{staticClass:"name"},[e._v(e._s(e.detailData.employeeName))]),e._v(" "),i("span",{staticClass:"post"},[e._v(e._s(e.detailData.post))])]),e._v(" "),i("div",{staticClass:"employee-header__bottom"},[1===e.detailData.sex||2===e.detailData.sex?i("el-tag",{staticClass:"xr-sex-tag",class:{1:"is-man",2:"is-woman"}[e.detailData.sex],attrs:{"disable-transitions":"",size:"mini"}},[i("i",{class:{1:"wk wk-man",2:"wk wk-woman"}[e.detailData.sex]})]):e._e(),e._v(" "),i("el-tooltip",{attrs:{content:"工号："+(e.detailData.jobNumber||"--"),effect:"dark",placement:"top"}},[i("el-tag",{staticClass:"xr-tag",attrs:{"disable-transitions":"",color:"#ECEEF2",size:"mini"}},[i("i",{staticClass:"wk wk-icon-work-card"}),e._v(e._s(e.detailData.jobNumber||"--")+"\n            ")])],1),e._v(" "),i("el-tooltip",{attrs:{content:"部门："+(e.detailData.deptName||"--"),effect:"dark",placement:"top"}},[i("el-tag",{staticClass:"xr-tag",attrs:{"disable-transitions":"",color:"#ECEEF2",size:"mini"}},[i("i",{staticClass:"wk wk-icon-layer"}),e._v(e._s(e.detailData.deptName||"--")+"\n            ")])],1),e._v(" "),i("el-tooltip",{attrs:{content:"员工状态："+(e.getEmployeeStatusName(e.detailData.status)||"--"),effect:"dark",placement:"top"}},[i("el-tag",{staticClass:"xr-tag",attrs:{"disable-transitions":"",color:"#ECEEF2",size:"mini"}},[i("i",{staticClass:"wk wk-icon-time"}),e._v(e._s(e.getEmployeeStatusName(e.detailData.status)||"--")+"\n            ")])],1),e._v(" "),i("el-tooltip",{attrs:{content:"入职日期："+(e.detailData.entryTime||"--"),effect:"dark",placement:"top"}},[i("el-tag",{staticClass:"xr-tag",attrs:{"disable-transitions":"",color:"#ECEEF2",size:"mini"}},[i("i",{staticClass:"wk wk-icon-status"}),e._v(e._s(e.detailData.entryTime||"--")+"\n            ")])],1),e._v(" "),i("el-tooltip",{attrs:{content:"年龄："+(e.detailData.age||"--"),effect:"dark",placement:"top"}},[i("el-tag",{staticClass:"xr-tag",attrs:{"disable-transitions":"",color:"#ECEEF2",size:"mini"}},[i("i",{staticClass:"wk wk-icon-cake"}),e._v(e._s(e.detailData.age||"--")+"\n            ")])],1)],1)])]),e._v(" "),i("el-tabs",{staticClass:"side-detail__tabs--default",model:{value:e.tabCurrentName,callback:function(t){e.tabCurrentName=t},expression:"tabCurrentName"}},e._l(e.tabNames,function(t,a){return i("el-tab-pane",{key:a,attrs:{label:t.label,name:t.name,lazy:""}},[i(t.name,{tag:"component",staticClass:"side-detail-tabs-content",staticStyle:{padding:"15px 10px"},attrs:{id:e.id,detail:e.detailData},on:{handle:e.relativeHandle}})],1)}))],1):e._e(),e._v(" "),i("form-add-dialog",{ref:"formAdddialog",attrs:{title:e.formAddTitle,form:e.formAddForm,rules:e.formAddRules,fields:e.formAddFields,visible:e.formAddDialogShow},on:{"update:form":function(t){e.formAddForm=t},"update:visible":function(t){e.formAddDialogShow=t},pass:e.formAddPass}})],1)},[],!1,null,"1618e18c",null));fe.options.__file="EmployeeDetail.vue";t.a=fe.exports},Y5Xo:function(e,t,i){},adJy:function(e,t,i){"use strict";var a=i("A/aH");i.n(a).a},dukW:function(e,t,i){},erCq:function(e,t,i){"use strict";var a=i("rDGj");i.n(a).a},fUY0:function(e,t,i){"use strict";var a=i("7ZQD");i.n(a).a},h8CF:function(e,t,i){},kq9f:function(e,t,i){"use strict";t.a={getFields:function(e){var t=[{name:"合同编号",field:"contractNum",formType:"text",setting:[]},{name:"合同类型",field:"contractType",formType:"select",setting:[{label:"固定期限劳动合同",value:1},{label:"无固定期限劳动合同",value:2},{label:"以完成一定工作任务为期限的劳动合同",value:3},{label:"实习协议",value:4},{label:"劳务合同",value:5},{label:"返聘协议",value:6},{label:"劳务派遣合同",value:7},{label:"借调合同",value:8},{label:"其他",value:9}]},{name:"合同开始日期",field:"startTime",formType:"date",setting:[]},{name:"合同结束日期",field:"endTime",formType:"date",setting:[]}];return e&&2==e.contractType||t.push({name:"合同期限",field:"term",formType:"select",setting:[{label:"1年",value:1},{label:"2年",value:2},{label:"3年",value:3},{label:"4年",value:4},{label:"5年",value:5},{label:"6年",value:6},{label:"7年",value:7},{label:"8年",value:8},{label:"9年",value:9},{label:"10年",value:10}]}),t.concat([{name:"合同状态",field:"status",formType:"select",setting:[{label:"未执行",value:0},{label:"执行中",value:1},{label:"已到期",value:2}]},{name:"签约公司",field:"signCompany",formType:"text",setting:[]},{name:"合同签订日期",field:"signTime",formType:"date",setting:[]},{name:"合同备注",field:"remarks",formType:"textarea",setting:[]}])},getRules:function(e){var t={contractType:[{required:!0,message:"请选择",trigger:["blur","change"]}],startTime:[{required:!0,message:"请选择",trigger:["blur","change"]}],endTime:[{required:!0,message:"请选择",trigger:["blur","change"]}],signTime:[{required:!0,message:"请选择",trigger:["blur","change"]}],status:[{required:!0,message:"请选择",trigger:["blur","change"]}]};return e&&2==e.contractType||(t.term=[{required:!0,message:"请选择",trigger:["blur","change"]}]),t},contractTypeValue:{1:"固定期限劳动合同",2:"无固定期限劳动合同",3:"以完成一定工作任务为期限的劳动合同",4:"实习协议",5:"劳务合同",6:"返聘协议",7:"劳务派遣合同",8:"借调合同",9:"其他"},termValue:{1:"1年",2:"2年",3:"3年",4:"4年",5:"5年",6:"6年",7:"7年",8:"8年",9:"9年",10:"10年"},statusValue:{0:"未执行",1:"执行中",2:"已到期"}}},kyS4:function(e,t,i){"use strict";var a=i("AHMD");i.n(a).a},nEBa:function(e,t,i){"use strict";var a=i("W7L6");i.n(a).a},nJeo:function(e,t,i){"use strict";var a=i("7N0o");i.n(a).a},oxGU:function(e,t,i){},pTHz:function(e,t,i){"use strict";var a=i("S5CY");i.n(a).a},rDGj:function(e,t,i){},vBho:function(e,t,i){"use strict";var a=i("/alq");i.n(a).a},"x/sn":function(e,t,i){"use strict";i.r(t);var a=i("GQeE"),n=i.n(a),o=i("QbLZ"),s=i.n(o),l=i("cHj4"),r=i("D0zU"),d=i("Gqw/"),c=i("9GgJ"),u=i("jpO5"),m=i("kBEL"),f=i("URGv"),h=i("5RCQ"),p=i("WEGX"),g=i("XaGJ"),v=i("Qehy"),y=i("zMw6"),b=i("nboU"),w={name:"UpdateSchemeDialog",components:{},mixins:[b.a],props:{id:[String,Number],list:Array,type:[String,Number],visible:{type:Boolean,required:!0,default:!1}},data:function(){return{loading:!1,title:"修改社保方案",schemeList:[],rules:{schemeId:[{required:!0,message:"请选择",trigger:"blur"}]},form:{}}},computed:{},watch:{visible:{handler:function(e){e&&(0==this.schemeList.length&&this.getSchemList(),this.form={schemeId:""})},immediate:!0}},mounted:function(){},methods:{handleCancel:function(){this.$emit("update:visible",!1)},getSchemList:function(){var e=this;Object(y.d)({pageType:0}).then(function(t){e.schemeList=t.data.list.map(function(e){return{label:e.schemeName,value:e.schemeId}})}).catch(function(){})},handleConfirm:function(){var e=this;this.$refs.schemeForm.validate(function(t){t&&(e.loading=!0,1==e.type?e.form.employeeIds=[e.id]:e.form.employeeIds=e.list.map(function(e){return e.employeeId}),Object(v.h)(e.form).then(function(t){e.$message.success("操作成功"),e.$emit("change"),e.handleCancel(),e.loading=!1}).catch(function(){e.loading=!1}))})}}},A=(i("yMb1"),i("KHd+")),C=Object(A.a)(w,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{ref:"wkDialog",attrs:{visible:e.visible,"append-to-body":!0,"close-on-click-modal":!1,title:e.title,width:"500px"},on:{close:e.handleCancel}},[i("div",{staticClass:"form-add-dialog-body"},[i("el-form",{ref:"schemeForm",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"参保方案"}},[i("el-select",{staticStyle:{width:"100%"},model:{value:e.form.schemeId,callback:function(t){e.$set(e.form,"schemeId",t)},expression:"form.schemeId"}},e._l(e.schemeList,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v("取消")]),e._v(" "),i("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:e.handleConfirm,expression:"handleConfirm"}],attrs:{type:"primary"}},[e._v("保存")])],1)])},[],!1,null,"fbca7fd2",null);C.options.__file="UpdateSchemeDialog.vue";var _=C.exports,k={name:"GiveUpLeaveDialog",components:{},mixins:[b.a],props:{id:[String,Number],visible:{type:Boolean,required:!0,default:!1}},data:function(){return{loading:!1,title:"放弃离职",rules:{},form:{}}},computed:{},watch:{visible:{handler:function(e){e&&(this.form={remarks:""})},immediate:!0}},mounted:function(){},methods:{handleCancel:function(){this.$emit("update:visible",!1)},handleConfirm:function(){var e=this;this.$refs.giveupForm.validate(function(t){t&&(e.loading=!0,e.form.employeeId=e.id,Object(d.b)(e.form).then(function(t){e.$message.success("操作成功"),e.$emit("change"),e.handleCancel(),e.loading=!1}).catch(function(){e.loading=!1}))})}}},T=(i("nJeo"),Object(A.a)(k,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{ref:"wkDialog",attrs:{visible:e.visible,"append-to-body":!0,"close-on-click-modal":!1,title:e.title,width:"500px"},on:{close:e.handleCancel}},[i("div",{staticClass:"form-add-dialog-body"},[i("el-form",{ref:"giveupForm",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"原因"}},[i("el-input",{attrs:{autosize:{minRows:3},maxlength:800,type:"textarea",resize:"none"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v("取消")]),e._v(" "),i("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:e.handleConfirm,expression:"handleConfirm"}],attrs:{type:"primary"}},[e._v("保存")])],1)])},[],!1,null,"4dc1220e",null));T.options.__file="GiveUpLeaveDialog.vue";var D=T.exports,S=i("4X7d"),F=i("XAon"),x=i("3pgX"),L=i("LGWg"),I=i("ixM/"),E=i("7Qib"),j={name:"DepAddEmployDialog",components:{WkUserSelect:F.a,WkDepSelect:x.a,WkDepUserViewDialog:L.a},mixins:[b.a],props:{visible:{type:Boolean,required:!0,default:!1}},data:function(){return{loading:!1,title:"从组织部门添加员工",depOptions:[],users:[],deps:[],tableList:[],tableForm:{},fieldList:[{name:"姓名",field:"employeeName",formType:"text",disabled:!0,setting:[]},{name:"手机号码",field:"mobile",formType:"text",disabled:!0,setting:[]},{name:"性别",field:"sex",formType:"radio",disabled:!0,setting:I.d.sexSetting},{name:"岗位",field:"post",formType:"text",disabled:!0,setting:[]},{name:"部门",field:"deptId",formType:"structure",props:{dataType:"hrm"},setting:[]},{name:"直属上级",field:"parentId",formType:"user",props:{label:"employeeName",value:"employeeId"},setting:[]},{name:"工号",field:"jobNumber",formType:"text",setting:[]},{name:"入职日期",field:"entryTime",formType:"date",setting:[]},{name:"聘用形式",field:"employmentForms",formType:"select",setting:I.d.employmentFormsSetting},{name:"试用期/非正式类型",field:"typeValue",formType:"select"}],tableHeight:document.documentElement.clientHeight-195,depUserViewDialogShow:!1}},computed:{},watch:{visible:{handler:function(e){e&&this.depOptions&&0==this.depOptions.length&&this.getDepOptions()},immediate:!0}},mounted:function(){var e=this;window.onresize=function(){e.tableHeight=document.documentElement.clientHeight-195}},methods:{close:function(){this.$emit("update:visible",!1)},selectClick:function(){this.depUserViewDialogShow=!0},selectUserChange:function(e,t){var i=this;this.users=e,this.deps=t,this.users.length>0||this.deps.length>0?(this.loading=!0,Object(S.c)({deptIdList:this.deps.map(function(e){return e.deptId}),userIdList:this.users.map(function(e){return e.userId})}).then(function(e){var t=e.data||[],a=[],n=i.tableList?i.tableList.map(function(e){return e.userId}):[];t.forEach(function(e){if(n.includes(e.userId)){var t=i.tableList.find(function(t){return t.userId===e.userId});t&&a.push(t)}else{var o={employeeName:e.realname,sex:e.sex,mobile:e.mobile,userId:e.userId,post:e.post,typeValueOptions:[]};a.push(o)}}),i.tableList=a,i.tableForm={table:i.tableList},i.loading=!1}).catch(function(){i.loading=!1})):this.$message.error("请选择")},fieldFormatter:function(e,t){return"sex"==t.field?I.d.sexValue[e.sex]:e[t.field]},deleteClick:function(e){this.tableList.splice(e.$index,1)},getTypeValueOptions:function(e){return e.employmentForms?1==e.employmentForms?I.d.probationSetting:2==e.employmentForms?I.d.statusSetting:[]:[]},selectChange:function(e,t,i){"employmentForms"==i.field&&(this.$set(t,"typeValueOptions",this.getTypeValueOptions(t)),this.$set(t,"typeValue",""))},getDepOptions:function(){var e=this;Object(r.e)().then(function(t){e.depOptions=t.data||[]}).catch(function(){})},handleConfirm:function(){var e=this;this.$refs.tableFrom.validate(function(t){if(!t)return!1;for(var i=Object(E.w)(e.tableList),a=0;a<i.length;a++){var n=i[a];delete n.typeValueOptions,1==n.employmentForms?n.probation=n.typeValue:2==n.employmentForms&&(n.status=n.typeValue),delete n.typeValue}e.loading=!0,Object(l.g)(i).then(function(t){e.$message.success("操作成功"),e.$emit("change"),e.close(),e.loading=!1}).catch(function(){e.loading=!1})})}}},O=(i("pTHz"),Object(A.a)(j,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{ref:"wkDialog",attrs:{visible:e.visible,"append-to-body":!0,"close-on-click-modal":!1,title:e.title,fullscreen:""},on:{close:e.close}},[i("div",{staticClass:"dep-add"},[i("div",{staticClass:"dep-add__header"},[i("el-button",{attrs:{type:"primary"},on:{click:e.selectClick}},[e._v("从系统管理选择员工")])],1),e._v(" "),i("el-form",{ref:"tableFrom",attrs:{model:e.tableForm,"validate-on-rule-change":!1,"show-message":!1,"hide-required-asterisk":""}},[i("el-table",{attrs:{data:e.tableList,height:e.tableHeight,stripe:"",border:""}},[e._l(e.fieldList,function(t,a){return i("el-table-column",{key:a,attrs:{prop:t.field,label:t.name,"min-width":t.disabled?120:170,"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row,o=a.$index;return[t.disabled?[e._v("\n              "+e._s(e.fieldFormatter(n,t))+"\n            ")]:"text"==t.formType?i("el-form-item",{attrs:{prop:"table["+o+"]."+t.field,rules:{required:!0,message:"请输入",trigger:"change"},label:""}},[i("el-input",{attrs:{maxlength:100},model:{value:n[t.field],callback:function(i){e.$set(n,t.field,i)},expression:"row[item.field]"}})],1):"structure"==t.formType?i("wk-dep-select",{staticStyle:{width:"100%"},attrs:{options:e.depOptions,props:t.props,radio:""},model:{value:n[t.field],callback:function(i){e.$set(n,t.field,i)},expression:"row[item.field]"}}):"user"==t.formType?i("wk-user-select",{staticStyle:{width:"100%"},attrs:{props:t.props,radio:""},model:{value:n[t.field],callback:function(i){e.$set(n,t.field,i)},expression:"row[item.field]"}}):"date"==t.formType?i("el-form-item",{attrs:{prop:"table["+o+"]."+t.field,rules:{required:!0,message:"请输入",trigger:"change"},label:""}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:n[t.field],callback:function(i){e.$set(n,t.field,i)},expression:"row[item.field]"}})],1):"typeValue"==t.field?i("el-form-item",{attrs:{prop:"table["+o+"]."+t.field,rules:{required:!0,message:"请输入",trigger:"change"},label:""}},[i("el-select",{staticStyle:{width:"100%"},model:{value:n[t.field],callback:function(i){e.$set(n,t.field,i)},expression:"row[item.field]"}},e._l(n.typeValueOptions,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1):"select"==t.formType?i("el-form-item",{attrs:{prop:"table["+o+"]."+t.field,rules:{required:!0,message:"请输入",trigger:"change"},label:""}},[i("el-select",{staticStyle:{width:"100%"},on:{change:function(i){e.selectChange(i,n,t)}},model:{value:n[t.field],callback:function(i){e.$set(n,t.field,i)},expression:"row[item.field]"}},e._l(t.setting,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1):e._e()]}}])})}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){e.deleteClick(t)}}},[e._v("删 除")])]}}])})],2)],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){return e.close(t)}}},[e._v("取消")]),e._v(" "),i("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:e.handleConfirm,expression:"handleConfirm"}],attrs:{type:"primary"}},[e._v("保存")])],1),e._v(" "),e.depUserViewDialogShow?i("wk-dep-user-view-dialog",{attrs:{visible:e.depUserViewDialogShow},on:{"update:visible":function(t){e.depUserViewDialogShow=t},change:e.selectUserChange}}):e._e()],1)},[],!1,null,"65eaf409",null));O.options.__file="DepAddEmployDialog.vue";var N=O.exports,$=i("Jbo4"),R=i("L2JU"),V=i("JPSa"),B=i("kq9f"),q={name:"EmployeeIndex",components:{XrHeader:c.a,XrTableHeader:u.a,EmployeeCreateView:h.a,EmployeeDetail:p.a,WkPopoverFilter:m.a,WkFieldSet:f.a,FormAddDialog:g.a,UpdateSchemeDialog:_,GiveUpLeaveDialog:D,DepAddEmployDialog:N,WkBorderMenu:$.a},data:function(){return{loading:!1,createType:"",isCreate:!1,tableHeight:document.documentElement.clientHeight-275,list:[],fieldList:[],sortFields:["sex","dateOfBirth","age","entryTime","becomeTime","fieldName","jobNumber","birthday","deptId"],sortData:{},currentPage:1,pageSize:15,pageSizes:[15,30,60,100],total:0,search:"",queryParams:{},popoverFilterWidth:150,tabType:"12",tabLeftList:[{label:"在职",name:"11",num:0},{label:"全职",name:"12",num:0},{label:"实习",name:"3",num:0},{label:"劳务",name:"5",num:0},{label:"顾问",name:"6",num:0},{label:"返聘",name:"7",num:0},{label:"外包",name:"8",num:0},{label:"兼职",name:"4",num:0}],tabCenterList:[{label:"试用",name:"2",num:0},{label:"正式",name:"1",num:0}],tabRightList:[{label:"待入职",name:"13",num:0},{label:"待离职",name:"14",num:0},{label:"已离职",name:"15",num:0}],rowID:"",showDview:!1,filterObj:{},filterList:[{name:"手机号码",field:"mobile",formType:"text",setting:[]},{name:"性别",field:"sex",formType:"radio",setting:[{label:"男",value:1},{label:"女",value:2}]},{name:"工作地点",field:"workAddress",formType:"text",setting:[]},{name:"聘用形式",field:"employmentForms",formType:"select",setting:[{label:"正式",value:1},{label:"非正式",value:2}]},{name:"入职日期",field:"entryTime",formType:"dateRange",setting:[]},{name:"岗位",field:"post",formType:"text",setting:[]},{name:"转正日期",field:"becomeTime",formType:"dateRange",setting:[]},{name:"工号",field:"jobNumber",formType:"text",setting:[]},{name:"部门",field:"deptId",formType:"structure",props:{dataType:"hrm"},request:r.e,setting:[]}],selectionList:[],formAddTitle:"",formAddForm:{},formAddRules:{},formAddFields:[],formAddDialogShow:!1,handleRowData:null,fieldSetLoading:!1,updateSchemeType:1,updateSchemeDialogShow:!1,giveUpLeaveShow:!1,depAddEmplogyShow:!1}},computed:s()({},Object(R.b)(["collapse","hrm","hrmUserType","userInfo"]),{employeeAuth:function(){return this.hrm.employee},createAuth:function(){return this.employeeAuth&&this.employeeAuth.save},deleteAuth:function(){return this.employeeAuth&&this.employeeAuth.delete},excelexportAuth:function(){return this.employeeAuth&&this.employeeAuth.excelexport},excelimportAuth:function(){return this.employeeAuth&&this.employeeAuth.excelimport},detailAuth:function(){return this.employeeAuth&&this.employeeAuth.read},moreHandleShow:function(){return this.employeeAuth.confirmEntry||this.employeeAuth.againOnboarding||this.employeeAuth.become||this.employeeAuth.changePost||this.employeeAuth.promotion||this.employeeAuth.setInsured||this.employeeAuth.cancelLevel||this.employeeAuth.leave},headerMoreHandle:function(){var e=[];return this.excelimportAuth&&e.push({type:"import",name:"导入",icon:"wk wk-import"}),this.excelexportAuth&&e.push({type:"export",name:"导出",icon:"wk wk-export"}),e},tabelHandles:function(){var e=[];return this.deleteAuth&&e.push({label:"删除",command:"delete",icon:"wk wk-delete"}),this.multiInsuredShow&&e.push({label:"参保方案",command:"security",icon:"wk wk-approval-9"}),this.excelexportAuth&&e.push({label:"导出选中",command:"export",icon:"wk wk-export"}),e},multiInsuredShow:function(){return this.employeeAuth.setInsured&&("12"==this.tabType||"2"==this.tabType||"1"==this.tabType)},hasFilterContent:function(){if(this.filterObj){for(var e=!1,t=n()(this.filterObj),i=0;i<t.length;i++){var a=t[i];""!=this.filterObj[a]&&this.filterObj[a]!=[]&&null!=this.filterObj[a]&&void 0!=this.filterObj[a]&&(e=!0)}return e}return!1},showFieldList:function(){return this.fieldList.filter(function(e){return 1!=e.isHide})},setFieldList:function(){for(var e=[],t=[],i=0;i<this.fieldList.length;i++){var a=Object(E.w)(this.fieldList[i]);a.left="",a.center="",a.right="",a.check=1!=a.isHide,a.check?e.push(a):t.push(a)}return e.concat(t)}}),watch:{collapse:{handler:function(e){this.popoverFilterWidth=document.documentElement.clientWidth-(e?89:225)},immediate:!0}},beforeRouteUpdate:function(e,t,i){this.$route.query.depAddEmplogyShow&&(this.depAddEmplogyShow=!0),i()},created:function(){var e=this;window.onresize=function(){e.tableHeight=document.documentElement.clientHeight-(e.selectionList.length>0?325:275)},this.$bus.on("import-crm-done-bus",function(){e.refreshPageData()});var t=this.$route.query;if(t)if("filter"==t.workbench){var i=this.$route.query;i&&i.tabType?this.tabType=i.tabType:(this.tabType="",this.queryParams=i,delete this.queryParams.workbench)}else t.depAddEmplogyShow&&(this.depAddEmplogyShow=!0);this.getFieldList(),this.refreshList(),this.getTabsNum()},beforeDestroy:function(){this.$bus.off("import-crm-done-bus")},methods:{refreshPageData:function(){this.$store.dispatch("GetHrmUserInfo"),this.getList(),this.getTabsNum()},getTabsNum:function(){var e=this;Object(l.J)().then(function(t){var i=t.data||{};e.tabLeftList.forEach(function(e){e.num=i[parseInt(e.name)]||0}),e.tabCenterList.forEach(function(e){e.num=i[parseInt(e.name)]||0}),e.tabRightList.forEach(function(e){e.num=i[parseInt(e.name)]||0})}).catch(function(){})},tabClick:function(e){this.queryParams={},this.refreshList()},resetFilter:function(){this.filterObj={},this.refreshList()},createClick:function(){this.handleRowData=null,this.createType="new",this.isCreate=!0},createFromDepClick:function(){this.depAddEmplogyShow=!0},createSaveSuccess:function(){this.getTabsNum(),this.refreshList()},searchClick:function(e){this.search=e,this.refreshList()},detailHandle:function(e){"delete"===e.type&&(this.$store.dispatch("GetHrmUserInfo"),this.showDview=!1),this.getTabsNum(),this.getList()},getFieldList:function(){var e=this;Object(l.s)().then(function(t){var i=t.data||[];i.forEach(function(t){t.sortable=e.sortFields.includes(t.fieldName)}),e.fieldList=i}).catch(function(){})},refreshList:function(){this.handleCurrentChange(1)},handleSizeChange:function(e){this.pageSize=e,this.getList()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},sortChange:function(e,t,i){this.currentPage=1,this.sortData=e,this.getList()},getList:function(){var e=this;this.loading=!0;var t={page:this.currentPage,limit:this.pageSize,employeeName:this.search,status:this.tabType};for(var i in this.filterObj)t[i]=this.filterObj[i];for(var i in this.queryParams)t[i]=this.queryParams[i];this.sortData.order&&(t.sortField=this.sortData.prop,t.order="ascending"==this.sortData.order?2:1),Object(l.I)(t).then(function(t){e.list=t.data.list,e.total=t.data.totalRow,t.data.totalRow&&Math.ceil(t.data.totalRow/e.pageSize)<e.currentPage&&e.currentPage>1?(e.currentPage=e.currentPage-1,e.getList()):(e.total=t.data.totalRow,e.loading=!1),e.$nextTick(function(){var e=document.querySelector(".el-table__body-wrapper");e.scrollTop=1,0!=e.scrollLeft&&(e.scrollLeft=e.scrollLeft-1)}),e.loading=!1}).catch(function(){e.loading=!1})},fieldFormatter:function(e,t){var i=I.d[t.property+"Value"];return i?i[e[t.property]]||"--":"highestEducation"==t.property?I.c.educationValue[e[t.property]]||"--":"contractType"==t.property?B.a.contractTypeValue[e.contractType]||"--":"term"==t.property?B.a.termValue[e.term]||"--":"deptId"==t.property?e.deptName:"parentId"==t.property?e.parentName:"channelId"==t.property?e.channelName:e[t.property]||"--"},cellClassName:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;return this.detailAuth&&"employeeName"==t.property?"can-visit--underline":""},handleCommand:function(e){var t=this;"delete"===e?this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.k)(t.selectionList.map(function(e){return e.employeeId})).then(function(e){t.$message({type:"success",message:"删除成功"}),t.getList()}).catch(function(){})}).catch(function(){t.$message({type:"info",message:"已取消操作"})}):"security"===e?(this.updateSchemeType=2,this.updateSchemeDialogShow=!0):"export"===e&&(this.loading=!0,Object(l.r)({employeeIds:this.selectionList.map(function(e){return e.employeeId})}).then(function(e){Object(E.c)(e),t.loading=!1}).catch(function(){t.loading=!1}))},formChange:function(e,t,i,a,n){"调整部门/岗位"!==this.formAddTitle&&"晋升/降级"!==this.formAddTitle||"changeType"!=e.field?"办理离职"===this.formAddTitle&&"quitType"==e.field&&(1==i?n.quitReason=1:2==i?n.quitReason=11:3==i&&(n.quitReason=""),this.formAddRules=V.a.getRules(n),this.formAddFields=V.a.getFields(n)):(n.changeReason=7==i?4:1,this.formAddFields=I.b.fieldsFunc(i,this.handleRowData.status))},headerMoreHandleClick:function(e){var t=this;if("export"==e){this.loading=!0;var i={employeeName:this.search,status:this.tabType};for(var a in this.filterObj)i[a]=this.filterObj[a];for(var a in this.queryParams)i[a]=this.queryParams[a];Object(l.r)(i).then(function(e){Object(E.c)(e),t.loading=!1}).catch(function(){t.loading=!1})}else"import"==e&&this.$wkImport.import("hrm",{ownerSelectShow:!1,repeatRuleShow:!1,importRequest:l.U,templateRequest:l.q,userInfo:this.userInfo})},getRowDropdownItems:function(e){var t=[];return 2==e.entryStatus?this.employeeAuth.confirmEntry&&t.push({label:"确认入职",command:"confirm",icon:"wk wk-activation"}):4==e.entryStatus?this.employeeAuth.againOnboarding&&t.push({label:"再入职",command:"again",icon:"wk wk-approval-17"}):(2==e.status&&this.employeeAuth.become&&t.push({label:"办理转正",command:"official",icon:"wk wk-transfer"}),this.employeeAuth.changePost&&t.push({label:"调整部门/岗位",command:"change-post",icon:"wk wk-employees"}),this.employeeAuth.promotion&&t.push({label:"晋升/降级",command:"change-level",icon:"wk wk-approval-12"}),1!=e.status&&2!=e.status||this.employeeAuth.setInsured&&t.push({label:"参保方案",command:"security",icon:"wk wk-approval-9"}),3==e.entryStatus?this.employeeAuth.cancelLevel&&t.push({label:"放弃离职",command:"give-up-leave",icon:"wk wk-reset"}):this.employeeAuth.leave&&t.push({label:"办理离职",command:"leave",icon:"wk wk-approval-16"})),t},getRowDropdownShow:function(e){if(2==e.entryStatus){if(this.employeeAuth.confirmEntry)return!0}else if(4==e.entryStatus){if(this.employeeAuth.againOnboarding)return!0}else{if(2==e.status&&this.employeeAuth.become)return!0;if(this.employeeAuth.changePost)return!0;if(this.employeeAuth.promotion)return!0;if((1==e.status||2==e.status)&&this.employeeAuth.setInsured)return!0;if(3==e.entryStatus){if(this.employeeAuth.cancelLevel)return!0}else if(this.employeeAuth.leave)return!0}return!1},handleTypeClick:function(e,t){this.handleRowData=t,"leave"===e?(this.formAddTitle="办理离职",this.formAddForm={quitType:1,quitReason:1},this.formAddRules=V.a.getRules(this.formAddForm),this.formAddFields=V.a.getFields(this.formAddForm),this.formAddDialogShow=!0):"official"===e?(this.formAddTitle="办理转正",this.formAddForm={newDept:t.deptId||"",newParentId:t.parentId||"",newPost:t.post||"",becomeTime:t.becomeTime,changeType:4},this.formAddRules=I.e.rules,this.formAddFields=I.e.fields,this.formAddDialogShow=!0):"again"===e?(this.handleRowData=t,this.createType="again",this.isCreate=!0):"change-post"===e||"change-level"===e?(this.formAddTitle="change-post"===e?"调整部门/岗位":"晋升/降级",this.formAddForm={changeType:"change-post"===e?5:6,changeReason:1,oldDept:t.deptId||"",newDept:"",oldPost:t.post||"",newPost:"",oldPostLevel:t.postLevel||"",newPostLevel:"",oldWorkAddress:t.workAddress||"",newWorkAddress:"",entryTime:t.entryTime||""},this.formAddRules=I.b.rules,this.formAddFields=I.b.fieldsFunc(this.formAddForm.changeReason,t.status),this.formAddDialogShow=!0):"give-up-leave"===e?this.giveUpLeaveShow=!0:"security"===e?(this.updateSchemeType=1,this.updateSchemeDialogShow=!0):"confirm"===e&&(this.handleRowData=t,this.createType="confirm",this.isCreate=!0)},handleRowClick:function(e,t,i){this.detailAuth&&"employeeName"==t.property&&(this.rowID=e.employeeId,this.showDview=!0)},handleSelectionChange:function(e){this.selectionList=e,this.tableHeight=document.documentElement.clientHeight-(this.selectionList.length>0?325:275)},formAddPass:function(){var e=this;this.$refs.formAdddialog.loading=!0,this.formAddForm.employeeId=this.handleRowData.employeeId;var t=null;"办理离职"===this.formAddTitle?t=d.a:"办理转正"===this.formAddTitle?t=l.K:"调整部门/岗位"===this.formAddTitle?t=l.M:"晋升/降级"===this.formAddTitle&&(t=l.P),t(this.formAddForm).then(function(t){e.$refs.formAdddialog.loading=!1,e.$message.success(e.formAddTitle+"成功"),e.formAddDialogShow=!1,e.getTabsNum(),e.getList()}).catch(function(){e.$refs.formAdddialog.loading=!1})},fieldSetSave:function(e){var t=this;this.fieldSetLoading=!0,e.forEach(function(e,t){e.isHide=e.check?0:1,e.sort=t}),Object(l.t)(e).then(function(e){t.$message.success("操作成功"),t.getFieldList(),t.fieldSetLoading=!1}).catch(function(){t.fieldSetLoading=!1})},handleHeaderDragend:function(e,t,i,a){if(i.property){var n=this.showFieldList.find(function(e){return e.fieldName==i.property});n&&Object(l.u)({width:e,fieldId:n.fieldId}).then(function(e){}).catch(function(){})}}}},P=(i("5xlL"),Object(A.a)(q,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"employee-index",attrs:{id:"employee-main-container"}},[i("xr-header",{staticStyle:{padding:"0px 15px 15px 0"},attrs:{"ft-top":"0","icon-class":"wk wk-user","icon-color":"#2362FB",placeholder:"请输入员工姓名","show-search":"","search-icon-type":"icon"},on:{search:e.searchClick}},[i("template",{slot:"label"},[e._v("\n      员工管理"),2===e.hrmUserType?i("el-tooltip",{staticStyle:{"margin-left":"8px"},attrs:{effect:"dark",placement:"top",content:"仅展示您管理范围内的员工"}},[i("i",{staticClass:"wk wk-help wk-help-tips"})]):e._e()],1),e._v(" "),i("template",{slot:"ft"},[e.hasFilterContent?i("el-button",{attrs:{type:"text"},on:{click:e.resetFilter}},[e._v("清除筛选")]):e._e(),e._v(" "),i("wk-popover-filter",{staticStyle:{"margin-right":"5px"},attrs:{width:e.popoverFilterWidth,"field-from":e.filterObj,"field-list":e.filterList,"has-content":e.hasFilterContent,placement:"bottom"},on:{"update:fieldFrom":function(t){e.filterObj=t},sure:e.refreshList,reset:e.resetFilter}}),e._v(" "),e.createAuth?[i("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.createClick}},[e._v("新建员工")]),e._v(" "),i("el-button",{attrs:{icon:"el-icon-plus",type:"primary",plain:""},on:{click:e.createFromDepClick}},[e._v("从组织架构中选择")])]:e._e(),e._v(" "),e.headerMoreHandle.length>0?i("el-dropdown",{staticStyle:{"margin-left":"5px"},attrs:{trigger:"click"},on:{command:e.headerMoreHandleClick}},[i("el-button",{attrs:{icon:"el-icon-more"}}),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.headerMoreHandle,function(t,a){return i("el-dropdown-item",{key:a,attrs:{icon:t.icon,command:t.type}},[e._v(e._s(t.name))])}))],1):e._e()],2)],2),e._v(" "),i("div",{staticClass:"crm-container"},[i("flexbox",{staticClass:"filter"},[i("wk-border-menu",{staticStyle:{flex:"6"},attrs:{list:e.tabLeftList,"is-select":!!e.tabLeftList.find(function(t){return t.name==e.tabType})},on:{select:e.tabClick},model:{value:e.tabType,callback:function(t){e.tabType=t},expression:"tabType"}}),e._v(" "),i("wk-border-menu",{staticStyle:{flex:"2"},attrs:{list:e.tabCenterList,"is-select":!!e.tabCenterList.find(function(t){return t.name==e.tabType})},on:{select:e.tabClick},model:{value:e.tabType,callback:function(t){e.tabType=t},expression:"tabType"}}),e._v(" "),i("wk-border-menu",{staticStyle:{flex:"3"},attrs:{list:e.tabRightList,"is-select":!!e.tabRightList.find(function(t){return t.name==e.tabType})},on:{select:e.tabClick},model:{value:e.tabType,callback:function(t){e.tabType=t},expression:"tabType"}})],1),e._v(" "),e.selectionList.length>0?i("xr-table-header",{attrs:{handles:e.tabelHandles,selects:e.selectionList},on:{command:e.handleCommand}}):e._e(),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"n-table--border el-table-header--white",staticStyle:{width:"100%"},attrs:{id:"crm-table","row-height":40,data:e.list,height:e.tableHeight,"cell-class-name":e.cellClassName,"use-virtual":"",stripe:"",border:"","highlight-current-row":""},on:{"row-click":e.handleRowClick,"header-dragend":e.handleHeaderDragend,"selection-change":e.handleSelectionChange,"sort-change":e.sortChange}},[e.deleteAuth||e.multiInsuredShow?i("el-table-column",{attrs:{"show-overflow-tooltip":"",fixed:"",type:"selection",align:"center",width:"55"}}):e._e(),e._v(" "),e._l(e.showFieldList,function(t,a){return i("el-table-column",{key:a,attrs:{fixed:0==a,prop:t.fieldName,label:t.name,sortable:t.sortable,"min-width":t.width,formatter:e.fieldFormatter,"show-overflow-tooltip":""}})}),e._v(" "),i("el-table-column"),e._v(" "),e.moreHandleShow?i("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.getRowDropdownShow(t.row)?i("el-dropdown",{attrs:{trigger:"click"},on:{command:function(i){e.handleTypeClick(i,t.row)}}},[i("i",{staticClass:"el-icon-more table-more"}),e._v(" "),i("el-dropdown-menu",{staticStyle:{width:"150px"},attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.getRowDropdownItems(t.row),function(t,a){return i("el-dropdown-item",{key:a,attrs:{icon:t.icon,command:t.command}},[e._v(e._s(t.label))])}))],1):e._e()]}}])}):e._e(),e._v(" "),i("el-table-column",{attrs:{resizable:!1,fixed:"right",width:"40"},scopedSlots:e._u([{key:"header",fn:function(t){return[i("wk-field-set",{attrs:{loading:e.fieldSetLoading,fields:e.setFieldList},on:{save:e.fieldSetSave}})]}}])})],2),e._v(" "),i("div",{staticClass:"p-contianer"},[i("el-pagination",{staticClass:"p-bar",attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:pageSize":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),e.showDview?i("employee-detail",{attrs:{id:e.rowID},on:{handle:e.detailHandle,close:function(t){e.showDview=!1}}}):e._e(),e._v(" "),e.isCreate?i("employee-create-view",{attrs:{"create-type":e.createType,detail:e.handleRowData},on:{success:e.createSaveSuccess,close:function(t){e.isCreate=!1}}}):e._e(),e._v(" "),i("form-add-dialog",{ref:"formAdddialog",attrs:{title:e.formAddTitle,form:e.formAddForm,rules:e.formAddRules,fields:e.formAddFields,visible:e.formAddDialogShow},on:{"update:form":function(t){e.formAddForm=t},"update:visible":function(t){e.formAddDialogShow=t},pass:e.formAddPass,change:e.formChange}}),e._v(" "),i("update-scheme-dialog",{attrs:{id:e.handleRowData?e.handleRowData.employeeId:"",list:e.selectionList,type:e.updateSchemeType,visible:e.updateSchemeDialogShow},on:{"update:visible":function(t){e.updateSchemeDialogShow=t},change:e.getList}}),e._v(" "),i("give-up-leave-dialog",{attrs:{id:e.handleRowData?e.handleRowData.employeeId:"",visible:e.giveUpLeaveShow},on:{"update:visible":function(t){e.giveUpLeaveShow=t},change:e.refreshPageData}}),e._v(" "),e.depAddEmplogyShow?i("dep-add-employ-dialog",{attrs:{visible:e.depAddEmplogyShow},on:{"update:visible":function(t){e.depAddEmplogyShow=t},change:e.refreshPageData}}):e._e()],1)},[],!1,null,"2a8a0b46",null));P.options.__file="index.vue";t.default=P.exports},x13F:function(e,t,i){},yMb1:function(e,t,i){"use strict";var a=i("x13F");i.n(a).a},zEpx:function(e,t,i){"use strict";var a=i("1xWU");i.n(a).a},zMw6:function(e,t,i){"use strict";i.d(t,"j",function(){return n}),i.d(t,"m",function(){return o}),i.d(t,"c",function(){return s}),i.d(t,"i",function(){return l}),i.d(t,"h",function(){return r}),i.d(t,"l",function(){return d}),i.d(t,"k",function(){return c}),i.d(t,"n",function(){return u}),i.d(t,"g",function(){return m}),i.d(t,"f",function(){return f}),i.d(t,"o",function(){return h}),i.d(t,"d",function(){return p}),i.d(t,"e",function(){return g}),i.d(t,"a",function(){return v}),i.d(t,"b",function(){return y}),i.d(t,"u",function(){return b}),i.d(t,"w",function(){return w}),i.d(t,"x",function(){return A}),i.d(t,"v",function(){return C}),i.d(t,"A",function(){return _}),i.d(t,"B",function(){return k}),i.d(t,"y",function(){return T}),i.d(t,"z",function(){return D}),i.d(t,"p",function(){return S}),i.d(t,"q",function(){return F}),i.d(t,"r",function(){return x}),i.d(t,"s",function(){return L}),i.d(t,"t",function(){return I});var a=i("t3Un");function n(e){return Object(a.a)({url:"hrmConfig/queryRecruitChannelList",method:"post",data:e})}function o(e){return Object(a.a)({url:"hrmConfig/saveRecruitChannel",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function s(e){return Object(a.a)({url:"hrmConfig/deleteRecruitChannel",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(a.a)({url:"hrmConfig/queryFields",method:"post",data:e})}function r(e){return Object(a.a)({url:"hrmConfig/queryFieldByLabel/"+e,method:"post"})}function d(e){return Object(a.a)({url:"hrmConfig/saveField",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(a.a)({url:"hrmConfig/queryRecruitEliminateList",method:"post",data:e})}function u(e){return Object(a.a)({url:"hrmConfig/saveRecruitEliminate",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function m(e){return Object(a.a)({url:"hrmConfig/queryAchievementTableList",method:"post",data:e})}function f(e){return Object(a.a)({url:"hrmConfig/queryAchievementTableById/"+e,method:"post"})}function h(e){return Object(a.a)({url:"hrmConfig/setAchievementTable",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function p(e){return Object(a.a)({url:"hrmConfig/queryInsuranceSchemePageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function g(e){return Object(a.a)({url:"hrmConfig/queryInsuranceSchemeById/"+e,method:"post"})}function v(e){return Object(a.a)({url:"hrmConfig/addInsuranceScheme",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function y(e){return Object(a.a)({url:"hrmConfig/deleteInsuranceScheme/"+e,method:"post"})}function b(e){return Object(a.a)({url:"hrmSalaryGroup/addSalaryGroup",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function w(e){return Object(a.a)({url:"hrmSalaryGroup/querySalaryGroupPageList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function A(e){return Object(a.a)({url:"hrmSalaryGroup/setSalaryGroup",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function C(e){return Object(a.a)({url:"hrmSalaryGroup/delete/"+e,method:"post"})}function _(e){return Object(a.a)({url:"hrmSalaryTaxRule/queryTaxRuleList",method:"post",data:e})}function k(e){return Object(a.a)({url:"hrmSalaryTaxRule/setTaxRule",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function T(e){return Object(a.a)({url:"hrmSalaryOption/querySalaryOptionDetail",method:"post",data:e})}function D(e){return Object(a.a)({url:"hrmSalaryOption/setSalaryOption",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function S(){return Object(a.a)({url:"hrmEmployeeArchives/queryEmployeeArchivesField",method:"post"})}function F(e){return Object(a.a)({url:"hrmEmployeeArchives/sendWriteArchives",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function x(e){return Object(a.a)({url:"hrmEmployeeArchives/setEmployeeArchivesField",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function L(e){return Object(a.a)({url:"hrmEmployeeFieldManage/queryEmployeeManageField",method:"post",data:e})}function I(e){return Object(a.a)({url:"hrmEmployeeFieldManage/setEmployeeManageField",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}}}]);