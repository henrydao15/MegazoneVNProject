(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-346a"],{"+WIx":function(e,t,a){e.exports=a.p+"static/img/status-stop.2ad2912.png"},"/SD7":function(e,t,a){"use strict";var s=a("hxdy");a.n(s).a},"07L2":function(e,t,a){},"22VT":function(e,t,a){"use strict";var s=a("E8O3");a.n(s).a},"3c4F":function(e,t,a){"use strict";var s=a("9I6p"),i={name:"ScheduleEditDialog",components:{},mixins:[a("nboU").a],props:{id:[String,Number],visible:{type:Boolean,required:!0,default:!1}},data:function(){return{loading:!1,form:{}}},computed:{},watch:{visible:{handler:function(e){e&&(this.form={schedule:0})},immediate:!0}},mounted:function(){},methods:{handleCancel:function(){this.$emit("update:visible",!1)},handleConfirm:function(){var e=this;this.loading=!0,this.form.segId=this.id,Object(s.o)(this.form).then(function(t){e.$message.success("操作成功"),e.$emit("change",e.form.schedule),e.handleCancel(),e.loading=!1}).catch(function(){e.loading=!1})}}},l=(a("r8yA"),a("KHd+")),n=Object(l.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{ref:"wkDialog",attrs:{visible:e.visible,"append-to-body":!0,"close-on-click-modal":!1,title:"编辑进度",width:"500px"},on:{close:e.handleCancel}},[a("div",{staticClass:"form-add-dialog-body"},[a("el-form",{ref:"scheduleForm",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"进度"}},[a("el-slider",{model:{value:e.form.schedule,callback:function(t){e.$set(e.form,"schedule",t)},expression:"form.schedule"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"explainDesc",label:"完成情况"}},[a("el-input",{attrs:{autosize:{minRows:3},maxlength:800,type:"textarea",resize:"none"},model:{value:e.form.explainDesc,callback:function(t){e.$set(e.form,"explainDesc",t)},expression:"form.explainDesc"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v("取消")]),e._v(" "),a("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:e.handleConfirm,expression:"handleConfirm"}],attrs:{type:"primary"}},[e._v("保存")])],1)])},[],!1,null,"92bf2ca0",null);n.options.__file="ScheduleEditDialog.vue";t.a=n.exports},"9I6p":function(e,t,a){"use strict";a.d(t,"h",function(){return i}),a.d(t,"e",function(){return l}),a.d(t,"l",function(){return n}),a.d(t,"n",function(){return o}),a.d(t,"d",function(){return r}),a.d(t,"c",function(){return c}),a.d(t,"q",function(){return u}),a.d(t,"o",function(){return d}),a.d(t,"m",function(){return v}),a.d(t,"k",function(){return m}),a.d(t,"p",function(){return p}),a.d(t,"g",function(){return f}),a.d(t,"f",function(){return h}),a.d(t,"i",function(){return _}),a.d(t,"j",function(){return b}),a.d(t,"b",function(){return g}),a.d(t,"a",function(){return y});var s=a("t3Un");function i(){return Object(s.a)({url:"hrmAchievementEmployeeAppraisal/queryAppraisalNum",method:"post"})}function l(e){return Object(s.a)({url:"hrmAchievementEmployeeAppraisal/queryMyAppraisal",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function n(e){return Object(s.a)({url:"hrmAchievementEmployeeAppraisal/queryResultConfirmList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(s.a)({url:"hrmAchievementEmployeeAppraisal/queryTargetConfirmList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function r(e){return Object(s.a)({url:"hrmAchievementEmployeeAppraisal/queryEvaluatoList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(s.a)({url:"hrmAchievementEmployeeAppraisal/queryEmployeeAppraisalDetail/"+e,method:"post"})}function u(e){return Object(s.a)({url:"hrmAchievementEmployeeAppraisal/writeAppraisal",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(s.a)({url:"hrmAchievementEmployeeAppraisal/updateSchedule",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function v(e){return Object(s.a)({url:"hrmAchievementEmployeeAppraisal/targetConfirm",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function m(e){return Object(s.a)({url:"hrmAchievementEmployeeAppraisal/resultEvaluato",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function p(e){return Object(s.a)({url:"hrmAchievementEmployeeAppraisal/updateScoreLevel",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function f(e){return Object(s.a)({url:"hrmAchievementAppraisalScoreLevel/queryScoreLevelList/"+e,method:"post"})}function h(e){return Object(s.a)({url:"hrmAchievementAppraisalScoreLevel/queryScoreLevelListByAppraisalId/"+e,method:"post"})}function _(e){return Object(s.a)({url:"hrmAchievementEmployeeAppraisal/queryResultConfirmByAppraisalId/"+e,method:"post"})}function b(e){return Object(s.a)({url:"hrmAchievementEmployeeAppraisal/resultConfirm/"+e,method:"post"})}function g(){return Object(s.a)({url:"hrmAchievementEmployeeAppraisal/queryTargetConfirmScreen",method:"post"})}function y(e){return Object(s.a)({url:"hrmAchievementEmployeeAppraisal/queryEvaluatoScreen",method:"post",data:e})}},BdXn:function(e,t,a){"use strict";var s=a("gixq");a.n(s).a},CUKw:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var s=a("t3Un");function i(e){return Object(s.a)({url:"hrmActionRecord/queryRecordList",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},E8O3:function(e,t,a){},Gbek:function(e,t,a){"use strict";var s=a("GQeE"),i=a.n(s);t.a={statusValue:{1:"目标待填写",2:"目标待确认",3:"结果待评定",4:"结果待确认",5:"考核终止",6:"考核完成"},getValueList:function(e){return i()(e).map(function(t){return{label:e[t],value:parseInt(t)}})}}},N514:function(e,t,a){"use strict";var s=a("zfuv");a.n(s).a},PcpC:function(e,t,a){"use strict";var s={name:"WkCircleTag",directives:{FitText:a("PmkA").a},components:{},props:{width:{type:[String,Number],default:90},bold:{type:Boolean,default:!0},label:[String,Number],des:[String,Number]},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{}},i=(a("T0EK"),a("KHd+")),l=Object(i.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wk-circle-tag",style:{width:e.width+"px",height:e.width+"px",borderRadius:e.width/2+"px",borderColor:e.bold?"#2362FB":"#CCD4DC"}},[a("flexbox",{staticClass:"wk-circle-tag__content",style:{borderColor:e.bold?"#2362FB":"#CCD4DC"},attrs:{orient:"vertical",align:"center",justify:"center"}},[a("div",{staticClass:"label text-one-line",class:{"is-bold":e.bold},style:{color:e.bold?"#2362FB":"#999999",fontSize:e.bold?"16px":"12px"}},[e._v(e._s(e.label))]),e._v(" "),e.des?a("div",{staticClass:"des text-one-line"},[e._v(e._s(e.des))]):e._e()])],1)},[],!1,null,"7377dcec",null);l.options.__file="WkCircleTag.vue";t.a=l.exports},PmkA:function(e,t,a){"use strict";var s=a("FdMb"),i="FitText";t.a={name:"FitText",bind:function(e,t,a){var l=t.value||{fontSize:14},n=Object(s.a)(300,function(){var e=this[i],t=e.el,a=e.option.fontSize;t.style.fontSize=a+"px";for(var s=t.scrollWidth;t.scrollWidth>t.clientWidth;){if(s=t.scrollWidth,a-=.2,t.style.fontSize=a+"px",s<=t.clientWidth){t.style.overflowX="visible";break}if(a<=12){t.style.overflowX="hidden",t.style.overflowY="hidden",t.style.textOverflow="ellipsis";break}}}.bind(e));e[i]={el:e,option:l,debouncedResize:n},window.addEventListener("resize",n)},inserted:function(e,t,a){(0,e[i].debouncedResize)()},update:function(e,t,a){(0,e[i].debouncedResize)()},unbind:function(e){var t=e[i].debouncedResize;window.removeEventListener("resize",t)}}},T0EK:function(e,t,a){"use strict";var s=a("v5G9");a.n(s).a},WBVl:function(e,t,a){e.exports=a.p+"static/img/status-achieve.af8e3b9.png"},WfJ5:function(e,t,a){"use strict";var s=a("CUKw"),i=a("7Qib"),l={name:"PerformanceHistory",components:{},props:{id:[String,Number]},data:function(){return{loading:!1,list:[]}},computed:{},watch:{id:function(e){this.list=[],this.getDetail()}},mounted:function(){this.getDetail()},activated:function(){},deactivated:function(){},methods:{getDetail:function(){var e=this;this.loading=!0,Object(s.a)({type:4,typeId:this.id}).then(function(t){e.loading=!1;var a=t.data||[];a.forEach(function(e){e.content=e.content?JSON.parse(e.content):[]}),e.list=a}).catch(function(){e.loading=!1})},getYMDFormaterTime:function(e){return Object(i.C)(e)},getWeekFormaterTime:function(e){return Object(i.C)(e,"dddd")},getTimeFormaterTime:function(e){return Object(i.C)(e,"H:mm")}}},n=(a("N514"),a("KHd+")),o=Object(n.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"rc-cont"},e._l(e.list,function(t,s){return a("flexbox",{key:s,staticClass:"ha-cont",attrs:{align:"stretch",justify:"flex-start"}},[a("div",{staticClass:"ha-week"},[a("div",[e._v(e._s(e.getYMDFormaterTime(t.createTime)))]),e._v(" "),a("div",[e._v(e._s(e.getWeekFormaterTime(t.createTime)))])]),e._v(" "),a("div",{staticClass:"ha-circle"}),e._v(" "),a("div",{staticClass:"ha-time"},[e._v(e._s(e.getTimeFormaterTime(t.createTime)))]),e._v(" "),a("div",{staticClass:"ha-name"},[e._v(e._s(t.realname))]),e._v(" "),a("div",{staticClass:"ha-content"},e._l(t.content,function(t,s){return a("p",{key:s},[e._v(e._s(t))])})),e._v(" "),a("div",{staticClass:"ha-line"})])}))},[],!1,null,"4272a698",null);o.options.__file="PerformanceHistory.vue";t.a=o.exports},gixq:function(e,t,a){},hxdy:function(e,t,a){},jzeO:function(e,t,a){"use strict";var s={name:"Reminder",components:{},props:{closeShow:{type:Boolean,default:!1},content:{type:String,default:"内容"},fontSize:{type:String,default:"13"}},data:function(){return{}},computed:{},mounted:function(){},destroyed:function(){},methods:{close:function(){this.$emit("close")}}},i=(a("/SD7"),a("KHd+")),l=Object(i.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("flexbox",{staticClass:"reminder-wrapper"},[a("flexbox",{staticClass:"reminder-body",attrs:{align:"stretch"}},[a("i",{staticClass:"wk wk-warning reminder-icon"}),e._v(" "),a("div",{staticClass:"reminder-content",style:{"font-size":e.fontSize+"px"},domProps:{innerHTML:e._s(e.content)}}),e._v(" "),e._t("default"),e._v(" "),e.closeShow?a("i",{staticClass:"el-icon-close close",on:{click:e.close}}):e._e()],2)],1)},[],!1,null,"d9a726d6",null);l.options.__file="Reminder.vue";t.a=l.exports},r8yA:function(e,t,a){"use strict";var s=a("07L2");a.n(s).a},v5G9:function(e,t,a){},wQsH:function(e,t,a){"use strict";var s=a("QbLZ"),i=a.n(s),l=a("9I6p"),n=a("WfJ5"),o=a("3c4F"),r={name:"RejectDialog",components:{},mixins:[a("nboU").a],props:{handleType:String,id:[String,Number],des:String,visible:{type:Boolean,required:!0,default:!1}},data:function(){return{loading:!1,form:{},rules:{rejectReason:[{required:!0,message:"请输入",trigger:"blur"}]}}},computed:{title:function(){return"evaluato"==this.handleType?"驳回评定":"驳回目标"}},watch:{visible:{handler:function(e){e&&(this.form={rejectReason:""})},immediate:!0}},mounted:function(){},methods:{handleCancel:function(){this.form={rejectReason:""},this.$refs.rejectForm&&this.$refs.rejectForm.clearValidate(),this.$emit("update:visible",!1)},handleConfirm:function(){var e=this;this.$refs.rejectForm.validate(function(t){if(t){e.loading=!0;var a=l.m,s={employeeAppraisalId:e.id,rejectReason:e.form.rejectReason};"target"==e.handleType||"evaluato"==e.handleType?(a=l.k,s.status={target:2,evaluato:3}[e.handleType]):s.status=2,a(s).then(function(t){e.$message.success("操作成功"),e.$emit("change"),e.handleCancel(),e.loading=!1}).catch(function(){e.loading=!1})}})}}},c=(a("BdXn"),a("KHd+")),u=Object(c.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{ref:"wkDialog",attrs:{visible:e.visible,"append-to-body":!0,"close-on-click-modal":!1,title:e.title,width:"500px"},on:{close:e.handleCancel}},[a("div",{staticClass:"form-add-dialog-body"},[e.des?a("div",{staticClass:"form-des"},[e._v(e._s(e.des))]):e._e(),e._v(" "),a("el-form",{ref:"rejectForm",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"rejectReason",label:"驳回原因"}},[a("el-input",{attrs:{autosize:{minRows:3},maxlength:800,type:"textarea",resize:"none"},model:{value:e.form.rejectReason,callback:function(t){e.$set(e.form,"rejectReason",t)},expression:"form.rejectReason"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v("取消")]),e._v(" "),a("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:e.handleConfirm,expression:"handleConfirm"}],attrs:{type:"primary"}},[e._v("保存")])],1)])},[],!1,null,"35ebe2ca",null);u.options.__file="RejectDialog.vue";var d=u.exports,v=a("PcpC"),m=a("jzeO"),p=a("Gbek"),f=a("7Qib"),h=a("L2JU"),_=a("FdMb"),b={name:"EmployeeConfirmPerformance",components:{PerformanceHistory:n.a,ScheduleEditDialog:o.a,RejectDialog:d,Reminder:m.a,WkCircleTag:v.a},props:{nextList:Array,nextIndex:Number,handleType:String,id:[String,Number]},data:function(){return{loading:!1,zIndex:Object(f.q)(),detailData:null,form:null,rejectData:{type:"",des:""},rejectDialogShow:!1,scheduleEditShow:!1,dialogEditData:{},levelOptions:[]}},computed:i()({},Object(h.b)(["hrm"]),{detailAuth:function(){return this.appraisalAuth&&this.appraisalAuth.read||this.detailData&&(4===this.detailData.appraisalStatus||5===this.detailData.status)},title:function(){return"绩效目标"},evaluatoWriteShow:function(){return"evaluato"==this.handleType&&!this.isDisableHandle},isDisableHandle:function(){return 4===this.detailData.appraisalStatus||5===this.detailData.status},evaluatoResultShow:function(){return!!this.detailData&&((3==this.detailData.status||4==this.detailData.status||6==this.detailData.status||5==this.detailData.status)&&this.detailData.evaluatoResultList&&this.detailData.evaluatoResultList.length>0)},editScheduleShow:function(){return this.detailData&&1!=this.detailData.status&&2!=this.detailData.status},finalResultShow:function(){return this.detailData&&6==this.detailData.status},canEditSchedule:function(){return"schedule"==this.handleType&&this.detailData&&3==this.detailData.status&&(1==this.detailData.appraisalStatus||2==this.detailData.appraisalStatus)},rejectShow:function(){return!!(this.detailData&&this.detailData.evaluatoResultList&&this.detailData.evaluatoResultList.length>0)&&this.detailData.evaluatoResultList.filter(function(e){return 1===e.status}).length>0}}),watch:{id:{handler:function(e){e&&(this.detailData=null,this.form=null,this.getDetail())},immediate:!0}},mounted:function(){this.debouncedQueryLevelByScore=Object(_.a)(500,this.queryLevelByScore),this.debouncedSubmitConfirmClick=Object(_.a)(300,this.submitConfirmClick),this.debouncedSubmitEvaluatoClick=Object(_.a)(300,this.submitEvaluatoClick)},methods:{getDetail:function(){var e=this;"evaluato"==this.handleType&&this.getLevelList(),this.loading=!0,Object(l.c)(this.id).then(function(t){var a=t.data||{};e.detailData=Object(f.w)(a);var s={},i=a.tableTemp;s.description=i.description,s.isEmpWeight=i.isEmpWeight;var l=a.fixedSegList||[];l.forEach(function(e){var t=e.evaluatoSegList.find(function(e){return 0===e.status});t&&(e.score=t.score,e.evaluate=t.evaluate)}),s.fixedSegList=l;var n=a.noFixedSegList||[];n.forEach(function(e){var t=e.evaluatoSegList.find(function(e){return 0===e.status});t&&(e.score=t.score,e.evaluate=t.evaluate)}),s.noFixedSegList=n||[];var o=a.evaluatoResultList||[],r=o.find(function(e){return 0===e.status});r&&(s.score=r.score,s.levelId=r.levelId,s.evaluate=r.evaluate),s.evaluatoResultList=o,e.form=s,e.loading=!1}).catch(function(){e.loading=!1,e.closeClick()})},getLevelList:function(){var e=this;Object(l.g)(this.id).then(function(t){e.levelOptions=t.data||[]}).catch(function(){})},itemHandleClick:function(e,t,a,s){this.dialogEditData={type:e,dataType:t,item:a,index:s},this.scheduleEditShow=!0},scheduleChange:function(e){"schedule"==this.dialogEditData.type&&(this.dialogEditData.item.schedule=e,this.$refs.performanceHistory.getDetail())},submitConfirmClick:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$confirm("您确定同意该员工的考核目标吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.loading=!0,Object(l.m)({employeeAppraisalId:e.id,status:1}).then(function(a){t?e.nextIndex+1<=e.nextList.length-1?(e.$emit("nextChange",e.nextIndex+1),e.$message.success("操作成功")):(e.$message.success("操作成功，没有更多考核了"),e.closeClick()):(e.$message.success("操作成功"),e.closeClick()),e.loading=!1}).catch(function(){e.loading=!1})}).catch(function(){e.$message({type:"info",message:"已取消操作"})})},rejectClick:function(e){"evaluato"==this.handleType&&(this.rejectData.type=e,"target"==e?this.rejectData.des="":"evaluato"==e&&(this.rejectData.des="您将驳回上一评定人的评定结果，确定驳回吗？")),this.rejectDialogShow=!0},rejectChange:function(){this.closeClick()},submitEvaluatoClick:function(e){var t=this;this.$refs.form.validate(function(a){if(!a)return t.$message.error("请完善信息"),!1;t.loading=!0;var s={employeeAppraisalId:t.id,levelId:t.form.levelId,score:t.form.score,evaluate:t.form.evaluate,status:1},i=t.form.fixedSegList.map(function(e){return{evaluate:e.evaluate,score:e.score,segId:e.segId}}),n=t.form.noFixedSegList.map(function(e){return{evaluate:e.evaluate,score:e.score,segId:e.segId}});s.resultEvaluatoSegBOList=i.concat(n),Object(l.k)(s).then(function(a){e?t.nextIndex+1<=t.nextList.length-1?(t.$emit("nextChange",t.nextIndex+1),t.$message.success("操作成功")):(t.$message.success("操作成功，没有更多考核了"),t.closeClick()):(t.$message.success("操作成功"),t.closeClick()),t.loading=!1}).catch(function(){t.loading=!1})})},getYMDTime:function(e){return Object(f.C)(e)},getScoreRules:function(){var e=this;return{validator:function(t,a,s){e.detailData&&(a<0||a>parseInt(e.detailData.fullScore)||null===a||void 0===a||""===a)?s(new Error("范围在0-"+e.detailData.fullScore+"之间")):s()},trigger:["blur","change"]}},getEmployeeLabelName:function(){return 6==this.detailData.status?this.detailData.levelName:p.a.statusValue[this.detailData.status]},getEmployeeNames:function(e){return e.map(function(e){return e.employeeName}).join("，")},closeClick:function(){this.$emit("change"),this.$emit("close")},scoreInputBlur:function(){var e=this.form.fixedSegList,t=this.form.noFixedSegList,a=0;e.forEach(function(e){a=Object(f.i)(a,((e.score||0)*(e.weight||0)/100).toFixed(2))}),t.forEach(function(e){a=Object(f.i)(a,((e.score||0)*(e.weight||0)/100).toFixed(2))}),this.$set(this.form,"score",a),this.debouncedQueryLevelByScore()},queryLevelByScore:function(){var e=this,t=this.levelOptions.find(function(t){return t.minScore<=e.form.score&&e.form.score<=t.maxScore});t&&this.$set(this.form,"levelId",t.levelId)}}},g=(a("22VT"),Object(c.a)(b,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"opacity-fade"}},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"eep",style:{"z-index":e.zIndex}},[e.form?s("el-card",{staticClass:"eep-con"},[s("div",{staticClass:"eep-header"},[e._v("\n        "+e._s(e.title)+"\n        "),s("div",{staticClass:"eep-header__ft"},["confirm"==e.handleType?[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.debouncedSubmitConfirmClick(!1)}}},[e._v("同意")]),e._v(" "),e.nextList&&e.nextList.length>1&&e.nextIndex<e.nextList.length-1?s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.debouncedSubmitConfirmClick(!0)}}},[e._v("同意并确认下一个")]):e._e(),e._v(" "),s("el-button",{on:{click:e.rejectClick}},[e._v("驳回目标")])]:"evaluato"==e.handleType?[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.debouncedSubmitEvaluatoClick(!1)}}},[e._v("提交")]),e._v(" "),e.nextList&&e.nextList.length>1&&e.nextIndex<e.nextList.length-1?s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.debouncedSubmitEvaluatoClick(!0)}}},[e._v("提交并确认下一个")]):e._e(),e._v(" "),s("el-button",{on:{click:function(t){e.rejectClick("target")}}},[e._v("驳回目标")]),e._v(" "),e.rejectShow?s("el-button",{on:{click:function(t){e.rejectClick("evaluato")}}},[e._v("驳回评定")]):e._e()]:e._e(),e._v(" "),s("el-button",{on:{click:e.closeClick}},[e._v("关闭")])],2)]),e._v(" "),s("div",{staticClass:"eep-body"},[s("el-form",{ref:"form",staticClass:"eep-left",attrs:{model:e.form,"validate-on-rule-change":!1,"hide-required-asterisk":""}},[s("reminder",{staticClass:"xr-reminder",attrs:{content:e.form.description}}),e._v(" "),e.detailAuth?s("div",{staticClass:"employee"},[s("div",{staticClass:"employee__label"},[e._v("\n              考核人\n            ")]),e._v(" "),s("div",{staticClass:"employee__name"},[e._v("\n              "+e._s(e.detailData.employeeName)+"\n            ")]),e._v(" "),s("flexbox",{staticClass:"employee__detail"},[s("div",{staticClass:"employee-section"},[s("flexbox",{staticStyle:{"margin-bottom":"15px"},attrs:{align:"stretch"}},[s("flexbox-item",{staticClass:"employee-item"},[s("div",{staticClass:"employee-item__label"},[e._v("目标确认人")]),e._v(" "),s("div",{staticClass:"employee-item__value"},[e._v(e._s(e.getEmployeeNames(e.detailData.confirmorsList)))])]),e._v(" "),s("flexbox-item",{staticClass:"employee-item"},[s("div",{staticClass:"employee-item__label"},[e._v("结果评定人")]),e._v(" "),s("div",{staticClass:"employee-item__value"},[e._v(e._s(e.getEmployeeNames(e.detailData.evaluatorsList)))])])],1),e._v(" "),s("div",{staticClass:"employee-item"},[s("div",{staticClass:"employee-item__label"},[e._v("结果确认人")]),e._v(" "),s("div",{staticClass:"employee-item__value"},[e._v(e._s(e.getEmployeeNames(e.detailData.resultConfirmors)))])])],1),e._v(" "),s("wk-circle-tag",{attrs:{label:e.getEmployeeLabelName(),des:6==e.detailData.status?e.detailData.score+"分":"",bold:6==e.detailData.status}}),e._v(" "),4===e.detailData.appraisalStatus?s("img",{staticClass:"employee-icon",attrs:{width:"120px",src:a("WBVl")}}):5===e.detailData.status?s("img",{staticClass:"employee-icon",attrs:{width:"120px",src:a("+WIx")}}):e._e()],1)],1):e._e(),e._v(" "),e._l(e.form.fixedSegList,function(t,a){return s("div",{key:"fix-"+a,staticClass:"content-section"},[s("div",{staticClass:"section__handle"},[e.editScheduleShow?s("el-button",{attrs:{disabled:!e.canEditSchedule,type:"text"},on:{click:function(s){e.itemHandleClick("schedule","fixed",t,a)}}},[e._v("\n                "+e._s(null!==t.schedule&&""!==t.schedule||!e.canEditSchedule?"进度"+(t.schedule||0)+"%":"添加进度"))]):e._e(),e._v(" "),s("el-button",{attrs:{type:"text",disabled:""}},[e._v("\n                "+e._s("权重"+(t.weight||0)+"%")+"\n              ")])],1),e._v(" "),s("div",{staticClass:"item-section"},[s("div",{staticClass:"el-row"},[e._v("\n                "+e._s(t.segName)+"\n              ")]),e._v(" "),s("div",e._l(t.items,function(t,a){return s("div",{key:a,staticClass:"el-row",staticStyle:{"padding-left":"140px"}},[s("div",{staticClass:"sub-input-value"},[e._v(e._s(t.itemName))])])})),e._v(" "),s("div",[e.evaluatoWriteShow?s("el-row",{staticClass:"write-score",attrs:{type:"flex"}},[s("el-col",{staticClass:"write-score-item",attrs:{span:8}},[s("flexbox",[s("div",{staticClass:"label"},[e._v("评分")]),e._v(" "),s("el-form-item",{attrs:{prop:"fixedSegList["+a+"].score",rules:e.getScoreRules(),label:""}},[s("el-input",{directives:[{name:"wk-number",rawName:"v-wk-number"}],attrs:{type:"text"},on:{blur:e.scoreInputBlur},model:{value:t.score,callback:function(a){e.$set(t,"score",a)},expression:"item.score"}})],1)],1)],1),e._v(" "),s("el-col",{staticClass:"write-score-item",attrs:{span:16}},[s("flexbox",[s("div",{staticClass:"label"},[e._v("评语")]),e._v(" "),s("el-form-item",{attrs:{label:""}},[s("el-input",{attrs:{placeholder:"请填写评语",type:"text"},model:{value:t.evaluate,callback:function(a){e.$set(t,"evaluate",a)},expression:"item.evaluate"}})],1)],1)],1)],1):e._e(),e._v(" "),e._l(t.evaluatoSegList,function(t,a){return s("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.status,expression:"evaluato.status !== 0"}],key:a,staticClass:"history-score"},[s("el-row",{staticClass:"history-score-item",attrs:{type:"flex"}},[s("el-col",{attrs:{span:8}},[s("span",{staticClass:"label"},[e._v("评分：")]),e._v(" "),s("span",{staticClass:"laebl-value"},[e._v(e._s(t.score))])]),e._v(" "),s("el-col",{attrs:{span:8}},[s("span",{staticClass:"label"},[e._v("评定人：")]),e._v(" "),s("span",{staticClass:"laebl-value"},[e._v(e._s(t.employeeName))])]),e._v(" "),s("el-col",{attrs:{span:8}},[s("span",{staticClass:"label"},[e._v("时间：")]),e._v(" "),s("span",{staticClass:"laebl-value"},[e._v(e._s(e.getYMDTime(t.createTime)))])])],1),e._v(" "),s("flexbox",{staticClass:"history-score-item"},[s("div",{staticClass:"label"},[e._v("评语：")]),e._v(" "),s("div",{staticClass:"laebl-value"},[e._v(e._s(t.evaluate))])])],1)})],2)])])}),e._v(" "),e._l(e.form.noFixedSegList,function(t,a){return s("div",{key:a,staticClass:"section"},[s("div",{staticClass:"section__handle"},[e.editScheduleShow?s("el-button",{attrs:{disabled:!e.canEditSchedule,type:"text"},on:{click:function(s){e.itemHandleClick("schedule","noFixed",t,a)}}},[e._v("\n                "+e._s(null!==t.schedule&&""!==t.schedule||!e.canEditSchedule?"进度"+t.schedule+"%":"添加进度"))]):e._e(),e._v(" "),s("el-button",{attrs:{type:"text",disabled:""}},[e._v("\n                "+e._s("权重"+(t.weight||0)+"%")+"\n              ")])],1),e._v(" "),s("div",{staticClass:"item-section is-no-fix"},[s("el-row",{staticClass:"item-row",attrs:{type:"flex"}},[s("el-col",{attrs:{span:23}},[s("flexbox",{attrs:{align:"stretch"}},[s("el-tooltip",{attrs:{content:t.segName,placement:"top"}},[s("div",{staticClass:"div-label"},[e._v(e._s(t.segName))])]),e._v(" "),s("div",{staticClass:"div-body"},[e._v(e._s(t.value))])],1)],1),e._v(" "),s("el-col",{staticClass:"is-close",attrs:{span:1}},[e._v("\n                   \n                ")])],1),e._v(" "),s("div",e._l(t.items,function(t,i){return s("el-row",{key:a+"-"+i,staticClass:"item-row",attrs:{type:"flex"}},[s("el-col",{attrs:{span:23}},[s("flexbox",{attrs:{align:"stretch"}},[s("div",{staticClass:"sub-input sub-label"},[e._v(e._s(t.itemName))]),e._v(" "),s("div",{staticClass:"sub-label-content div-body"},[e._v(e._s(t.value))])])],1),e._v(" "),s("el-col",{staticClass:"is-close",attrs:{span:1}},[e._v("\n                     \n                  ")])],1)})),e._v(" "),s("div",[e.evaluatoWriteShow?s("el-row",{staticClass:"write-score",attrs:{type:"flex"}},[s("el-col",{staticClass:"write-score-item",attrs:{span:8}},[s("flexbox",[s("div",{staticClass:"label"},[e._v("评分")]),e._v(" "),s("el-form-item",{attrs:{prop:"noFixedSegList["+a+"].score",rules:e.getScoreRules(),label:""}},[s("el-input",{directives:[{name:"wk-number",rawName:"v-wk-number"}],attrs:{type:"text"},on:{blur:e.scoreInputBlur},model:{value:t.score,callback:function(a){e.$set(t,"score",a)},expression:"item.score"}})],1)],1)],1),e._v(" "),s("el-col",{staticClass:"write-score-item",attrs:{span:16}},[s("flexbox",[s("div",{staticClass:"label"},[e._v("评语")]),e._v(" "),s("el-form-item",{attrs:{label:""}},[s("el-input",{attrs:{placeholder:"请填写评语",type:"text"},model:{value:t.evaluate,callback:function(a){e.$set(t,"evaluate",a)},expression:"item.evaluate"}})],1)],1)],1)],1):e._e(),e._v(" "),e._l(t.evaluatoSegList,function(t,a){return s("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.status,expression:"evaluato.status !== 0"}],key:a,staticClass:"history-score"},[s("el-row",{staticClass:"history-score-item",attrs:{type:"flex"}},[s("el-col",{attrs:{span:8}},[s("span",{staticClass:"label"},[e._v("评分：")]),e._v(" "),s("span",{staticClass:"laebl-value"},[e._v(e._s(t.score))])]),e._v(" "),s("el-col",{attrs:{span:8}},[s("span",{staticClass:"label"},[e._v("评定人：")]),e._v(" "),s("span",{staticClass:"laebl-value"},[e._v(e._s(t.employeeName))])]),e._v(" "),s("el-col",{attrs:{span:8}},[s("span",{staticClass:"label"},[e._v("时间：")]),e._v(" "),s("span",{staticClass:"laebl-value"},[e._v(e._s(e.getYMDTime(t.createTime)))])])],1),e._v(" "),s("flexbox",{staticClass:"history-score-item"},[s("div",{staticClass:"label"},[e._v("评语：")]),e._v(" "),s("div",{staticClass:"laebl-value"},[e._v(e._s(t.evaluate))])])],1)})],2)],1)])}),e._v(" "),e.evaluatoResultShow||e.evaluatoWriteShow?s("div",{staticClass:"result"},[s("div",{staticClass:"result__label"},[e._v("评价结果")]),e._v(" "),e.evaluatoWriteShow?s("div",{staticClass:"result__body"},[s("flexbox",[s("flexbox",{staticStyle:{flex:"1"}},[s("div",{staticClass:"label"},[e._v("综合评分")]),e._v(" "),s("el-form-item",{attrs:{rules:e.getScoreRules(),prop:"score",label:""}},[s("el-input",{directives:[{name:"wk-number",rawName:"v-wk-number"}],attrs:{type:"text"},on:{input:e.debouncedQueryLevelByScore},model:{value:e.form.score,callback:function(t){e.$set(e.form,"score",t)},expression:"form.score"}})],1)],1),e._v(" "),s("flexbox",{staticStyle:{flex:"1","margin-left":"50px"}},[s("div",{staticClass:"label"},[e._v("等级")]),e._v(" "),s("el-form-item",{attrs:{rules:{required:!0,message:"请选择",trigger:"change"},prop:"levelId",label:""}},[s("el-select",{model:{value:e.form.levelId,callback:function(t){e.$set(e.form,"levelId",t)},expression:"form.levelId"}},e._l(e.levelOptions,function(e){return s("el-option",{key:e.levelId,attrs:{label:e.levelName,value:e.levelId}})}))],1)],1)],1),e._v(" "),s("flexbox",[s("div",{staticClass:"label"},[e._v("综合评语")]),e._v(" "),s("el-form-item",{attrs:{prop:"evaluate",label:""}},[s("el-input",{attrs:{autosize:{minRows:3},maxlength:800,placeholder:"您可以从如下角度进行综合自评：1、阶段时间内的主要成绩 2、阶段时间内的不足之处 3、下一阶段得从哪些方面努力",type:"textarea",resize:"none"},model:{value:e.form.evaluate,callback:function(t){e.$set(e.form,"evaluate",t)},expression:"form.evaluate"}})],1)],1)],1):e._e(),e._v(" "),e._l(e.form.evaluatoResultList,function(t,a){return s("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.status,expression:"evaluato.status !== 0"}],key:a,staticClass:"history-score"},[s("div",{staticClass:"history-score__title"},[e._v(e._s(t.employeeName+"的评价结果"))]),e._v(" "),s("el-row",{staticClass:"history-score-item",attrs:{type:"flex"}},[s("el-col",{attrs:{span:8}},[s("span",{staticClass:"label"},[e._v("综合评分：")]),e._v(" "),s("span",{staticClass:"laebl-value"},[e._v(e._s(t.score))])]),e._v(" "),s("el-col",{attrs:{span:8}},[s("span",{staticClass:"label"},[e._v("等级：")]),e._v(" "),s("span",{staticClass:"laebl-value"},[e._v(e._s(t.levelName))])]),e._v(" "),s("el-col",{attrs:{span:8}},[s("span",{staticClass:"label"},[e._v("时间：")]),e._v(" "),s("span",{staticClass:"laebl-value"},[e._v(e._s(e.getYMDTime(t.createTime)))])])],1),e._v(" "),s("flexbox",{staticClass:"history-score-item"},[s("div",{staticClass:"label"},[e._v("评语：")]),e._v(" "),s("div",{staticClass:"laebl-value"},[e._v(e._s(t.evaluate))])])],1)})],2):e._e()],2),e._v(" "),s("div",{staticClass:"eep-right"},[s("div",{staticClass:"epp-right__header"},[e._v("\n            考核记录\n          ")]),e._v(" "),s("performance-history",{ref:"performanceHistory",staticClass:"epp-right__body",attrs:{id:e.id}})],1)],1)]):e._e(),e._v(" "),s("reject-dialog",{attrs:{id:e.id,"handle-type":e.rejectData.type,des:e.rejectData.des,visible:e.rejectDialogShow},on:{"update:visible":function(t){e.rejectDialogShow=t},change:e.rejectChange}}),e._v(" "),s("schedule-edit-dialog",{attrs:{visible:e.scheduleEditShow,id:e.dialogEditData.item?e.dialogEditData.item.segId:""},on:{"update:visible":function(t){e.scheduleEditShow=t},change:e.scheduleChange}})],1)])},[],!1,null,"70152e8f",null));g.options.__file="EmployeeConfirmPerformance.vue";t.a=g.exports},zfuv:function(e,t,a){}}]);